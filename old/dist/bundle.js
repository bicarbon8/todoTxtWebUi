!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.formatDate=function(e){var t=e.getFullYear(),n=(e.getMonth()+1).toString();n=n.length<2?"0"+n:n;var o=e.getDate().toString();return o=o.length<2?"0"+o:o,String(t+"-"+n+"-"+o)},e.getLanguage=function(){return(window.navigator.userLanguage||window.navigator.language).toLowerCase()},e.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},e.htmlEncode=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\s{2}/g," &nbsp;")},e.htmlUnencode=function(e){return String(e).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&nbsp;/g," ")}}(t.TodoTxtUtils||(t.TodoTxtUtils={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(e){this.projects=[],this.contexts=[],this.metadatas=[],this.id=o.TodoTxtUtils.guid(),this.isActive=!0,this.parseInput(e)}return e.prototype.parseInput=function(e){e&&(this.text=e,this.parseStatus(),this.parsePriority(),this.parseCompletedDate(),this.parseCreatedDate(),this.parseProjects(),this.parseContexts())},e.prototype.parseStatus=function(){var e=this.text.match(/^(x )/);e&&e.length>0?this.isActive=!1:this.isActive=!0},e.prototype.parsePriority=function(){var e=null,t=this.text.match(/^(\([A-Z]\)[\s]+)/);t&&(e=t[0].replace(/[\s]*/g,"")),this.priority=e},e.prototype.parseCompletedDate=function(){var e=null;if(!this.isActive){var t=this.getDatesFromText();t&&(e=t[0]?t[0].replace(/[\s]*/g,""):null)}this.completedDate=e},e.prototype.parseCreatedDate=function(){var e=null,t=this.getDatesFromText();t&&(this.isActive?e=t[0]?t[0].replace(/[\s]*/g,""):null:t.length>1&&(e=t[1]?t[1].replace(/[\s]*/g,""):null)),this.createdDate=e},e.prototype.getDatesFromText=function(){var e=[],t=this.text.match(/(?:\s|^)(\d{4}-\d{2}-\d{2})(?=\s)/g);if(t)for(var n=0;n<t.length;n++)e.push(t[n]);return e},e.prototype.parseProjects=function(){var e=new Set,t=this.text.match(/((\s|^)[\(\{\["']?\+[0-9A-Za-z]+[\)\}\]"']?(?=\s|$))/g);if(t)for(var n=0;n<t.length;n++){var o=t[n].replace(/[\s]*/g,"").replace(/[\(\{\[\)\}\]"']/g,"");e.add(o)}this.projects=Array.from(e)},e.prototype.parseContexts=function(){var e=new Set,t=this.text.match(/((\s|^)[\(\{\["']?\@[0-9A-Za-z]+[\)\}\]"']?(?=\s|$))/g);if(t)for(var n=0;n<t.length;n++){var o=t[n].replace(/[\s]*/g,"").replace(/[\(\{\[\)\}\]"']/g,"");e.add(o)}this.contexts=Array.from(e)},e}();t.TodoTxtTask=a},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.priorities=new Set,e.projects=new Set,e.contexts=new Set,e.reset=function(){e.priorities=new Set,e.projects=new Set,e.contexts=new Set}}(t.TodoTxtAttributes||(t.TodoTxtAttributes={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(8);!function(e){var t=new Map,n={showClosed:!1},r=0;function i(){try{var e=new a.TodoTextPersistance(t,n);localStorage.setItem("todo-txt",JSON.stringify(e))}catch(e){0==r&&(alert("WARNING: unable to store Tasks in localStorage; ensure you export your tasks before you close the browser or they will be lost!"),console.error("TodoTxt unable to cache data in localStorage due to: "+e),r++)}}function s(){try{var e=localStorage.getItem("todo-txt");if(e){var a=JSON.parse(e);if(a.tasks){t.clear();for(var i=0;i<a.tasks.length;i++){var s=a.tasks[i];if(s.text&&s.id){var c=new o.TodoTxtTask(s.text);c.id=s.id,t.set(c.id,c)}}n=a.config}}}catch(e){0==r&&console.info("TodoTxt unable to load cache from localStorage due to: "+e)}}e.addTask=function(e){t.has(e.id)&&t.delete(e.id),t.set(e.id,e),i()},e.removeTask=function(e){var n=!1;return t.has(e)&&(t.delete(e),n=!0),i(),n},e.removeAllTasks=function(){t=new Map,i()},e.getTask=function(e){if(s(),t.has(e))return t.get(e);throw new Error("no TodoTxtTask with ID of '"+e+"' could be found")},e.getAllTasks=function(){s();var e=[];return t.forEach((function(t){e.push(t)})),e},e.getConfig=function(){return s(),n},e.setConfig=function(e){n=e,i()},e._clear=function(){t=new Map,n={showClosed:!1},localStorage.removeItem("todo-txt")}}(t.TodoTxtVault||(t.TodoTxtVault={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(6);o("document").ready((function(){a.TodoTxtView.initializeElements(),a.TodoTxtView.refreshUi()}))},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(7),s=n(2),c=n(9),l=n(0),d=n(3),u=n(4);!function(e){function t(e){var t="glyphicon-ok",n="btn-default",o=$(e);e.isActive||(t="glyphicon-remove",n="btn-danger");var a=document.createElement("div");a.className="btn-group btn-block",a.id=e.id;var r=document.createElement("span");r.classList.add("glyphicon"),r.classList.add(t);var i=document.createElement("span");i.classList.add("col-xs-2"),i.classList.add("btn"),i.classList.add("btn-lg"),i.classList.add(n),i.onclick=function(t){z(e.id),q()},i.appendChild(r),a.appendChild(i);var s=document.createElement("button");return s.classList.add("col-xs-10"),s.classList.add("ellipsis"),s.classList.add("btn"),s.classList.add("btn-lg"),s.classList.add(n),s.innerHTML=o,s.onclick=function(t){return v(e.id)},a.appendChild(s),a}function n(e){var t=document.createElement("li");return t.id=e,t.className="list-group-item",t.onclick=function(t){I(e)},t.onmouseover=function(e){t.className+=" active"},t.onmouseout=function(e){t.className=t.className.replace(/(( |^)active)/,"")},t.innerHTML='<h4 class="ellipsis">'+e+"</h4>",t}function p(){var e=document.querySelector("#filter-input").value,t=i.TodoTxt.getFilteredTaskArray(e);if(!u.TodoTxtVault.getConfig().showClosed){var n=t.filter((function(e){return e.isActive}));t=n}t&&t.length>0&&t.forEach((function(e){f(e)}))}function f(e){document.querySelector("#listContainer-div").appendChild(t(e))}function v(t){var n,o=!1;t?n=i.TodoTxt.getTask(t):(n=new r.TodoTxtTask,o=!0),C(e.mainEventHandlers);var a=function(e,t){var n=document.createElement("span");s(n).attr("aria-hidden","true"),n.innerHTML=" &times;";var o=document.createElement("button");o.type="button",o.id="modalEditClose-button",o.classList.add("close"),s(o).attr("data-dismiss","modal"),s(o).attr("aria-label",c.TodoTxtResources.get("CLOSE")),o.onclick=function(e){h()},o.appendChild(n);var a=document.createElement("h4");a.classList.add("modal-title"),a.id="modalEdit-label";var r=document.createElement("div");r.classList.add("modal-header"),r.appendChild(o),r.appendChild(a);var i=document.createElement("div");i.id="modalEdit-textarea",i.classList.add("textarea"),i.contentEditable="true";var l=$(e).replace(/hidden-xs/,"");i.innerHTML=l;var d=document.createElement("div");d.classList.add("modal-body"),d.appendChild(i);var u=document.createElement("span");u.classList.add("hidden-xs");var p=t?c.TodoTxtResources.get("ADD"):c.TodoTxtResources.get("UPDATE");u.innerText=" "+p;var f=document.createElement("span");f.classList.add("glyphicon"),f.classList.add("glyphicon-ok");var v=document.createElement("a");v.type="button",v.id="modalEditSave-button",v.classList.add("btn"),v.classList.add("btn-lg"),v.classList.add("btn-success"),s(v).attr("data-toggle","tooltip"),s(v).attr("data-placement","top"),s(v).attr("text",p),v.onclick=function(e){D()},v.appendChild(f),v.appendChild(u);var g=document.createElement("span");g.classList.add("hidden-xs"),g.innerText=" "+c.TodoTxtResources.get("PREVIEW");var m=document.createElement("span");m.classList.add("glyphicon"),m.classList.add("glyphicon-eye-open");var x=document.createElement("a");x.type="button",x.id="modalEditPreview-button",x.classList.add("btn"),x.classList.add("btn-lg"),x.classList.add("btn-primary"),s(x).attr("data-toggle","tooltip"),s(x).attr("data-placement","top"),s(x).attr("text",c.TodoTxtResources.get("PREVIEW")),x.onclick=function(e){T()},x.appendChild(m),x.appendChild(g);var y=document.createElement("span");y.classList.add("hidden-xs"),y.innerText=" "+c.TodoTxtResources.get("DELETE");var b=document.createElement("span");b.classList.add("glyphicon"),b.classList.add("glyphicon-floppy-remove");var E=document.createElement("a");E.type="button",E.id="modalEditDelete-button",E.classList.add("btn"),E.classList.add("btn-lg"),E.classList.add("btn-danger"),s(E).attr("data-toggle","tooltip"),s(E).attr("data-placement","top"),s(E).attr("text",c.TodoTxtResources.get("DELETE")),E.onclick=function(e){_()},E.appendChild(b),E.appendChild(y);var k=document.createElement("div");k.classList.add("btn-group"),k.classList.add("btn-group-justified"),k.appendChild(v),k.appendChild(x),t||k.appendChild(E);var C=document.createElement("div");C.classList.add("modal-footer"),C.appendChild(k);var S=document.createElement("div");S.classList.add("modal-content"),S.appendChild(r),S.appendChild(d),S.appendChild(C);var w=document.createElement("div");w.classList.add("modal-dialog"),w.appendChild(S);var L=document.createElement("div");return L.classList.add("modal"),L.id="modalEdit-div",L.tabIndex=-1,s(L).attr("role","dialog"),s(L).attr("aria-labelledby","modalEdit-label"),s(L).attr("aria-hidden","true"),s(L).attr("task-id",e.id),L.appendChild(w),L}(n,o);document.body.appendChild(a),k(e.modalEventHandlers),s(a).show(0),document.querySelector("#modalEdit-textarea").focus()}function T(){var e=document.querySelector("#modalEdit-textarea");if(e){var t=e.textContent,n=new r.TodoTxtTask(t);e.innerHTML=$(n)}}function h(){C(e.modalEventHandlers),s("#modalEdit-div").remove(),k(e.mainEventHandlers),q()}function g(){var e=document.querySelector("#priorities-ul");d.TodoTxtAttributes.priorities.forEach((function(t){if(t){var o=n(t);e.appendChild(o)}}))}function m(){document.querySelector("#priorities-ul").innerHTML=""}function x(){var e=document.querySelector("#projects-ul");d.TodoTxtAttributes.projects.forEach((function(t){if(t){var o=n(t);e.appendChild(o)}}))}function y(){document.querySelector("#projects-ul").innerHTML=""}function b(){var e=document.querySelector("#contexts-ul");d.TodoTxtAttributes.contexts.forEach((function(t){if(t){var o=n(t);e.appendChild(o)}}))}function E(){document.querySelector("#contexts-ul").innerHTML=""}function k(e){e.forEach((function(e){var t=!1;e.uc&&(t=e.uc);try{e.el().addEventListener(e.ev,e.fn,t)}catch(e){console.error(e)}}))}function C(e){e.forEach((function(e){var t=!1;e.uc&&(t=e.uc);try{e.el().removeEventListener(e.ev,e.fn,t)}catch(e){console.error(e)}}))}function S(e){83==e.keyCode&&e.altKey&&J()}function w(e){67==e.keyCode&&e.altKey&&q()}function L(e){84==e.keyCode&&e.altKey&&v()}function A(e){B(e)}function R(e){e.keyCode&&13===e.keyCode&&e.altKey&&D()}function D(){var e=document.querySelector("#modalEdit-div"),t=s(e).attr("task-id"),n=document.querySelector("#modalEdit-textarea").textContent;if(n=n.trim(),n=l.TodoTxtUtils.htmlUnencode(n),i.TodoTxt.updateTask(t,n)){q();try{h()}catch(e){}}}function P(e){27!==e.keyCode&&0!==e.keyCode||h()}function _(){var e=document.querySelector("#modalEdit-div"),t=s(e).attr("task-id"),n=i.TodoTxt.getTask(t);if(n&&confirm(c.TodoTxtResources.get("DELETE_CONFIRM")+'\n\t"'+n.text+'"')&&u.TodoTxtVault.removeTask(t)){q();try{h()}catch(e){}}}var O;function j(){O&&window.clearTimeout(O),O=window.setTimeout((function(){H()}),500)}function M(e){e.keyCode&&80===e.keyCode&&e.altKey&&T()}function q(){U(u.TodoTxtVault.getConfig().showClosed),C(e.mainEventHandlers),N(),m(),y(),E(),F(),p(),g(),x(),b(),k(e.mainEventHandlers)}function I(e){e&&(document.querySelector("#filter-input").value=e,j())}function F(){document.querySelector("#filter-input").value=""}function N(){document.querySelector("#listContainer-div").innerHTML=""}function H(){N(),p()}function V(){U(!!!document.querySelector("#showClosed-label").className.match(/(( |^)btn-success)/))}function U(e){var t=document.querySelector("#showClosed-label");t.className=e?t.className.replace(/(( |^)btn-danger)/," btn-success"):t.className.replace(/(( |^)btn-success)/," btn-danger"),u.TodoTxtVault.setConfig({showClosed:e})}function K(e){var t=document.querySelector("#"+e+" .panel-heading"),n=document.querySelector("#"+e+" .panel-body");!!n.className.match(/(( |^)collapse)/)?W(t,n):X(t,n)}function W(e,t){var n=e.querySelector(".glyphicon");t.className=t.className.replace(/(( |^)collapse)/g,""),n.className=n.className.replace(/(( |^)glyphicon-chevron-down)/," glyphicon-chevron-up")}function X(e,t){var n=e.querySelector(".glyphicon");t.className+=" collapse",n.className=n.className.replace(/(( |^)glyphicon-chevron-up)/," glyphicon-chevron-down")}function z(e){var t=i.TodoTxt.getTask(e);t&&(t.isActive?i.TodoTxt.closeTask(e):i.TodoTxt.activateTask(e))}function B(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;if(t.length>0){var n=t[0],o=new FileReader;o.onloadend=function(e){confirm(c.TodoTxtResources.get("OVERWRITE_CONFIRM"))&&(i.TodoTxt.parseTodoTxtFile(e.target.result.toString()),q())},o.readAsText(n,"UTF-8")}}function Z(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function J(){for(var e=i.TodoTxt.getSortedTaskArray(),t=[],n=0;n<e.length;n++)t.push(e[n].text);var o=t.join("\n"),a=encodeURI("data:text/csv;charset=utf-8,"+o);window.open(a)}function $(e){var t=e.text||"";t=l.TodoTxtUtils.htmlEncode(t);var n=G(e);t=t.replace(e.priority,'<span class="'+n+'"><b>'+e.priority+"</b></span>"),e.projects.forEach((function(e){var n=new RegExp(e.replace(/\+/g,"\\+")+"(?![0-9A-Za-z])","g");t=t.replace(n,'<span class="text-muted"><b><i>'+e+"</i></b></span>")})),e.contexts.forEach((function(e){var n=new RegExp(e+"(?![0-9A-Za-z])","g");t=t.replace(n,'<span class="text-muted"><b><i>'+e+"</i></b></span>")}));var o=e.createdDate;return o&&(t=t.replace(o,'<span class="text-muted hidden-xs"><b><i>'+o+"</i></b></span>")),t}function G(e){var t="";return null!==e.priority&&e.isActive&&("(A)"===e.priority&&(t+=" text-danger"),"(B)"===e.priority&&(t+=" text-warning"),"(C)"===e.priority&&(t+=" text-primary")),t}e.generateTaskElement=t,e.generateListElement=n,e.displayTasks=p,e.displayTask=f,e.removeTask=function(e){document.querySelector("#listContainer-div").removeChild(document.querySelector("#"+e))},e.displayModalForTask=v,e.updateModalPreview=T,e.removeModal=h,e.modalEventHandlers=[{el:function(){return document},ev:"keydown",fn:function(e){R(e)}},{el:function(){return document},ev:"keydown",fn:function(e){P(e)}},{el:function(){return document},ev:"keydown",fn:function(e){M(e)}}],e.displayPriorities=g,e.clearPriorities=m,e.displayProjects=x,e.clearProjects=y,e.displayContexts=b,e.clearContexts=E,e.mainEventHandlers=[{el:function(){return document},ev:"keydown",fn:function(e){S(e)}},{el:function(){return document},ev:"keydown",fn:function(e){w(e)}},{el:function(){return document},ev:"keydown",fn:function(e){L(e)}},{el:function(){return document.querySelector("#fileDrop-div")},ev:"dragover",fn:function(e){Z(e)}},{el:function(){return document.querySelector("#fileDrop-div")},ev:"drop",fn:function(e){A(e)}},{el:function(){return document.querySelector("#fileUpload-input")},ev:"change",fn:function(e){A(e)}},{el:function(){return document.querySelector("#showClosed-label")},ev:"click",fn:function(){V(),q()}},{el:function(){return document.querySelector("#addTaskButton-button")},ev:"click",fn:function(){v()}},{el:function(){return document.querySelector("#saveFileButton-button")},ev:"click",fn:function(){J()}},{el:function(){return document.querySelector("#filter-input")},ev:"keyup",fn:function(){j()}},{el:function(){return document.querySelector("#clearFilter-button")},ev:"click",fn:function(){q()}},{el:function(){return document.querySelector("#priorities-div .panel-heading")},ev:"click",fn:function(){K("priorities-div")}},{el:function(){return document.querySelector("#projects-div .panel-heading")},ev:"click",fn:function(){K("projects-div")}},{el:function(){return document.querySelector("#contexts-div .panel-heading")},ev:"click",fn:function(){K("contexts-div")}}],e.bindControlEvents=k,e.unbindControlEvents=C,e.handleAltS=S,e.handleAltC=w,e.handleAltT=L,e.handleDrop=A,e.handleAltEnter=R,e.handleEsc=P,e.handleDeleteClick=_,e.handleFilter=j,e.handleAltP=M,e.refreshUi=q,e.setFilters=I,e.clearFilters=F,e.clearTasks=N,e.filterDisplayedTasks=H,e.toggleShowClosedStatus=V,e.setShowClosed=U,e.togglePanel=K,e.showPanel=W,e.hidePanel=X,e.toggleTaskStatus=z,e.getTodoTxtFile=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){try{s.ajax({url:e,cache:!1,error:function(e,t){alert(t)},success:function(e){i.TodoTxt.parseTodoTxtFile(e),q(),t()}})}catch(e){n(e)}}))];case 1:return t.sent(),[2]}}))}))},e.handleFileSelect=B,e.handleDragOver=Z,e.exportTodoTxtFile=J,e.getMarkupForTask=$,e.getDisplayClassForTask=G,e.initializeElements=function(){var e='     <div class="container-fluid" id="fileDrop-div">     <div class="col-md-9">         <div class="row">             <div class="btn-group btn-group-justified">                 <a class="btn btn-block btn-primary btn-lg btn-file ellipsis" data-toggle="tooltip" data-placement="top" text="'+c.TodoTxtResources.get("IMPORT")+'">                     <span class="glyphicon glyphicon-save"></span> <span class="hidden-xs">'+c.TodoTxtResources.get("IMPORT")+'</span> <input id="fileUpload-input" type="file" placeholder="Select todo.txt File">                 </a>                 <a id="addTaskButton-button" class="btn btn-lg btn-primary ellipsis" data-toggle="tooltip" data-placement="top" text="'+c.TodoTxtResources.get("ADD_TASK")+'">                     <span class="glyphicon glyphicon-plus"></span> <span class="hidden-xs">'+c.TodoTxtResources.get("ADD_TASK")+'</span>                 </a>                 <a id="saveFileButton-button" class="btn btn-lg btn-primary ellipsis" data-toggle="tooltip" data-placement="top" text="'+c.TodoTxtResources.get("EXPORT")+'">                     <span class="glyphicon glyphicon-open"></span> <span class="hidden-xs">'+c.TodoTxtResources.get("EXPORT")+'</span>                 </a>                 <a id="showClosed-label" class="btn btn-lg btn-danger ellipsis" data-toggle="tooltip" data-placement="top" text="'+c.TodoTxtResources.get("SHOW_CLOSED")+'">                     <span class="glyphicon glyphicon-ok-circle"></span> <span class="hidden-xs">'+c.TodoTxtResources.get("SHOW_CLOSED")+'</span>                 </a>             </div>         </div>         <div class="row">             <div class="input-group input-group-lg">                 <input id="filter-input" type="text" class="form-control" placeholder="'+c.TodoTxtResources.get("FILTER_PLACEHOLDER_TEXT")+'">                 <span class="input-group-btn">                     <button id="clearFilter-button" class="btn btn-primary" type="button" data-toggle="tooltip" data-placement="top" text="'+c.TodoTxtResources.get("CLEAR_FILTER")+'"><span class="glyphicon glyphicon-remove-circle"></span> <span class="hidden-xs">'+c.TodoTxtResources.get("CLEAR_FILTER")+'</span></button>                 </span>             </div>         </div>         <div class="row">             <div id="listContainer-div"></div>         </div>     </div>     <div class="col-md-3">         <div id="priorities-div" class="panel panel-primary">             <div class="panel-heading">                 <h3 class="panel-title"><span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span> '+c.TodoTxtResources.get("PRIORITIES")+'</h3>             </div>             <div class="panel-body">                 <ul id="priorities-ul" class="list-group"></ul>             </div>         </div>         <div id="projects-div" class="panel panel-primary">             <div class="panel-heading">                 <h3 class="panel-title"><span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span> '+c.TodoTxtResources.get("PROJECTS")+'</h3>             </div>             <div class="panel-body">                 <ul id="projects-ul" class="list-group"></ul>             </div>         </div>         <div id="contexts-div" class="panel panel-primary">             <div class="panel-heading">                 <h3 class="panel-title"><span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span> '+c.TodoTxtResources.get("CONTEXTS")+'</h3>             </div>             <div class="panel-body">                 <ul id="contexts-ul" class="list-group"></ul>             </div>         </div>     </div>     </div>',t=document.getElementById("todotxt");t&&(t.innerHTML=e)}}(t.TodoTxtView||(t.TodoTxtView={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=n(1),r=n(0),i=n(4);!function(e){function t(e){var t=e||"",n=new a.TodoTxtTask(t);return c(n),n.id}function n(e){return i.TodoTxtVault.getTask(e)}function s(t,o){var r;try{r=n(t)}catch(e){r=new a.TodoTxtTask}return r.parseInput(o),e.addTask(r),!0}function c(e){i.TodoTxtVault.addTask(e),l(e)}function l(e){(e.isActive||i.TodoTxtVault.getConfig().showClosed)&&(e.priority&&o.TodoTxtAttributes.priorities.add(e.priority),e.projects.forEach((function(e){e&&o.TodoTxtAttributes.projects.add(e)})),e.contexts.forEach((function(e){e&&o.TodoTxtAttributes.contexts.add(e)})))}function d(e,t){var n=e.isActive,o=t.isActive,a=e.priority,r=t.priority,i=e.createdDate,s=t.createdDate,c=e.completedDate,l=t.completedDate;if(n!==o)return n?-1:1;if(a!==r){if(!r||a<r)return-1;if(!a||a>r)return 1}else{if(i!==s)return i<s?-1:1;if(c!==l)return c>l?-1:1}return 0}e.getSortedTaskArray=function(){var e=i.TodoTxtVault.getAllTasks();o.TodoTxtAttributes.reset();for(var t=0;t<e.length;t++)l(e[t]);return e.sort(d),e},e.getFilteredTaskArray=function(t){var n=e.getSortedTaskArray();if(t&&""!==t){for(var o=t.split(" "),a="",r=0;r<o.length;r++){a+=".*("+o[r].replace(/([-\(\)\[\]\{\}+\?*\.$\^\|,:#<\!\\])/g,"\\$1").replace(/\x08/g,"\\x08")+").*"}var i=new RegExp(a,"i"),s=n.filter((function(e){return e.text.match(i)}));n=s}return n},e.parseTodoTxtFile=function(e,n){n||i.TodoTxtVault.removeAllTasks();var o=e.split("\n");for(var a in o)if("string"==typeof o[a]){var r=o[a];r&&""!==r&&t(r)}},e.createTask=t,e.getTask=n,e.updateTask=s,e.addTask=c,e.closeTask=function(e){var t=n(e);if(t&&t.isActive){var o=t.text;return t.priority&&(o=o.replace(t.priority,"")),o="x "+r.TodoTxtUtils.formatDate(new Date)+" "+o,s(t.id,o),!0}return!1},e.activateTask=function(e){var t=n(e);if(t&&!t.isActive){var o=t.text;return o=o.replace(/^(x )/,"").replace(t.completedDate+" ",""),s(t.id,o),!0}return!1}}(t.TodoTxt||(t.TodoTxt={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){var n=this;this.tasks=[],this.config={showClosed:!1},e&&e.forEach((function(e){n.tasks.push({id:e.id,text:e.text})})),t&&(this.config=t)};t.TodoTextPersistance=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(0);!function(e){var t=new Map;e.register=function(e,n){t.set(e,n)},e.get=function(e){var n=t.get(a.TodoTxtUtils.getLanguage());n||(n=t.get("en-us"));var o=n[e];if(!o)throw"requested resource not found: "+e;return o}}(o=t.TodoTxtResources||(t.TodoTxtResources={})),o.register("en-us",{OVERWRITE_CONFIRM:"This will overwrite any existing list.  Are you sure you wish to proceed?",DELETE_CONFIRM:"Are you sure you want to delete task?",IMPORT:"Import",ADD_TASK:"Add Task",EXPORT:"Export",SHOW_CLOSED:"Show Closed",FILTER_PLACEHOLDER_TEXT:"Type filter(s)",CLEAR_FILTER:"Clear Filter",PRIORITIES:"Priorities",PROJECTS:"Projects",CONTEXTS:"Contexts",CLOSE:"Close",EDIT_TASK_HEADER:"Edit Task",ADD:"Add",UPDATE:"Update",PREVIEW:"Preview",DELETE:"Delete"})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlbHBlcnMvdG9kby10eHQtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rhc2tzL3RvZG8tdHh0LXRhc2sudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwialF1ZXJ5XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rhc2tzL3RvZG8tdHh0LWF0dHJpYnV0ZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0b3JhZ2UvdG9kby10eHQtdmF1bHQudHMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VpL3RvZG8tdHh0LXZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RvZG8tdHh0LnRzIiwid2VicGFjazovLy8uL3NyYy9zdG9yYWdlL3RvZG8tdHh0LWNhY2hlLnRzIiwid2VicGFjazovLy8uL3NyYy91aS90b2RvLXR4dC1yZXNvdXJjZXMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJUb2RvVHh0VXRpbHMiLCJmb3JtYXREYXRlIiwiZGF0ZU9iaiIsInl5eXkiLCJnZXRGdWxsWWVhciIsIm1tIiwiZ2V0TW9udGgiLCJ0b1N0cmluZyIsImxlbmd0aCIsImRkIiwiZ2V0RGF0ZSIsIlN0cmluZyIsImdldExhbmd1YWdlIiwid2luZG93IiwibmF2aWdhdG9yIiwibGFuZ3VhZ2UiLCJ0b0xvd2VyQ2FzZSIsImd1aWQiLCJyZXBsYWNlIiwiTWF0aCIsInJhbmRvbSIsImh0bWxFbmNvZGUiLCJzdHIiLCJodG1sVW5lbmNvZGUiLCJ0ZXh0IiwicHJvamVjdHMiLCJjb250ZXh0cyIsIm1ldGFkYXRhcyIsInRoaXMiLCJpZCIsImlzQWN0aXZlIiwicGFyc2VJbnB1dCIsImlucHV0IiwicGFyc2VTdGF0dXMiLCJwYXJzZVByaW9yaXR5IiwicGFyc2VDb21wbGV0ZWREYXRlIiwicGFyc2VDcmVhdGVkRGF0ZSIsInBhcnNlUHJvamVjdHMiLCJwYXJzZUNvbnRleHRzIiwibWF0Y2giLCJwcmkiLCJwcmlvcml0eSIsImNvbXBsZXRlZCIsImRhdGVzIiwiZ2V0RGF0ZXNGcm9tVGV4dCIsImNvbXBsZXRlZERhdGUiLCJjcmVhdGVkIiwiY3JlYXRlZERhdGUiLCJwdXNoIiwidG1wU2V0IiwiU2V0IiwiYWRkIiwiQXJyYXkiLCJmcm9tIiwiVG9kb1R4dFRhc2siLCJqUXVlcnkiLCJUb2RvVHh0QXR0cmlidXRlcyIsInByaW9yaXRpZXMiLCJyZXNldCIsIlRvZG9UeHRWYXVsdCIsInRhc2tzIiwiTWFwIiwiY29uZmlnIiwic2hvd0Nsb3NlZCIsImNhY2hlRXJyb3IiLCJwZXJzaXN0IiwiY2FjaGUiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImUiLCJhbGVydCIsImNvbnNvbGUiLCJlcnJvciIsImxvYWQiLCJwZXJzaXN0YW5jZSIsImdldEl0ZW0iLCJwYXJzZSIsImNsZWFyIiwidGFzayIsInNldCIsImluZm8iLCJhZGRUYXNrIiwiaGFzIiwiZGVsZXRlIiwicmVtb3ZlVGFzayIsInRhc2tJZCIsImZvdW5kIiwicmVtb3ZlQWxsVGFza3MiLCJnZXRUYXNrIiwiRXJyb3IiLCJnZXRBbGxUYXNrcyIsInRzIiwiZm9yRWFjaCIsImdldENvbmZpZyIsInNldENvbmZpZyIsImNmZyIsIl9jbGVhciIsInJlbW92ZUl0ZW0iLCIkIiwicmVhZHkiLCJUb2RvVHh0VmlldyIsImluaXRpYWxpemVFbGVtZW50cyIsInJlZnJlc2hVaSIsImdlbmVyYXRlVGFza0VsZW1lbnQiLCJpY29uIiwic3RhdHVzIiwiaHRtbFRleHQiLCJnZXRNYXJrdXBGb3JUYXNrIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImljb25TcGFuIiwiY2xhc3NMaXN0Iiwic3RhdHVzVG9nZ2xlU3BhbiIsIm9uY2xpY2siLCJ0b2dnbGVUYXNrU3RhdHVzIiwiYXBwZW5kQ2hpbGQiLCJkaXNwbGF5TW9kYWxCdXR0b24iLCJpbm5lckhUTUwiLCJkaXNwbGF5TW9kYWxGb3JUYXNrIiwiZ2VuZXJhdGVMaXN0RWxlbWVudCIsInNldEZpbHRlcnMiLCJvbm1vdXNlb3ZlciIsIm9ubW91c2VvdXQiLCJkaXNwbGF5VGFza3MiLCJmaWx0ZXIiLCJxdWVyeVNlbGVjdG9yIiwiZmlsdGVyZWRUYXNrcyIsIlRvZG9UeHQiLCJnZXRGaWx0ZXJlZFRhc2tBcnJheSIsImRpc3BsYXlUYXNrIiwiaXNOZXciLCJ1bmJpbmRDb250cm9sRXZlbnRzIiwibWFpbkV2ZW50SGFuZGxlcnMiLCJtb2RhbCIsImNsb3NlQnV0dG9uSWNvbiIsImF0dHIiLCJjbG9zZUJ1dHRvbiIsInR5cGUiLCJUb2RvVHh0UmVzb3VyY2VzIiwicmVtb3ZlTW9kYWwiLCJtb2RhbFRpdGxlIiwibW9kYWxIZWFkZXIiLCJtb2RhbFRleHRBcmVhIiwiY29udGVudEVkaXRhYmxlIiwibW9kYWxCb2R5Iiwic2F2ZUJ1dHRvbkxhYmVsIiwidHh0IiwiaW5uZXJUZXh0Iiwic2F2ZUJ1dHRvbkljb24iLCJzYXZlQnV0dG9uIiwic2F2ZU9yVXBkYXRlVGFza0Zyb21Nb2RhbCIsInByZXZpZXdCdXR0b25MYWJlbCIsInByZXZpZXdCdXR0b25JY29uIiwicHJldmlld0J1dHRvbiIsInVwZGF0ZU1vZGFsUHJldmlldyIsImRlbGV0ZUJ1dHRvbkxhYmVsIiwiZGVsZXRlQnV0dG9uSWNvbiIsImRlbGV0ZUJ1dHRvbiIsImhhbmRsZURlbGV0ZUNsaWNrIiwibW9kYWxGb290ZXJCdXR0b25Hcm91cCIsIm1vZGFsRm9vdGVyIiwibW9kYWxDb250ZW50IiwibW9kYWxEaWFsb2ciLCJ0YWJJbmRleCIsImdlbmVyYXRlTW9kYWxFbGVtZW50IiwiYm9keSIsImJpbmRDb250cm9sRXZlbnRzIiwibW9kYWxFdmVudEhhbmRsZXJzIiwic2hvdyIsImZvY3VzIiwiZWwiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsImRpc3BsYXlQcmlvcml0aWVzIiwicHJpTGlzdCIsImNsZWFyUHJpb3JpdGllcyIsImRpc3BsYXlQcm9qZWN0cyIsInByb2pMaXN0IiwicHJvaiIsImNsZWFyUHJvamVjdHMiLCJkaXNwbGF5Q29udGV4dHMiLCJjdHhMaXN0IiwiY3R4IiwiY2xlYXJDb250ZXh0cyIsImhhbmRsZXJzIiwiaGFuZGxlciIsInVzZUNhcHR1cmUiLCJ1YyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldiIsImZuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUFsdFMiLCJrZXlDb2RlIiwiYWx0S2V5IiwiZXhwb3J0VG9kb1R4dEZpbGUiLCJoYW5kbGVBbHRDIiwiaGFuZGxlQWx0VCIsImhhbmRsZURyb3AiLCJoYW5kbGVGaWxlU2VsZWN0IiwiaGFuZGxlQWx0RW50ZXIiLCJ0cmltIiwidXBkYXRlVGFzayIsImV4IiwiaGFuZGxlRXNjIiwiY29uZmlybSIsImZpbHRlclRpbWVvdXRJZCIsImhhbmRsZUZpbHRlciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJmaWx0ZXJEaXNwbGF5ZWRUYXNrcyIsImhhbmRsZUFsdFAiLCJzZXRTaG93Q2xvc2VkIiwiY2xlYXJUYXNrcyIsImNsZWFyRmlsdGVycyIsImZpbHRlclN0ciIsInRvZ2dsZVNob3dDbG9zZWRTdGF0dXMiLCJhY3RpdmUiLCJ0b2dnbGVQYW5lbCIsImhlYWRpbmciLCJzaG93UGFuZWwiLCJoaWRlUGFuZWwiLCJpbmRpY2F0b3IiLCJjbG9zZVRhc2siLCJhY3RpdmF0ZVRhc2siLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImZpbGVzIiwiZGF0YVRyYW5zZmVyIiwiZiIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWRlbmQiLCJwYXJzZVRvZG9UeHRGaWxlIiwidGFyZ2V0IiwicmVzdWx0IiwicmVhZEFzVGV4dCIsImhhbmRsZURyYWdPdmVyIiwiZHJvcEVmZmVjdCIsImdldFNvcnRlZFRhc2tBcnJheSIsInRhc2tBcnJheSIsImNvbnRlbnQiLCJqb2luIiwiZGF0YSIsImVuY29kZVVSSSIsIm9wZW4iLCJwcmlDbHMiLCJnZXREaXNwbGF5Q2xhc3NGb3JUYXNrIiwicHJvamVjdCIsInJlZ2V4IiwiUmVnRXhwIiwiZGF0ZSIsImNscyIsInJlbW92ZUNoaWxkIiwiZ2V0VG9kb1R4dEZpbGUiLCJmaWxlTmFtZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiYWpheCIsInVybCIsImpxWEhSIiwidGV4dFN0YXR1cyIsInN1Y2Nlc3MiLCJiYXNlRWxlbWVudHMiLCJjb250YWluZXIiLCJnZXRFbGVtZW50QnlJZCIsImNyZWF0ZVRhc2siLCJ0ZXh0U3RyIiwibmV3VGV4dCIsInVwZGF0ZUF0dHJpYnV0ZXMiLCJjb250ZXh0IiwiY29tcGFyZVRhc2tzIiwidGFza0EiLCJ0YXNrQiIsImFBY3RpdmUiLCJiQWN0aXZlIiwiYVByaSIsImJQcmkiLCJhQ3JlYXRlZCIsImJDcmVhdGVkIiwiYUNvbXBsZXRlZCIsImJDb21wbGV0ZWQiLCJzb3J0IiwiZmlsdGVycyIsInNwbGl0IiwiclN0ciIsInRvZG9UeHQiLCJhcHBlbmQiLCJsaW5lcyIsImxpbmUiLCJEYXRlIiwiVG9kb1RleHRQZXJzaXN0YW5jZSIsInJlY3MiLCJyZWdpc3RlciIsImxhbmdMb2NhbGUiLCJyZXNvdXJjZU9iaiIsInJlYyIsInZhbCIsIk9WRVJXUklURV9DT05GSVJNIiwiREVMRVRFX0NPTkZJUk0iLCJJTVBPUlQiLCJBRERfVEFTSyIsIkVYUE9SVCIsIlNIT1dfQ0xPU0VEIiwiRklMVEVSX1BMQUNFSE9MREVSX1RFWFQiLCJDTEVBUl9GSUxURVIiLCJQUklPUklUSUVTIiwiUFJPSkVDVFMiLCJDT05URVhUUyIsIkNMT1NFIiwiRURJVF9UQVNLX0hFQURFUiIsIkFERCIsIlVQREFURSIsIlBSRVZJRVciLCJERUxFVEUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixH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QUFJME4sRUFBWUMsSUFHTixFQUFBL1QsSUFBaEIsU0FBb0JVLEdBQ25CLElBQUlzVCxFQUFXSixFQUFLNVQsSUFBSSxFQUFBbUIsYUFBYVksZUFDaENpUyxJQUNKQSxFQUFNSixFQUFLNVQsSUFBSSxVQUVoQixJQUFJaVUsRUFBY0QsRUFBSXRULEdBQ3RCLElBQUt1VCxFQUNKLEtBQU0saUNBQWlDdlQsRUFFeEMsT0FBT3VULEdBaEJULENBQWNoSyxFQUFBLEVBQUFBLG1CQUFBLEVBQUFBLGlCQUFnQixLQW9COUJBLEVBQWlCNEosU0FBUyxRQUFTLENBQ2xDSyxrQkFBbUIsNEVBQ25CQyxlQUFnQix3Q0FDYkMsT0FBUSxTQUNSQyxTQUFVLFdBQ1ZDLE9BQVEsU0FDUkMsWUFBYSxjQUNiQyx3QkFBeUIsaUJBQ3pCQyxhQUFjLGVBQ2RDLFdBQVksYUFDWkMsU0FBVSxXQUNWQyxTQUFVLFdBQ1ZDLE1BQU8sUUFDUEMsaUJBQWtCLFlBQ2xCQyxJQUFLLE1BQ0xDLE9BQVEsU0FDUkMsUUFBUyxVQUNUQyxPQUFRIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqIFRoaXMgamF2YXNjcmlwdCB3YXMgY3JlYXRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb25zIGF0XHJcbiAqIGh0dHA6Ly90b2RvdHh0LmNvbS8gYW5kIGlzIGludGVuZGVkIHRvIGFsbG93IHVzZXJzIHRvIGFjY2VzcyB0aGVpclxyXG4gKiB0b2RvLnR4dCBmaWxlcyBpbiBhIHVzZXItZnJpZW5kbHkgYW5kIGVhc3kgdG8gdmlzdWFsaXplIG1hbm5lci5cclxuICpcclxuICogT25jZSBpbml0aWFsbHkgdXBsb2FkZWQsIHRoZSB0b2RvLnR4dCBmaWxlIHdpbGxcclxuICogYmUgbG9hZGVkIGludG8gYW4gSFRNTDUgbG9jYWxTdG9yYWdlIGFuZCBtYW5hZ2VkIGZyb20gdGhlcmUuXHJcbiAqIFRoZSB3ZWIgcGFnZSB0aGVuIGFsbG93cyBkb3dubG9hZGluZyBjaGFuZ2VzIGJhY2sgdG8gdGhlIHVzZXJcclxuICogaW4gYSB0eHQgZm9ybWF0IGNvbXBsaWFudCB3aXRoIHRoZSB0b2RvLnR4dCBzcGVjaWZpY2F0aW9ucywgYnV0XHJcbiAqIGhhdmluZyByZS1zb3J0ZWQgdGhlIHRhc2tzLlxyXG4gKiBcclxuICogQENyZWF0ZWQ6IDA4LzE0LzIwMTJcclxuICogQEF1dGhvcjogSmFzb24gSG9sdCBTbWl0aCAoYmljYXJib244QGdtYWlsLmNvbSlcclxuICogQFZlcnNpb246IDAuMC4xXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMiBKYXNvbiBIb2x0IFNtaXRoLiB0b2RvVHh0V2ViVWkgaXMgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRvZG9UeHRXZWJVaS5cclxuICogXHJcbiAqIHRvZG9UeHRXZWJVaSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XHJcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXHJcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXHJcbiAqIFxyXG4gKiB0b2RvVHh0V2ViVWkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKiBcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCB0b2RvVHh0V2ViVWkuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4vKipcclxuICogVXRpbGl0eSBtZXRob2RzIHVzZWQgYnkgdGhlIHByb2plY3QgbGlicmFyeVxyXG4gKiBAbmFtZXNwYWNlXHJcbiAqL1xyXG5leHBvcnQgbW9kdWxlIFRvZG9UeHRVdGlscyB7XHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHdpbGwgZm9ybWF0IGEgRGF0ZSBvYmplY3QgdG8gYSBzdHJpbmcgb2YgWVlZWS1NTS1ERFxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gZm9ybWF0dGVkIGRhdGVcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZU9iajogRGF0ZSk6IHN0cmluZyB7XHJcbiAgICAgICAgdmFyIHl5eXkgPSBkYXRlT2JqLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgdmFyIG1tID0gKGRhdGVPYmouZ2V0TW9udGgoKSsxKS50b1N0cmluZygpOyAvLyBnZXRNb250aCgpIGlzIHplcm8tYmFzZWRcclxuICAgICAgICBtbSA9IG1tLmxlbmd0aCA8IDIgPyBcIjBcIiArIG1tIDogbW07XHJcbiAgICAgICAgdmFyIGRkICA9IChkYXRlT2JqLmdldERhdGUoKSkudG9TdHJpbmcoKTtcclxuICAgICAgICBkZCA9IGRkLmxlbmd0aCA8IDIgPyBcIjBcIiArIGRkIDogZGQ7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZyh5eXl5ICsgXCItXCIgKyBtbSArIFwiLVwiICsgZGQpOyAvLyBMZWFkaW5nIHplcm9zIGZvciBtbSBhbmQgZGRcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHdpbGwgZ2V0IHRoZSBjdXJyZW50IGJyb3dzZXIgbGFuZ3VhZ2UtbG9jYWxlXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIElTTyBsYW5ndWFnZS1sb2NhbGUgZm9yIHRoZSBicm93c2VyXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRMYW5ndWFnZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHZhciBsYW5nTG9jYWxlID0gd2luZG93Lm5hdmlnYXRvcltcInVzZXJMYW5ndWFnZVwiXSB8fCB3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlO1xyXG4gICAgICAgIHJldHVybiBsYW5nTG9jYWxlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiBnZW5lcmF0ZXMgYSBHVUlEXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIEdVSUQgKE5OTk5OTk5OLU5OTk4tTk5OTi1OTk5OLU5OTk5OTk5OTk5OTilcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGd1aWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbihjKSB7XHJcbiAgICAgICAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMCwgdiA9IGMgPT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KTtcclxuICAgICAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gd2lsbCBzdHJpcCBvdXQgYW55IGNoYXJhY3RlcnMgZnJvbSB0aGUgcGFzc2VkIGluIHN0cmluZyB0aGF0IGFyZVxyXG4gICAgICogbm90IGNvbXBhdGlibGUgd2l0aCBodG1sIGFuZCByZXBsYWNlIHdpdGggaHRtbC1mcmllbmRseSB2ZXJzaW9uc1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIHRoZSBzdHJpbmcgdG8gYmUgaHRtbCBlbmNvZGVkXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIGh0bWwgZW5jb2RlZCB2ZXJzaW9uIG9mIHRoZSBzdHJpbmcgdGhhdCBjYW4gYmUgdXNlZCBzYWZlbHlcclxuICAgICAqIHdpdGhpbiBhIGh0bWwgcGFnZVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaHRtbEVuY29kZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZyhzdHIpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8mL2csICcmYW1wOycpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcclxuICAgICAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXHN7Mn0vZywgJyAmbmJzcDsnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHdpbGwgc3RyaXAgb3V0IGFueSBjaGFyYWN0ZXJzIGZyb20gdGhlIHBhc3NlZCBpbiBzdHJpbmcgdGhhdCBhcmVcclxuICAgICAqIGh0bWwgY2hhcmFjdGVyIGVudGl0aWVzIGFuZCByZXBsYWNlIHdpdGggc3RhbmRhcmQgc3RyaW5nIHZlcnNpb25zXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gdGhlIHN0cmluZyB0byBiZSBodG1sIHVuZW5jb2RlZFxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gYSB2ZXJzaW9uIG9mIHRoZSBzdHJpbmcgdGhhdCBjYW4gY29udGFpbnMgbm9uLWh0bWwtZnJpZW5kbHlcclxuICAgICAqIHN0cmluZ3NcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGh0bWxVbmVuY29kZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZyhzdHIpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8mYW1wOy9nLCAnJicpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8mbHQ7L2csICc8JylcclxuICAgICAgICAgICAgLnJlcGxhY2UoLyZndDsvZywgJz4nKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvJnF1b3Q7L2csICdcIicpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8mbmJzcDsvZywgJyAnKTtcclxuICAgIH1cclxufSIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqIFRoaXMgamF2YXNjcmlwdCB3YXMgY3JlYXRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb25zIGF0XHJcbiAqIGh0dHA6Ly90b2RvdHh0LmNvbS8gYW5kIGlzIGludGVuZGVkIHRvIGFsbG93IHVzZXJzIHRvIGFjY2VzcyB0aGVpclxyXG4gKiB0b2RvLnR4dCBmaWxlcyBpbiBhIHVzZXItZnJpZW5kbHkgYW5kIGVhc3kgdG8gdmlzdWFsaXplIG1hbm5lci5cclxuICpcclxuICogT25jZSBpbml0aWFsbHkgdXBsb2FkZWQsIHRoZSB0b2RvLnR4dCBmaWxlIHdpbGxcclxuICogYmUgbG9hZGVkIGludG8gYW4gSFRNTDUgbG9jYWxTdG9yYWdlIGFuZCBtYW5hZ2VkIGZyb20gdGhlcmUuXHJcbiAqIFRoZSB3ZWIgcGFnZSB0aGVuIGFsbG93cyBkb3dubG9hZGluZyBjaGFuZ2VzIGJhY2sgdG8gdGhlIHVzZXJcclxuICogaW4gYSB0eHQgZm9ybWF0IGNvbXBsaWFudCB3aXRoIHRoZSB0b2RvLnR4dCBzcGVjaWZpY2F0aW9ucywgYnV0XHJcbiAqIGhhdmluZyByZS1zb3J0ZWQgdGhlIHRhc2tzLlxyXG4gKiBcclxuICogQENyZWF0ZWQ6IDA4LzE0LzIwMTJcclxuICogQEF1dGhvcjogSmFzb24gSG9sdCBTbWl0aCAoYmljYXJib244QGdtYWlsLmNvbSlcclxuICogQFZlcnNpb246IDAuMC4xXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMiBKYXNvbiBIb2x0IFNtaXRoLiB0b2RvVHh0V2ViVWkgaXMgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRvZG9UeHRXZWJVaS5cclxuICogXHJcbiAqIHRvZG9UeHRXZWJVaSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XHJcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXHJcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXHJcbiAqIFxyXG4gKiB0b2RvVHh0V2ViVWkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKiBcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCB0b2RvVHh0V2ViVWkuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5pbXBvcnQgeyBUb2RvVHh0VXRpbHMgfSBmcm9tIFwiLi4vaGVscGVycy90b2RvLXR4dC11dGlsc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRvZG9UeHRUYXNrIHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBwcmlvcml0eTogc3RyaW5nO1xyXG4gICAgY3JlYXRlZERhdGU6IHN0cmluZztcclxuICAgIGNvbXBsZXRlZERhdGU6IHN0cmluZztcclxuICAgIHByb2plY3RzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgY29udGV4dHM6IHN0cmluZ1tdID0gW107XHJcbiAgICBtZXRhZGF0YXM6IHN0cmluZ1tdID0gW107XHJcbiAgICBpc0FjdGl2ZTogYm9vbGVhbjtcclxuICAgIHRleHQ6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0Pzogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IFRvZG9UeHRVdGlscy5ndWlkKCk7XHJcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5wYXJzZUlucHV0KHRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlSW5wdXQoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGlmIChpbnB1dCkge1xyXG4gICAgICAgICAgICB0aGlzLnRleHQgPSBpbnB1dDtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZVN0YXR1cygpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcnNlUHJpb3JpdHkoKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZUNvbXBsZXRlZERhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZUNyZWF0ZWREYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VQcm9qZWN0cygpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcnNlQ29udGV4dHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZVN0YXR1cygpOiB2b2lkIHtcclxuICAgICAgICAvLyBjaGVjayBmb3Igc3RyaW5ncyBzdGFydGluZyB3aXRoIHNvbWV0aGluZyBsaWtlIFwieCBcIlxyXG4gICAgICAgIGxldCBtYXRjaDogUmVnRXhwTWF0Y2hBcnJheSA9IHRoaXMudGV4dC5tYXRjaCgvXih4ICkvKTtcclxuICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VQcmlvcml0eSgpOiB2b2lkIHtcclxuICAgICAgICBsZXQgcHJpOiBzdHJpbmcgPSBudWxsOyAvLyB1c2VkIHRvIGhvbGQgdGhlIHByaW9yaXR5IGlmIHNldFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHBhcnNlIG91dCB0aGUgcHJpb3JpdHkgUmVnRXg6IC9cXF4oW0EtWl1cXCkuKi8gXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIHN0cmluZ3Mgc3RhcnRpbmcgd2l0aCBzb21ldGhpbmcgbGlrZSBcIihBKSBcIlxyXG4gICAgICAgIGxldCBwcmlQYXR0ZXJuOiBSZWdFeHAgPSAvXihcXChbQS1aXVxcKVtcXHNdKykvO1xyXG4gICAgICAgIHZhciBtYXRjaCA9IHRoaXMudGV4dC5tYXRjaChwcmlQYXR0ZXJuKTsgLy8gcmV0dXJucyBudWxsIGlmIG5vdCBmb3VuZFxyXG4gICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICAvLyBmb3VuZCBhbiBhY3RpdmUgbWF0Y2ggc28gZ2V0IHRoZSBwcmlvcml0eVxyXG4gICAgICAgICAgICBwcmkgPSBtYXRjaFswXS5yZXBsYWNlKC9bXFxzXSovZywgXCJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZUNvbXBsZXRlZERhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdmFyIGNvbXBsZXRlZCA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcGFyc2Ugb3V0IHRoZSBjb21wbGV0ZWREYXRlIGlmIGNsb3NlZCAoc3RhcnRzIHdpdGggXCJ4IFwiKVxyXG4gICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xyXG4gICAgICAgICAgICBsZXQgZGF0ZXM6IHN0cmluZ1tdID0gdGhpcy5nZXREYXRlc0Zyb21UZXh0KCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlcykge1xyXG4gICAgICAgICAgICAgICAgY29tcGxldGVkID0gZGF0ZXNbMF0gPyBkYXRlc1swXS5yZXBsYWNlKC9bXFxzXSovZywgXCJcIikgOiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY29tcGxldGVkRGF0ZSA9IGNvbXBsZXRlZDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlQ3JlYXRlZERhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdmFyIGNyZWF0ZWQgPSBudWxsO1xyXG4gICAgICAgIC8vIHBhcnNlIG91dCB0aGUgY3JlYXRlZERhdGUgKHdpbGwgYmUgMm5kIGlmIGl0ZW0gaXMgY2xvc2VkKVxyXG4gICAgICAgIGxldCBkYXRlczogc3RyaW5nW10gPSB0aGlzLmdldERhdGVzRnJvbVRleHQoKTtcclxuICAgICAgICBpZiAoZGF0ZXMpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZXMubGVuZ3RoID4gMSkgeyAvLyB3ZSBoYXZlIGNyZWF0ZWQgYW5kIGNvbXBsZXRlZFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQgPSBkYXRlc1sxXSA/IGRhdGVzWzFdLnJlcGxhY2UoL1tcXHNdKi9nLCBcIlwiKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkID0gZGF0ZXNbMF0gPyBkYXRlc1swXS5yZXBsYWNlKC9bXFxzXSovZywgXCJcIikgOiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlZERhdGUgPSBjcmVhdGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGF0ZXNGcm9tVGV4dCgpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgdmFyIGRhdGVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBzdHJpbmdzIHdpdGggc29tZXRoaW5nIGxpa2UgXCIyMDEyLTA4LTA5XCJcclxuICAgICAgICBsZXQgZGF0ZVBhdHRlcm46IFJlZ0V4cCA9IC8oPzpcXHN8XikoXFxkezR9LVxcZHsyfS1cXGR7Mn0pKD89XFxzKS9nO1xyXG4gICAgICAgIGxldCBtYXRjaDogUmVnRXhwTWF0Y2hBcnJheSA9IHRoaXMudGV4dC5tYXRjaChkYXRlUGF0dGVybik7IC8vIHJldHVybnMgbnVsbCBpZiBub3QgZm91bmRcclxuICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPG1hdGNoLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlcy5wdXNoKG1hdGNoW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZGF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZVByb2plY3RzKCk6IHZvaWQge1xyXG4gICAgICAgIHZhciB0bXBTZXQ6IFNldDxzdHJpbmc+ID0gbmV3IFNldDxzdHJpbmc+KCk7IC8vIHVzZWQgdG8gaG9sZCB0aGUgcHJvamVjdCBpZiBzZXRcclxuICAgICAgICBcclxuICAgICAgICAvLyBwYXJzZSBvdXQgdGhlIHByb2plY3RzIFJlZ0V4OiAvXFwrWzAtOUEtWmEtel0rXFxzLyAod29yZHMgc3RhcnRpbmcgd2l0aCBcIitcIilcclxuICAgICAgICAvLyBjaGVjayBmb3Igc3RyaW5ncyBsaWtlIFwiK0FCQzEyM1wiXHJcbiAgICAgICAgdmFyIHByb2pQYXR0ZXJuID0gLygoXFxzfF4pW1xcKFxce1xcW1wiJ10/XFwrWzAtOUEtWmEtel0rW1xcKVxcfVxcXVwiJ10/KD89XFxzfCQpKS9nO1xyXG4gICAgICAgIHZhciBtYXRjaCA9IHRoaXMudGV4dC5tYXRjaChwcm9qUGF0dGVybik7IC8vIHJldHVybnMgbnVsbCBpZiBub3QgZm91bmRcclxuICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgLy8gb25seSBzdG9yZSBvbmUgaW5zdGFuY2Ugb2YgZHVwbGljYXRlIHByb2plY3QgZW50cmllc1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8bWF0Y2gubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gbWF0Y2hbaV0ucmVwbGFjZSgvW1xcc10qL2csIFwiXCIpLnJlcGxhY2UoL1tcXChcXHtcXFtcXClcXH1cXF1cIiddL2csIFwiXCIpOztcclxuICAgICAgICAgICAgICAgIHRtcFNldC5hZGQocCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5wcm9qZWN0cyA9IEFycmF5LmZyb20odG1wU2V0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlQ29udGV4dHMoKTogdm9pZCB7XHJcbiAgICAgICAgdmFyIHRtcFNldDogU2V0PHN0cmluZz4gPSBuZXcgU2V0PHN0cmluZz4oKTsgLy8gdXNlZCB0byBob2xkIHRoZSBjb250ZXh0IGlmIHNldFxyXG4gICAgXHJcbiAgICAgICAgLy8gcGFyc2Ugb3V0IHRoZSBjb250ZXh0cyBSZWdFeDogL1xcQFswLTlBLVphLXpdK1xccy8gKHdvcmRzIHN0YXJ0aW5nIHdpdGggXCIrXCIpXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIHN0cmluZ3MgbGlrZSBcIkBBQkMxMjNcIlxyXG4gICAgICAgIHZhciBjdHhQYXR0ZXJuID0gLygoXFxzfF4pW1xcKFxce1xcW1wiJ10/XFxAWzAtOUEtWmEtel0rW1xcKVxcfVxcXVwiJ10/KD89XFxzfCQpKS9nO1xyXG4gICAgICAgIHZhciBtYXRjaCA9IHRoaXMudGV4dC5tYXRjaChjdHhQYXR0ZXJuKTsgLy8gcmV0dXJucyBudWxsIGlmIG5vdCBmb3VuZFxyXG4gICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICAvLyBvbmx5IHN0b3JlIG9uZSBpbnN0YW5jZSBvZiBkdXBsaWNhdGUgcHJvamVjdCBlbnRyaWVzXHJcbiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxtYXRjaC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBtYXRjaFtpXS5yZXBsYWNlKC9bXFxzXSovZywgXCJcIikucmVwbGFjZSgvW1xcKFxce1xcW1xcKVxcfVxcXVwiJ10vZywgXCJcIik7O1xyXG4gICAgICAgICAgICAgICAgdG1wU2V0LmFkZChjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHRoaXMuY29udGV4dHMgPSBBcnJheS5mcm9tKHRtcFNldCk7XHJcbiAgICB9XHJcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGpRdWVyeTsiLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBUaGlzIGphdmFzY3JpcHQgd2FzIGNyZWF0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9ucyBhdFxyXG4gKiBodHRwOi8vdG9kb3R4dC5jb20vIGFuZCBpcyBpbnRlbmRlZCB0byBhbGxvdyB1c2VycyB0byBhY2Nlc3MgdGhlaXJcclxuICogdG9kby50eHQgZmlsZXMgaW4gYSB1c2VyLWZyaWVuZGx5IGFuZCBlYXN5IHRvIHZpc3VhbGl6ZSBtYW5uZXIuXHJcbiAqXHJcbiAqIE9uY2UgaW5pdGlhbGx5IHVwbG9hZGVkLCB0aGUgdG9kby50eHQgZmlsZSB3aWxsXHJcbiAqIGJlIGxvYWRlZCBpbnRvIGFuIEhUTUw1IGxvY2FsU3RvcmFnZSBhbmQgbWFuYWdlZCBmcm9tIHRoZXJlLlxyXG4gKiBUaGUgd2ViIHBhZ2UgdGhlbiBhbGxvd3MgZG93bmxvYWRpbmcgY2hhbmdlcyBiYWNrIHRvIHRoZSB1c2VyXHJcbiAqIGluIGEgdHh0IGZvcm1hdCBjb21wbGlhbnQgd2l0aCB0aGUgdG9kby50eHQgc3BlY2lmaWNhdGlvbnMsIGJ1dFxyXG4gKiBoYXZpbmcgcmUtc29ydGVkIHRoZSB0YXNrcy5cclxuICogXHJcbiAqIEBDcmVhdGVkOiAwOC8xNC8yMDEyXHJcbiAqIEBBdXRob3I6IEphc29uIEhvbHQgU21pdGggKGJpY2FyYm9uOEBnbWFpbC5jb20pXHJcbiAqIEBWZXJzaW9uOiAwLjAuMVxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgSmFzb24gSG9sdCBTbWl0aC4gdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiB0b2RvVHh0V2ViVWkuXHJcbiAqIFxyXG4gKiB0b2RvVHh0V2ViVWkgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxyXG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxyXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxyXG4gKiBcclxuICogdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICogXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggdG9kb1R4dFdlYlVpLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuZXhwb3J0IG1vZHVsZSBUb2RvVHh0QXR0cmlidXRlcyB7XHJcbiAgICBleHBvcnQgdmFyIHByaW9yaXRpZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgICBleHBvcnQgdmFyIHByb2plY3RzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgZXhwb3J0IHZhciBjb250ZXh0czogU2V0PHN0cmluZz4gPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVzZXQoKTogdm9pZCB7XHJcbiAgICAgICAgcHJpb3JpdGllcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgICAgIHByb2plY3RzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgICAgICAgY29udGV4dHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgIH1cclxufSIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqIFRoaXMgamF2YXNjcmlwdCB3YXMgY3JlYXRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb25zIGF0XHJcbiAqIGh0dHA6Ly90b2RvdHh0LmNvbS8gYW5kIGlzIGludGVuZGVkIHRvIGFsbG93IHVzZXJzIHRvIGFjY2VzcyB0aGVpclxyXG4gKiB0b2RvLnR4dCBmaWxlcyBpbiBhIHVzZXItZnJpZW5kbHkgYW5kIGVhc3kgdG8gdmlzdWFsaXplIG1hbm5lci5cclxuICpcclxuICogT25jZSBpbml0aWFsbHkgdXBsb2FkZWQsIHRoZSB0b2RvLnR4dCBmaWxlIHdpbGxcclxuICogYmUgbG9hZGVkIGludG8gYW4gSFRNTDUgbG9jYWxTdG9yYWdlIGFuZCBtYW5hZ2VkIGZyb20gdGhlcmUuXHJcbiAqIFRoZSB3ZWIgcGFnZSB0aGVuIGFsbG93cyBkb3dubG9hZGluZyBjaGFuZ2VzIGJhY2sgdG8gdGhlIHVzZXJcclxuICogaW4gYSB0eHQgZm9ybWF0IGNvbXBsaWFudCB3aXRoIHRoZSB0b2RvLnR4dCBzcGVjaWZpY2F0aW9ucywgYnV0XHJcbiAqIGhhdmluZyByZS1zb3J0ZWQgdGhlIHRhc2tzLlxyXG4gKiBcclxuICogQENyZWF0ZWQ6IDA4LzE0LzIwMTJcclxuICogQEF1dGhvcjogSmFzb24gSG9sdCBTbWl0aCAoYmljYXJib244QGdtYWlsLmNvbSlcclxuICogQFZlcnNpb246IDAuMC4xXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMiBKYXNvbiBIb2x0IFNtaXRoLiB0b2RvVHh0V2ViVWkgaXMgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRvZG9UeHRXZWJVaS5cclxuICogXHJcbiAqIHRvZG9UeHRXZWJVaSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XHJcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXHJcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXHJcbiAqIFxyXG4gKiB0b2RvVHh0V2ViVWkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKiBcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCB0b2RvVHh0V2ViVWkuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5pbXBvcnQgeyBUb2RvVHh0VGFzayB9IGZyb20gXCIuLi90YXNrcy90b2RvLXR4dC10YXNrXCI7XHJcbmltcG9ydCB7IFRvZG9UeHRDb25maWcgfSBmcm9tIFwiLi90b2RvLXR4dC1jb25maWdcIjtcclxuaW1wb3J0IHsgVG9kb1RleHRQZXJzaXN0YW5jZSBhcyBUb2RvVGV4dENhY2hlIH0gZnJvbSBcIi4vdG9kby10eHQtY2FjaGVcIjtcclxuXHJcbmV4cG9ydCBtb2R1bGUgVG9kb1R4dFZhdWx0IHtcclxuICAgIHZhciB0YXNrczogTWFwPHN0cmluZywgVG9kb1R4dFRhc2s+ID0gbmV3IE1hcDxzdHJpbmcsIFRvZG9UeHRUYXNrPigpO1xyXG4gICAgdmFyIGNvbmZpZzogVG9kb1R4dENvbmZpZyA9IHsgc2hvd0Nsb3NlZDogZmFsc2UgfTtcclxuICAgIHZhciBjYWNoZUVycm9yOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBhZGRUYXNrKHRhc2s6IFRvZG9UeHRUYXNrKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRhc2tzLmhhcyh0YXNrLmlkKSkge1xyXG4gICAgICAgICAgICB0YXNrcy5kZWxldGUodGFzay5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhc2tzLnNldCh0YXNrLmlkLCB0YXNrKTtcclxuXHJcbiAgICAgICAgcGVyc2lzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiByZW1vdmVUYXNrKHRhc2tJZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IGZvdW5kOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRhc2tzLmhhcyh0YXNrSWQpKSB7XHJcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZSh0YXNrSWQpO1xyXG4gICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwZXJzaXN0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlQWxsVGFza3MoKTogdm9pZCB7XHJcbiAgICAgICAgdGFza3MgPSBuZXcgTWFwPHN0cmluZywgVG9kb1R4dFRhc2s+KCk7XHJcblxyXG4gICAgICAgIHBlcnNpc3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0VGFzayh0YXNrSWQ6IHN0cmluZyk6IFRvZG9UeHRUYXNrIHtcclxuICAgICAgICBsb2FkKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRhc2tzLmhhcyh0YXNrSWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YXNrcy5nZXQodGFza0lkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBubyBUb2RvVHh0VGFzayB3aXRoIElEIG9mICcke3Rhc2tJZH0nIGNvdWxkIGJlIGZvdW5kYCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldEFsbFRhc2tzKCk6IFRvZG9UeHRUYXNrW10ge1xyXG4gICAgICAgIGxvYWQoKTtcclxuXHJcbiAgICAgICAgbGV0IHRzOiBUb2RvVHh0VGFza1tdID0gW107XHJcbiAgICAgICAgdGFza3MuZm9yRWFjaCgodmFsdWU6IFRvZG9UeHRUYXNrKSA9PiB7XHJcbiAgICAgICAgICAgIHRzLnB1c2godmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0cztcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnKCk6IFRvZG9UeHRDb25maWcge1xyXG4gICAgICAgIGxvYWQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0Q29uZmlnKGNmZzogVG9kb1R4dENvbmZpZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbmZpZyA9IGNmZztcclxuXHJcbiAgICAgICAgcGVyc2lzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBlcnNpc3QoKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IGNhY2hlOiBUb2RvVGV4dENhY2hlID0gbmV3IFRvZG9UZXh0Q2FjaGUodGFza3MsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvLXR4dCcsIEpTT04uc3RyaW5naWZ5KGNhY2hlKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVFcnJvciA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBtb3ZlIHRoaXMgdG8gVG9kb1R4dFZpZXcgYW5kIHByZXNlbnQgYXMgTW9kYWwgb24gc3RhcnR1cFxyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1dBUk5JTkc6IHVuYWJsZSB0byBzdG9yZSBUYXNrcyBpbiBsb2NhbFN0b3JhZ2U7IGVuc3VyZSB5b3UgZXhwb3J0IHlvdXIgdGFza3MgYmVmb3JlIHlvdSBjbG9zZSB0aGUgYnJvd3NlciBvciB0aGV5IHdpbGwgYmUgbG9zdCEnKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFRvZG9UeHQgdW5hYmxlIHRvIGNhY2hlIGRhdGEgaW4gbG9jYWxTdG9yYWdlIGR1ZSB0bzogJHtlfWApO1xyXG4gICAgICAgICAgICAgICAgY2FjaGVFcnJvcisrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxvYWQoKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHBlcnNpc3RhbmNlOiBzdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9kby10eHQnKTtcclxuICAgICAgICAgICAgaWYgKHBlcnNpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2FjaGU6IFRvZG9UZXh0Q2FjaGUgPSBKU09OLnBhcnNlKHBlcnNpc3RhbmNlKSBhcyBUb2RvVGV4dENhY2hlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlLnRhc2tzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFza3MuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8Y2FjaGUudGFza3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBjYWNoZS50YXNrc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRbJ3RleHQnXSAmJiB0WydpZCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFzazogVG9kb1R4dFRhc2sgPSBuZXcgVG9kb1R4dFRhc2sodC50ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suaWQgPSB0LmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFza3Muc2V0KHRhc2suaWQsIHRhc2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNhY2hlLmNvbmZpZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGNhY2hlRXJyb3IgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKGBUb2RvVHh0IHVuYWJsZSB0byBsb2FkIGNhY2hlIGZyb20gbG9jYWxTdG9yYWdlIGR1ZSB0bzogJHtlfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV0FSTklORyEhIHJlbW92ZXMgYWxsIGNhY2hlZCBkYXRhIGluY2x1ZGluZyB0YXNrcyBhbmQgY29uZmlndXJhdGlvbi5cclxuICAgICAqIG9ubHkgdG8gYmUgdXNlZCBhZnRlciB5b3UndmUgZXhwb3J0ZWQgeW91ciB0YXNrcyB0byBhIGZpbGVcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIF9jbGVhcigpOiB2b2lkIHtcclxuICAgICAgICB0YXNrcyA9IG5ldyBNYXA8c3RyaW5nLCBUb2RvVHh0VGFzaz4oKTtcclxuICAgICAgICBjb25maWcgPSB7c2hvd0Nsb3NlZDogZmFsc2V9O1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2RvLXR4dCcpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0ICogYXMgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgeyBUb2RvVHh0VmlldyB9IGZyb20gJy4vc3JjL3VpL3RvZG8tdHh0LXZpZXcnO1xyXG5cclxuJCgnZG9jdW1lbnQnKS5yZWFkeSgoKSA9PiB7XHJcbiAgICBUb2RvVHh0Vmlldy5pbml0aWFsaXplRWxlbWVudHMoKTtcclxuICAgIFRvZG9UeHRWaWV3LnJlZnJlc2hVaSgpO1xyXG59KTsiLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBUaGlzIGphdmFzY3JpcHQgd2FzIGNyZWF0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9ucyBhdFxyXG4gKiBodHRwOi8vdG9kb3R4dC5jb20vIGFuZCBpcyBpbnRlbmRlZCB0byBhbGxvdyB1c2VycyB0byBhY2Nlc3MgdGhlaXJcclxuICogdG9kby50eHQgZmlsZXMgaW4gYSB1c2VyLWZyaWVuZGx5IGFuZCBlYXN5IHRvIHZpc3VhbGl6ZSBtYW5uZXIuXHJcbiAqXHJcbiAqIE9uY2UgaW5pdGlhbGx5IHVwbG9hZGVkLCB0aGUgdG9kby50eHQgZmlsZSB3aWxsXHJcbiAqIGJlIGxvYWRlZCBpbnRvIGFuIEhUTUw1IGxvY2FsU3RvcmFnZSBhbmQgbWFuYWdlZCBmcm9tIHRoZXJlLlxyXG4gKiBUaGUgd2ViIHBhZ2UgdGhlbiBhbGxvd3MgZG93bmxvYWRpbmcgY2hhbmdlcyBiYWNrIHRvIHRoZSB1c2VyXHJcbiAqIGluIGEgdHh0IGZvcm1hdCBjb21wbGlhbnQgd2l0aCB0aGUgdG9kby50eHQgc3BlY2lmaWNhdGlvbnMsIGJ1dFxyXG4gKiBoYXZpbmcgcmUtc29ydGVkIHRoZSB0YXNrcy5cclxuICogXHJcbiAqIEBDcmVhdGVkOiAwOC8xNC8yMDEyXHJcbiAqIEBBdXRob3I6IEphc29uIEhvbHQgU21pdGggKGJpY2FyYm9uOEBnbWFpbC5jb20pXHJcbiAqIEBWZXJzaW9uOiAwLjAuMVxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgSmFzb24gSG9sdCBTbWl0aC4gdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiB0b2RvVHh0V2ViVWkuXHJcbiAqIFxyXG4gKiB0b2RvVHh0V2ViVWkgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxyXG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxyXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxyXG4gKiBcclxuICogdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICogXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggdG9kb1R4dFdlYlVpLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuaW1wb3J0IHsgVG9kb1R4dFRhc2sgfSBmcm9tIFwiLi4vdGFza3MvdG9kby10eHQtdGFza1wiO1xyXG5pbXBvcnQgeyBUb2RvVHh0IH0gZnJvbSAnLi4vdG9kby10eHQnO1xyXG5pbXBvcnQgKiBhcyAkIGZyb20gJ2pxdWVyeSc7XHJcbmltcG9ydCB7IFRvZG9UeHRSZXNvdXJjZXMgfSBmcm9tIFwiLi90b2RvLXR4dC1yZXNvdXJjZXNcIjtcclxuaW1wb3J0IHsgVG9kb1R4dFV0aWxzIH0gZnJvbSBcIi4uL2hlbHBlcnMvdG9kby10eHQtdXRpbHNcIjtcclxuaW1wb3J0IHsgRmlsZURyb3BFdmVudCB9IGZyb20gXCIuLi9oZWxwZXJzL2ZpbGUtZHJvcC1ldmVudFwiO1xyXG5pbXBvcnQgeyBUb2RvVHh0QXR0cmlidXRlcyB9IGZyb20gXCIuLi90YXNrcy90b2RvLXR4dC1hdHRyaWJ1dGVzXCI7XHJcbmltcG9ydCB7IFRvZG9UeHRWYXVsdCB9IGZyb20gXCIuLi9zdG9yYWdlL3RvZG8tdHh0LXZhdWx0XCI7XHJcblxyXG5leHBvcnQgbW9kdWxlIFRvZG9UeHRWaWV3IHtcclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gZ2VuZXJhdGVzIHRoZSBET00gZWxlbWVudCBmb3IgdGhlIHBhc3NlZCBpbiB0YXNrXHJcbiAgICAgKiBAcGFyYW0ge1RvZG9UeHRUYXNrfSB0YXNrIC0gdGhlIHRhc2sgb2JqZWN0IHRvIGJlIGNvbnZlcnRlZCB0byBIVE1MRGl2RWxlbWVudFxyXG4gICAgICogQHJldHVybnMgYSB7SFRNTERpdkVsZW1lbnR9IGZyb20gdGhlIHBhc3NlZCBpbiB7VGFza31cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVGFza0VsZW1lbnQodGFzazogVG9kb1R4dFRhc2spOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICAgICAgdmFyIGljb24gPSBcImdseXBoaWNvbi1va1wiO1xyXG4gICAgICAgIHZhciBzdGF0dXMgPSBcImJ0bi1kZWZhdWx0XCI7XHJcbiAgICAgICAgdmFyIGh0bWxUZXh0ID0gZ2V0TWFya3VwRm9yVGFzayh0YXNrKTtcclxuICAgICAgICBpZiAoIXRhc2suaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgaWNvbiA9IFwiZ2x5cGhpY29uLXJlbW92ZVwiO1xyXG4gICAgICAgICAgICBzdGF0dXMgPSBcImJ0bi1kYW5nZXJcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRhc2sgZWxlbWVudFxyXG4gICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwiYnRuLWdyb3VwIGJ0bi1ibG9ja1wiO1xyXG4gICAgICAgIGVsZW1lbnQuaWQgPSB0YXNrLmlkO1xyXG5cclxuICAgICAgICAvLyBDbG9zZSBUYXNrIEJ1dHRvbiBJY29uXHJcbiAgICAgICAgbGV0IGljb25TcGFuOiBIVE1MU3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgaWNvblNwYW4uY2xhc3NMaXN0LmFkZCgnZ2x5cGhpY29uJyk7XHJcbiAgICAgICAgaWNvblNwYW4uY2xhc3NMaXN0LmFkZChpY29uKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDbG9zZSBUYXNrIEJ1dHRvbiBJY29uIGNvbnRhaW5lclxyXG4gICAgICAgIGxldCBzdGF0dXNUb2dnbGVTcGFuOiBIVE1MU3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgc3RhdHVzVG9nZ2xlU3Bhbi5jbGFzc0xpc3QuYWRkKCdjb2wteHMtMicpO1xyXG4gICAgICAgIHN0YXR1c1RvZ2dsZVNwYW4uY2xhc3NMaXN0LmFkZCgnYnRuJyk7XHJcbiAgICAgICAgc3RhdHVzVG9nZ2xlU3Bhbi5jbGFzc0xpc3QuYWRkKCdidG4tbGcnKTtcclxuICAgICAgICBzdGF0dXNUb2dnbGVTcGFuLmNsYXNzTGlzdC5hZGQoc3RhdHVzKTtcclxuICAgICAgICBzdGF0dXNUb2dnbGVTcGFuLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0b2dnbGVUYXNrU3RhdHVzKHRhc2suaWQpO1xyXG4gICAgICAgICAgICByZWZyZXNoVWkoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RhdHVzVG9nZ2xlU3Bhbi5hcHBlbmRDaGlsZChpY29uU3Bhbik7XHJcblxyXG4gICAgICAgIC8vIGFkZCBDbG9zZSBUYXNrIEJ1dHRvbiB0byBUYXNrIGVsZW1lbnRcclxuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHN0YXR1c1RvZ2dsZVNwYW4pO1xyXG5cclxuICAgICAgICAvLyBUYXNrIHRleHQgZGlzcGxheSBjb250YWluZXJcclxuICAgICAgICBsZXQgZGlzcGxheU1vZGFsQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGRpc3BsYXlNb2RhbEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjb2wteHMtMTAnKTtcclxuICAgICAgICBkaXNwbGF5TW9kYWxCdXR0b24uY2xhc3NMaXN0LmFkZCgnZWxsaXBzaXMnKTtcclxuICAgICAgICBkaXNwbGF5TW9kYWxCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJyk7XHJcbiAgICAgICAgZGlzcGxheU1vZGFsQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bi1sZycpO1xyXG4gICAgICAgIGRpc3BsYXlNb2RhbEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHN0YXR1cyk7XHJcbiAgICAgICAgZGlzcGxheU1vZGFsQnV0dG9uLmlubmVySFRNTCA9IGh0bWxUZXh0O1xyXG4gICAgICAgIGRpc3BsYXlNb2RhbEJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IGRpc3BsYXlNb2RhbEZvclRhc2sodGFzay5pZCk7XHJcblxyXG4gICAgICAgIC8vIGFkZCBUYXNrIHRleHQgY29udGFpbmVyIHRvIFRhc2sgZWxlbWVudFxyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZGlzcGxheU1vZGFsQnV0dG9uKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVMaXN0RWxlbWVudCh0ZXh0OiBzdHJpbmcpOiBIVE1MTElFbGVtZW50IHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICBlbGVtZW50LmlkID0gdGV4dDtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwibGlzdC1ncm91cC1pdGVtXCI7XHJcbiAgICAgICAgZWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgc2V0RmlsdGVycyh0ZXh0KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGVsZW1lbnQub25tb3VzZW92ZXIgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSArPSBcIiBhY3RpdmVcIjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGVsZW1lbnQub25tb3VzZW91dCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZSgvKCggfF4pYWN0aXZlKS8sIFwiXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAnPGg0IGNsYXNzPVwiZWxsaXBzaXNcIj4nICsgdGV4dCArICc8L2g0Pic7XHJcblxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gd2lsbCBhdHRlbXB0IHRvIGdldCBhbGwgdGFza3MgYW5kIGRpc3BsYXkgdGhlbVxyXG4gICAgICogaW4gdGhlIERPTSBpZiBhbnkgZXhpc3QuICBUaGlzIHdpbGwgYWRkIHRvIGFueSBleGlzdGluZyB0YXNrcyBzbyB5b3VcclxuICAgICAqIHdpbGwgbmVlZCB0byBjbGVhciB0aGUgRE9NIGZpcnN0IGlmIHlvdSB3YW50IHRvIHVwZGF0ZSB0aGUgZW50aXJlIGxpc3RcclxuICAgICAqIGluc3RlYWQgb2YganVzdCBhcHBlbmRpbmcgdG8gdGhlIGxpc3QuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5VGFza3MoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gZ2V0IHRoZSBsaXN0IG9mIHNlbGVjdGVkIHByaW9yaXRpZXMgZnJvbSB0aGUgZmlsdGVyXHJcbiAgICAgICAgbGV0IGZpbHRlcjogc3RyaW5nID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZmlsdGVyLWlucHV0XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG5cclxuICAgICAgICAvLyBmaWx0ZXIgbGlzdCBieSB0aG9zZSBtYXRjaGluZyBzZWxlY3RlZCBmaWx0ZXJzXHJcbiAgICAgICAgbGV0IGZpbHRlcmVkVGFza3M6IFRvZG9UeHRUYXNrW10gPSBUb2RvVHh0LmdldEZpbHRlcmVkVGFza0FycmF5KGZpbHRlcik7XHJcblxyXG4gICAgICAgIGxldCBoaWRlQ2xvc2VkOiBib29sZWFuID0gIVRvZG9UeHRWYXVsdC5nZXRDb25maWcoKS5zaG93Q2xvc2VkO1xyXG4gICAgICAgIGlmIChoaWRlQ2xvc2VkKSB7XHJcbiAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgY2xvc2VkIHRhc2tzIHNvIHRoZXkgYXJlbid0IGluIERPTVxyXG4gICAgICAgICAgICBsZXQgdGFza3M6IFRvZG9UeHRUYXNrW10gPSBmaWx0ZXJlZFRhc2tzLmZpbHRlcigodCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuaXNBY3RpdmU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmaWx0ZXJlZFRhc2tzID0gdGFza3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZmlsdGVyZWRUYXNrcyAmJiBmaWx0ZXJlZFRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gYWRkIHRhc2tzIHRvIERPTVxyXG4gICAgICAgICAgICBmaWx0ZXJlZFRhc2tzLmZvckVhY2goKHQpID0+IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlUYXNrKHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlUYXNrKHRhc2s6IFRvZG9UeHRUYXNrKTogdm9pZCB7XHJcbiAgICAgICAgLy8gYWRkIHRhc2sgdG8gRE9NXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaXN0Q29udGFpbmVyLWRpdlwiKS5hcHBlbmRDaGlsZChnZW5lcmF0ZVRhc2tFbGVtZW50KHRhc2spKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlVGFzayh0YXNrSWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIC8vIGRlbGV0ZSB0aGUgdGFzayBmcm9tIHRoZSBET01cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xpc3RDb250YWluZXItZGl2XCIpLnJlbW92ZUNoaWxkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyB0YXNrSWQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIG9wZW5zIHRoZSBzcGVjaWZpZWQgdGFzayBpbiBhbiBlZGl0aW5nIHdpbmRvd1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZGlzcGxheU1vZGFsRm9yVGFzayh0YXNrSWQ/OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAvLyBwb3B1bGF0ZSB0aGUgbW9kYWwgdGV4dGFyZWEgd2l0aCB0aGlzIHRhc2sgc3RyaW5nXHJcbiAgICAgICAgbGV0IHRhc2s6IFRvZG9UeHRUYXNrO1xyXG4gICAgICAgIGxldCBpc05ldzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIGlmKHRhc2tJZCkge1xyXG4gICAgICAgICAgICB0YXNrID0gVG9kb1R4dC5nZXRUYXNrKHRhc2tJZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGFzayA9IG5ldyBUb2RvVHh0VGFzaygpO1xyXG4gICAgICAgICAgICBpc05ldyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1bmJpbmRDb250cm9sRXZlbnRzKG1haW5FdmVudEhhbmRsZXJzKTtcclxuXHJcbiAgICAgICAgbGV0IG1vZGFsOiBIVE1MRGl2RWxlbWVudCA9IGdlbmVyYXRlTW9kYWxFbGVtZW50KHRhc2ssIGlzTmV3KTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcclxuXHJcbiAgICAgICAgYmluZENvbnRyb2xFdmVudHMobW9kYWxFdmVudEhhbmRsZXJzKTtcclxuXHJcbiAgICAgICAgJChtb2RhbCkuc2hvdygwKTtcclxuXHJcbiAgICAgICAgLy8gcGxhY2UgZm9jdXMgb24gdGhlIHRleHRhcmVhXHJcbiAgICAgICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxFZGl0LXRleHRhcmVhXCIpIGFzIEhUTUxFbGVtZW50KS5mb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogY3JlYXRlcyBhIG5ldyBET00gZWxlbWVudCB0byBhbGxvdyBlZGl0aW5nIG9mIGFuIGV4aXRpbmcge1RvZG9UeHRUYXNrfSBvciBhZGRpdGlvblxyXG4gICAgICogb2YgYSBuZXcgdGFza1xyXG4gICAgICogQHBhcmFtIHRhc2sge1RvZG9UeHRUYXNrfSB0aGUgdGFzayBvYmplY3QgdG8gYmUgZWRpdGVkIG9yIG51bGwgaWYgbmV3IFRhc2sgYmVpbmcgYWRkZWRcclxuICAgICAqIEByZXR1cm5zIHtIVE1MRGl2RWxlbWVudH0gdGhhdCBhbGxvd3MgZWRpdGluZyBvZiBleGlzdGluZyBUYXNrXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlTW9kYWxFbGVtZW50KHRhc2s6IFRvZG9UeHRUYXNrLCBpc05ldzogYm9vbGVhbik6IEhUTUxEaXZFbGVtZW50IHtcclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAqIFNUQVJUOiBtb2RhbCBoZWFkZXJcclxuICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgICAgICAvLyBjbG9zZSBidXR0b24gaWNvblxyXG4gICAgICAgIGxldCBjbG9zZUJ1dHRvbkljb246IEhUTUxTcGFuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICAkKGNsb3NlQnV0dG9uSWNvbikuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uSWNvbi5pbm5lckhUTUwgPSAnICZ0aW1lczsnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGNsb3NlIGJ1dHRvblxyXG4gICAgICAgIGxldCBjbG9zZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi50eXBlID0gJ2J1dHRvbic7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uaWQgPSAnbW9kYWxFZGl0Q2xvc2UtYnV0dG9uJztcclxuICAgICAgICBjbG9zZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjbG9zZScpO1xyXG4gICAgICAgICQoY2xvc2VCdXR0b24pLmF0dHIoJ2RhdGEtZGlzbWlzcycsICdtb2RhbCcpO1xyXG4gICAgICAgICQoY2xvc2VCdXR0b24pLmF0dHIoJ2FyaWEtbGFiZWwnLCBUb2RvVHh0UmVzb3VyY2VzLmdldCgnQ0xPU0UnKSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24ub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHJlbW92ZU1vZGFsKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbkljb24pO1xyXG5cclxuICAgICAgICAvLyBtb2RhbCB0aXRsZVxyXG4gICAgICAgIGxldCBtb2RhbFRpdGxlOiBIVE1MSGVhZGluZ0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNCcpO1xyXG4gICAgICAgIG1vZGFsVGl0bGUuY2xhc3NMaXN0LmFkZCgnbW9kYWwtdGl0bGUnKTtcclxuICAgICAgICBtb2RhbFRpdGxlLmlkID0gJ21vZGFsRWRpdC1sYWJlbCc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gbW9kYWwgaGVhZGVyIGNvbnRhaW5lclxyXG4gICAgICAgIGxldCBtb2RhbEhlYWRlcjogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtb2RhbEhlYWRlci5jbGFzc0xpc3QuYWRkKCdtb2RhbC1oZWFkZXInKTtcclxuICAgICAgICBtb2RhbEhlYWRlci5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7XHJcbiAgICAgICAgbW9kYWxIZWFkZXIuYXBwZW5kQ2hpbGQobW9kYWxUaXRsZSk7XHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgKiBFTkQ6IG1vZGFsIGhlYWRlclxyXG4gICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAqIFNUQVJUOiBtb2RhbCBib2R5XHJcbiAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICAgICAgLy8gbW9kYWwgdGV4dGFyZWFcclxuICAgICAgICBsZXQgbW9kYWxUZXh0QXJlYTogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtb2RhbFRleHRBcmVhLmlkID0gJ21vZGFsRWRpdC10ZXh0YXJlYSc7XHJcbiAgICAgICAgbW9kYWxUZXh0QXJlYS5jbGFzc0xpc3QuYWRkKCd0ZXh0YXJlYScpO1xyXG4gICAgICAgIG1vZGFsVGV4dEFyZWEuY29udGVudEVkaXRhYmxlID0gJ3RydWUnO1xyXG4gICAgICAgIGxldCBodG1sVGV4dDogc3RyaW5nID0gZ2V0TWFya3VwRm9yVGFzayh0YXNrKS5yZXBsYWNlKC9oaWRkZW4teHMvLFwiXCIpO1xyXG4gICAgICAgIG1vZGFsVGV4dEFyZWEuaW5uZXJIVE1MID0gaHRtbFRleHQ7XHJcblxyXG4gICAgICAgIC8vbW9kYWwgYm9keSBjb250YWluZXJcclxuICAgICAgICBsZXQgbW9kYWxCb2R5OiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIG1vZGFsQm9keS5jbGFzc0xpc3QuYWRkKCdtb2RhbC1ib2R5Jyk7XHJcbiAgICAgICAgbW9kYWxCb2R5LmFwcGVuZENoaWxkKG1vZGFsVGV4dEFyZWEpO1xyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICogRU5EOiBtb2RhbCBib2R5XHJcbiAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIFxyXG4gICAgICAgICAqIFNUQVJUOiBtb2RhbCBmb290ZXJcclxuICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgICAgICAvLyBzYXZlIGJ1dHRvbiBsYWJlbFxyXG4gICAgICAgIGxldCBzYXZlQnV0dG9uTGFiZWw6IEhUTUxTcGFuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICBzYXZlQnV0dG9uTGFiZWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuLXhzJyk7XHJcbiAgICAgICAgbGV0IHR4dDogc3RyaW5nID0gKGlzTmV3KSA/IFRvZG9UeHRSZXNvdXJjZXMuZ2V0KCdBREQnKSA6IFRvZG9UeHRSZXNvdXJjZXMuZ2V0KCdVUERBVEUnKTtcclxuICAgICAgICBzYXZlQnV0dG9uTGFiZWwuaW5uZXJUZXh0ID0gJyAnICsgdHh0O1xyXG5cclxuICAgICAgICAvLyBzYXZlIGJ1dHRvbiBpY29uXHJcbiAgICAgICAgbGV0IHNhdmVCdXR0b25JY29uOiBIVE1MU3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgc2F2ZUJ1dHRvbkljb24uY2xhc3NMaXN0LmFkZCgnZ2x5cGhpY29uJyk7XHJcbiAgICAgICAgc2F2ZUJ1dHRvbkljb24uY2xhc3NMaXN0LmFkZCgnZ2x5cGhpY29uLW9rJyk7XHJcblxyXG4gICAgICAgIC8vIHNhdmUgYnV0dG9uXHJcbiAgICAgICAgbGV0IHNhdmVCdXR0b246IEhUTUxBbmNob3JFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgIHNhdmVCdXR0b24udHlwZSA9ICdidXR0b24nO1xyXG4gICAgICAgIHNhdmVCdXR0b24uaWQgPSAnbW9kYWxFZGl0U2F2ZS1idXR0b24nO1xyXG4gICAgICAgIHNhdmVCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJyk7XHJcbiAgICAgICAgc2F2ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tbGcnKTtcclxuICAgICAgICBzYXZlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bi1zdWNjZXNzJyk7XHJcbiAgICAgICAgJChzYXZlQnV0dG9uKS5hdHRyKCdkYXRhLXRvZ2dsZScsICd0b29sdGlwJyk7XHJcbiAgICAgICAgJChzYXZlQnV0dG9uKS5hdHRyKCdkYXRhLXBsYWNlbWVudCcsICd0b3AnKTtcclxuICAgICAgICAkKHNhdmVCdXR0b24pLmF0dHIoJ3RleHQnLCB0eHQpO1xyXG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHNhdmVPclVwZGF0ZVRhc2tGcm9tTW9kYWwoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNhdmVCdXR0b24uYXBwZW5kQ2hpbGQoc2F2ZUJ1dHRvbkljb24pO1xyXG4gICAgICAgIHNhdmVCdXR0b24uYXBwZW5kQ2hpbGQoc2F2ZUJ1dHRvbkxhYmVsKTtcclxuXHJcbiAgICAgICAgLy8gcHJldmlldyBidXR0b24gbGFiZWxcclxuICAgICAgICBsZXQgcHJldmlld0J1dHRvbkxhYmVsOiBIVE1MU3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgcHJldmlld0J1dHRvbkxhYmVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbi14cycpO1xyXG4gICAgICAgIHByZXZpZXdCdXR0b25MYWJlbC5pbm5lclRleHQgPSAnICcgKyBUb2RvVHh0UmVzb3VyY2VzLmdldCgnUFJFVklFVycpO1xyXG5cclxuICAgICAgICAvLyBwcmV2aWV3IGJ1dHRvbiBpY29uXHJcbiAgICAgICAgbGV0IHByZXZpZXdCdXR0b25JY29uOiBIVE1MU3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgcHJldmlld0J1dHRvbkljb24uY2xhc3NMaXN0LmFkZCgnZ2x5cGhpY29uJyk7XHJcbiAgICAgICAgcHJldmlld0J1dHRvbkljb24uY2xhc3NMaXN0LmFkZCgnZ2x5cGhpY29uLWV5ZS1vcGVuJyk7XHJcblxyXG4gICAgICAgIC8vIHByZXZpZXcgYnV0dG9uXHJcbiAgICAgICAgbGV0IHByZXZpZXdCdXR0b246IEhUTUxBbmNob3JFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgIHByZXZpZXdCdXR0b24udHlwZSA9ICdidXR0b24nO1xyXG4gICAgICAgIHByZXZpZXdCdXR0b24uaWQgPSAnbW9kYWxFZGl0UHJldmlldy1idXR0b24nO1xyXG4gICAgICAgIHByZXZpZXdCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJyk7XHJcbiAgICAgICAgcHJldmlld0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tbGcnKTtcclxuICAgICAgICBwcmV2aWV3QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bi1wcmltYXJ5Jyk7XHJcbiAgICAgICAgJChwcmV2aWV3QnV0dG9uKS5hdHRyKCdkYXRhLXRvZ2dsZScsICd0b29sdGlwJyk7XHJcbiAgICAgICAgJChwcmV2aWV3QnV0dG9uKS5hdHRyKCdkYXRhLXBsYWNlbWVudCcsICd0b3AnKTtcclxuICAgICAgICAkKHByZXZpZXdCdXR0b24pLmF0dHIoJ3RleHQnLCBUb2RvVHh0UmVzb3VyY2VzLmdldCgnUFJFVklFVycpKTtcclxuICAgICAgICBwcmV2aWV3QnV0dG9uLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB1cGRhdGVNb2RhbFByZXZpZXcoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHByZXZpZXdCdXR0b24uYXBwZW5kQ2hpbGQocHJldmlld0J1dHRvbkljb24pO1xyXG4gICAgICAgIHByZXZpZXdCdXR0b24uYXBwZW5kQ2hpbGQocHJldmlld0J1dHRvbkxhYmVsKTtcclxuXHJcbiAgICAgICAgLy8gZGVsZXRlIGJ1dHRvbiBsYWJlbFxyXG4gICAgICAgIGxldCBkZWxldGVCdXR0b25MYWJlbDogSFRNTFNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbkxhYmVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbi14cycpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbkxhYmVsLmlubmVyVGV4dCA9ICcgJyArIFRvZG9UeHRSZXNvdXJjZXMuZ2V0KCdERUxFVEUnKTtcclxuXHJcbiAgICAgICAgLy8gZGVsZXRlIGJ1dHRvbiBpY29uXHJcbiAgICAgICAgbGV0IGRlbGV0ZUJ1dHRvbkljb246IEhUTUxTcGFuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICBkZWxldGVCdXR0b25JY29uLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbicpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbkljb24uY2xhc3NMaXN0LmFkZCgnZ2x5cGhpY29uLWZsb3BweS1yZW1vdmUnKTtcclxuXHJcbiAgICAgICAgLy8gZGVsZXRlIGJ1dHRvblxyXG4gICAgICAgIGxldCBkZWxldGVCdXR0b246IEhUTUxBbmNob3JFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi50eXBlID0gJ2J1dHRvbic7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmlkID0gJ21vZGFsRWRpdERlbGV0ZS1idXR0b24nO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4nKTtcclxuICAgICAgICBkZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuLWxnJyk7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bi1kYW5nZXInKTtcclxuICAgICAgICAkKGRlbGV0ZUJ1dHRvbikuYXR0cignZGF0YS10b2dnbGUnLCAndG9vbHRpcCcpO1xyXG4gICAgICAgICQoZGVsZXRlQnV0dG9uKS5hdHRyKCdkYXRhLXBsYWNlbWVudCcsICd0b3AnKTtcclxuICAgICAgICAkKGRlbGV0ZUJ1dHRvbikuYXR0cigndGV4dCcsIFRvZG9UeHRSZXNvdXJjZXMuZ2V0KCdERUxFVEUnKSk7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBoYW5kbGVEZWxldGVDbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGVCdXR0b24uYXBwZW5kQ2hpbGQoZGVsZXRlQnV0dG9uSWNvbik7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbkxhYmVsKTtcclxuXHJcbiAgICAgICAgLy8gZm9vdGVyIGJ1dHRvbiBncm91cFxyXG4gICAgICAgIGxldCBtb2RhbEZvb3RlckJ1dHRvbkdyb3VwOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIG1vZGFsRm9vdGVyQnV0dG9uR3JvdXAuY2xhc3NMaXN0LmFkZCgnYnRuLWdyb3VwJyk7XHJcbiAgICAgICAgbW9kYWxGb290ZXJCdXR0b25Hcm91cC5jbGFzc0xpc3QuYWRkKCdidG4tZ3JvdXAtanVzdGlmaWVkJyk7XHJcbiAgICAgICAgbW9kYWxGb290ZXJCdXR0b25Hcm91cC5hcHBlbmRDaGlsZChzYXZlQnV0dG9uKTtcclxuICAgICAgICBtb2RhbEZvb3RlckJ1dHRvbkdyb3VwLmFwcGVuZENoaWxkKHByZXZpZXdCdXR0b24pO1xyXG4gICAgICAgIGlmICghaXNOZXcpIHtcclxuICAgICAgICAgICAgbW9kYWxGb290ZXJCdXR0b25Hcm91cC5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbW9kYWwgZm9vdGVyIGNvbnRhaW5lclxyXG4gICAgICAgIGxldCBtb2RhbEZvb3RlcjogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtb2RhbEZvb3Rlci5jbGFzc0xpc3QuYWRkKCdtb2RhbC1mb290ZXInKTtcclxuICAgICAgICBtb2RhbEZvb3Rlci5hcHBlbmRDaGlsZChtb2RhbEZvb3RlckJ1dHRvbkdyb3VwKTtcclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBcclxuICAgICAgICAgKiBFTkQ6IG1vZGFsIGZvb3RlclxyXG4gICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIFxyXG4gICAgICAgICAqIHRlcnRpYXJ5IG1vZGFsIGNvbnRhaW5lclxyXG4gICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICAgIGxldCBtb2RhbENvbnRlbnQ6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbW9kYWxDb250ZW50LmNsYXNzTGlzdC5hZGQoJ21vZGFsLWNvbnRlbnQnKTtcclxuICAgICAgICBtb2RhbENvbnRlbnQuYXBwZW5kQ2hpbGQobW9kYWxIZWFkZXIpO1xyXG4gICAgICAgIG1vZGFsQ29udGVudC5hcHBlbmRDaGlsZChtb2RhbEJvZHkpO1xyXG4gICAgICAgIG1vZGFsQ29udGVudC5hcHBlbmRDaGlsZChtb2RhbEZvb3Rlcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgKiBzZWNvbmRhcnkgbW9kYWwgY29udGFpbmVyXHJcbiAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICAgICAgbGV0IG1vZGFsRGlhbG9nOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIG1vZGFsRGlhbG9nLmNsYXNzTGlzdC5hZGQoJ21vZGFsLWRpYWxvZycpO1xyXG4gICAgICAgIG1vZGFsRGlhbG9nLmFwcGVuZENoaWxkKG1vZGFsQ29udGVudCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgKiBtYWluIG1vZGFsIGNvbnRhaW5lclxyXG4gICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICAgIGxldCBtb2RhbDogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbCcpO1xyXG4gICAgICAgIG1vZGFsLmlkID0gJ21vZGFsRWRpdC1kaXYnO1xyXG4gICAgICAgIG1vZGFsLnRhYkluZGV4ID0gLTE7XHJcbiAgICAgICAgJChtb2RhbCkuYXR0cigncm9sZScsICdkaWFsb2cnKTtcclxuICAgICAgICAkKG1vZGFsKS5hdHRyKCdhcmlhLWxhYmVsbGVkYnknLCAnbW9kYWxFZGl0LWxhYmVsJyk7XHJcbiAgICAgICAgJChtb2RhbCkuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xyXG4gICAgICAgICQobW9kYWwpLmF0dHIoJ3Rhc2staWQnLCB0YXNrLmlkKTtcclxuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChtb2RhbERpYWxvZyk7XHJcblxyXG4gICAgICAgIHJldHVybiBtb2RhbDtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gdXBkYXRlTW9kYWxQcmV2aWV3KCk6IHZvaWQge1xyXG4gICAgICAgIHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQtdGV4dGFyZWEnKTtcclxuICAgICAgICBpZiAoZWwpIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBlbC50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgdmFyIHRhc2sgPSBuZXcgVG9kb1R4dFRhc2sodGV4dCk7XHJcbiAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IGdldE1hcmt1cEZvclRhc2sodGFzayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiByZW1vdmVNb2RhbCgpOiB2b2lkIHtcclxuICAgICAgICB1bmJpbmRDb250cm9sRXZlbnRzKG1vZGFsRXZlbnRIYW5kbGVycyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJCgnI21vZGFsRWRpdC1kaXYnKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgYmluZENvbnRyb2xFdmVudHMobWFpbkV2ZW50SGFuZGxlcnMpO1xyXG5cclxuICAgICAgICByZWZyZXNoVWkoKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY29uc3QgbW9kYWxFdmVudEhhbmRsZXJzOiBhbnlbXSA9IFtcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudDsgfSwgZXY6IFwia2V5ZG93blwiLCBmbjogKGU6IEtleWJvYXJkRXZlbnQpID0+IHsgaGFuZGxlQWx0RW50ZXIoZSk7IH0gfSxcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudDsgfSwgZXY6IFwia2V5ZG93blwiLCBmbjogKGU6IEtleWJvYXJkRXZlbnQpID0+IHsgaGFuZGxlRXNjKGUpOyB9IH0sXHJcbiAgICAgICAgeyBlbDogKCkgPT4geyByZXR1cm4gZG9jdW1lbnQ7IH0sIGV2OiBcImtleWRvd25cIiwgZm46IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7IGhhbmRsZUFsdFAoZSk7IH0gfVxyXG4gICAgXTtcclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZGlzcGxheVByaW9yaXRpZXMoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IHByaUxpc3Q6IEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdGllcy11bCcpO1xyXG4gICAgICAgIFRvZG9UeHRBdHRyaWJ1dGVzLnByaW9yaXRpZXMuZm9yRWFjaCgocHJpKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwcmkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZ2VuZXJhdGVMaXN0RWxlbWVudChwcmkpO1xyXG4gICAgICAgICAgICAgICAgcHJpTGlzdC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjbGVhclByaW9yaXRpZXMoKTogdm9pZCB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW9yaXRpZXMtdWwnKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5UHJvamVjdHMoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IHByb2pMaXN0OiBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RzLXVsJyk7XHJcbiAgICAgICAgVG9kb1R4dEF0dHJpYnV0ZXMucHJvamVjdHMuZm9yRWFjaCgocHJvaikgPT4ge1xyXG4gICAgICAgICAgICBpZiAocHJvaikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBnZW5lcmF0ZUxpc3RFbGVtZW50KHByb2opO1xyXG4gICAgICAgICAgICAgICAgcHJvakxpc3QuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gY2xlYXJQcm9qZWN0cygpOiB2b2lkIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdHMtdWwnKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5Q29udGV4dHMoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGN0eExpc3Q6IEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGV4dHMtdWwnKTtcclxuICAgICAgICBUb2RvVHh0QXR0cmlidXRlcy5jb250ZXh0cy5mb3JFYWNoKChjdHgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGN0eCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBnZW5lcmF0ZUxpc3RFbGVtZW50KGN0eCk7XHJcbiAgICAgICAgICAgICAgICBjdHhMaXN0LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQ29udGV4dHMoKTogdm9pZCB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRleHRzLXVsJykuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY29uc3QgbWFpbkV2ZW50SGFuZGxlcnM6IGFueVtdID0gW1xyXG4gICAgICAgIHsgZWw6ICgpID0+IHsgcmV0dXJuIGRvY3VtZW50OyB9LCBldjogXCJrZXlkb3duXCIsIGZuOiAoZTogS2V5Ym9hcmRFdmVudCkgPT4geyBoYW5kbGVBbHRTKGUpOyB9IH0sXHJcbiAgICAgICAgeyBlbDogKCkgPT4geyByZXR1cm4gZG9jdW1lbnQ7IH0sIGV2OiBcImtleWRvd25cIiwgZm46IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7IGhhbmRsZUFsdEMoZSk7IH0gfSxcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudDsgfSwgZXY6IFwia2V5ZG93blwiLCBmbjogKGU6IEtleWJvYXJkRXZlbnQpID0+IHsgaGFuZGxlQWx0VChlKTsgfSB9LFxyXG4gICAgICAgIHsgZWw6ICgpID0+IHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZmlsZURyb3AtZGl2XCIpOyB9LCBldjogXCJkcmFnb3ZlclwiLCBmbjogKGU6IERyYWdFdmVudCkgPT4geyBoYW5kbGVEcmFnT3ZlcihlKTsgfSB9LFxyXG4gICAgICAgIHsgZWw6ICgpID0+IHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZmlsZURyb3AtZGl2XCIpOyB9LCBldjogXCJkcm9wXCIsIGZuOiAoZTogRmlsZURyb3BFdmVudCkgPT4geyBoYW5kbGVEcm9wKGUpOyB9IH0sXHJcbiAgICAgICAgeyBlbDogKCkgPT4geyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmaWxlVXBsb2FkLWlucHV0XCIpOyB9LCBldjogXCJjaGFuZ2VcIiwgZm46IChlOiBFdmVudCkgPT4geyBoYW5kbGVEcm9wKGUgYXMgRmlsZURyb3BFdmVudCk7IH0gfSxcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Nob3dDbG9zZWQtbGFiZWxcIik7IH0sIGV2OiBcImNsaWNrXCIsIGZuOiAoKSA9PiB7IFxyXG4gICAgICAgICAgICB0b2dnbGVTaG93Q2xvc2VkU3RhdHVzKCk7XHJcbiAgICAgICAgICAgIHJlZnJlc2hVaSgpO1xyXG4gICAgICAgIH0gfSxcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZFRhc2tCdXR0b24tYnV0dG9uXCIpOyB9LCBldjogXCJjbGlja1wiLCBmbjogKCkgPT4geyBkaXNwbGF5TW9kYWxGb3JUYXNrKCk7IH0gfSxcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NhdmVGaWxlQnV0dG9uLWJ1dHRvblwiKTsgfSwgZXY6IFwiY2xpY2tcIiwgZm46ICgpID0+IHsgZXhwb3J0VG9kb1R4dEZpbGUoKTsgfSB9LFxyXG4gICAgICAgIHsgZWw6ICgpID0+IHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZmlsdGVyLWlucHV0XCIpOyB9LCBldjogXCJrZXl1cFwiLCBmbjogKCkgPT4geyBoYW5kbGVGaWx0ZXIoKTsgfSB9LFxyXG4gICAgICAgIHsgZWw6ICgpID0+IHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xlYXJGaWx0ZXItYnV0dG9uXCIpOyB9LCBldjogXCJjbGlja1wiLCBmbjogKCkgPT4geyByZWZyZXNoVWkoKTsgfSB9LFxyXG4gICAgICAgIHsgZWw6ICgpID0+IHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdGllcy1kaXYgLnBhbmVsLWhlYWRpbmdcIik7IH0sIGV2OiBcImNsaWNrXCIsIGZuOiAoKSA9PiB7IHRvZ2dsZVBhbmVsKCdwcmlvcml0aWVzLWRpdicpOyB9IH0sXHJcbiAgICAgICAgeyBlbDogKCkgPT4geyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0cy1kaXYgLnBhbmVsLWhlYWRpbmdcIik7IH0sIGV2OiBcImNsaWNrXCIsIGZuOiAoKSA9PiB7IHRvZ2dsZVBhbmVsKCdwcm9qZWN0cy1kaXYnKTsgfSB9LFxyXG4gICAgICAgIHsgZWw6ICgpID0+IHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29udGV4dHMtZGl2IC5wYW5lbC1oZWFkaW5nXCIpOyB9LCBldjogXCJjbGlja1wiLCBmbjogKCkgPT4geyB0b2dnbGVQYW5lbCgnY29udGV4dHMtZGl2Jyk7IH0gfSxcclxuICAgIF07XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGJpbmRDb250cm9sRXZlbnRzKGhhbmRsZXJzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdmFyIHVzZUNhcHR1cmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIudWMpIHtcclxuICAgICAgICAgICAgICAgIHVzZUNhcHR1cmUgPSBoYW5kbGVyLnVjO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmVsKCkuYWRkRXZlbnRMaXN0ZW5lcihoYW5kbGVyLmV2LCBoYW5kbGVyLmZuLCB1c2VDYXB0dXJlKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB1bmJpbmRDb250cm9sRXZlbnRzKGhhbmRsZXJzOiBhbnlbXSkge1xyXG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdmFyIHVzZUNhcHR1cmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIudWMpIHtcclxuICAgICAgICAgICAgICAgIHVzZUNhcHR1cmUgPSBoYW5kbGVyLnVjO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmVsKCkucmVtb3ZlRXZlbnRMaXN0ZW5lcihoYW5kbGVyLmV2LCBoYW5kbGVyLmZuLCB1c2VDYXB0dXJlKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBoYW5kbGVBbHRTKGU6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09IDgzICYmIGUuYWx0S2V5KSB7IC8vIEFsdCArIHNcclxuICAgICAgICAgICAgZXhwb3J0VG9kb1R4dEZpbGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUFsdEMoZTogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gNjcgJiYgZS5hbHRLZXkpIHsgLy8gQWx0ICsgY1xyXG4gICAgICAgICAgICByZWZyZXNoVWkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUFsdFQoZTogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gODQgJiYgZS5hbHRLZXkpIHsgLy8gQWx0ICsgdFxyXG4gICAgICAgICAgICBkaXNwbGF5TW9kYWxGb3JUYXNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBoYW5kbGVEcm9wKGU6IEZpbGVEcm9wRXZlbnQpIHtcclxuICAgICAgICBoYW5kbGVGaWxlU2VsZWN0KGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBoYW5kbGVBbHRFbnRlcihlOiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKChlLmtleUNvZGUgJiYgKGUua2V5Q29kZSA9PT0gMTMgJiYgZS5hbHRLZXkpKSkgeyAvLyBBbHQgKyBFbnRlclxyXG4gICAgICAgICAgICBzYXZlT3JVcGRhdGVUYXNrRnJvbU1vZGFsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVPclVwZGF0ZVRhc2tGcm9tTW9kYWwoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IG1vZGFsOiBIVE1MRGl2RWxlbWVudCA9IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsRWRpdC1kaXZcIikgYXMgSFRNTERpdkVsZW1lbnQpO1xyXG4gICAgICAgIGxldCB0YXNrSWQ6IHN0cmluZyA9ICQobW9kYWwpLmF0dHIoJ3Rhc2staWQnKTtcclxuICAgICAgICBsZXQgdGV4dDogc3RyaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbEVkaXQtdGV4dGFyZWFcIikudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGV4dCA9IHRleHQudHJpbSgpOyAvLyByZW1vdmUgYW55IGxlYWRpbmcgb3IgdHJhaWxpbmcgd2hpdGVzcGFjZVxyXG4gICAgICAgIHRleHQgPSBUb2RvVHh0VXRpbHMuaHRtbFVuZW5jb2RlKHRleHQpO1xyXG4gICAgICAgIGlmIChUb2RvVHh0LnVwZGF0ZVRhc2sodGFza0lkLCB0ZXh0KSkge1xyXG4gICAgICAgICAgICByZWZyZXNoVWkoKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZU1vZGFsKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBsb2cgdGhpc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogZGlzcGxheSBlcnJvciB0b2FzdFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaGFuZGxlRXNjKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNyB8fCBlLmtleUNvZGUgPT09IDApIHsgLy8gRXNjXHJcbiAgICAgICAgICAgIHJlbW92ZU1vZGFsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljaygpOiB2b2lkIHtcclxuICAgICAgICBsZXQgbW9kYWw6IEhUTUxEaXZFbGVtZW50ID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxFZGl0LWRpdlwiKSBhcyBIVE1MRGl2RWxlbWVudCk7XHJcbiAgICAgICAgbGV0IHRhc2tJZDogc3RyaW5nID0gJChtb2RhbCkuYXR0cigndGFzay1pZCcpO1xyXG4gICAgICAgIGxldCB0YXNrOiBUb2RvVHh0VGFzayA9IFRvZG9UeHQuZ2V0VGFzayh0YXNrSWQpO1xyXG4gICAgICAgIGlmICh0YXNrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGNvbmZpcm0oVG9kb1R4dFJlc291cmNlcy5nZXQoXCJERUxFVEVfQ09ORklSTVwiKSArIFwiXFxuXFx0XFxcIlwiICsgdGFzay50ZXh0ICsgXCJcXFwiXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoVG9kb1R4dFZhdWx0LnJlbW92ZVRhc2sodGFza0lkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hVaSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBsb2cgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZGlzcGxheSBlcnJvciB0b2FzdFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBmaWx0ZXJUaW1lb3V0SWQ6IG51bWJlcjtcclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaGFuZGxlRmlsdGVyKCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChmaWx0ZXJUaW1lb3V0SWQpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChmaWx0ZXJUaW1lb3V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaWx0ZXJUaW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGdldCB0aGUgbGlzdCBvZiBzZWxlY3RlZCBwcmlvcml0aWVzIGZyb20gdGhlIGZpbHRlclxyXG4gICAgICAgICAgICBmaWx0ZXJEaXNwbGF5ZWRUYXNrcygpO1xyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUFsdFAoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGlmICgoZS5rZXlDb2RlICYmIChlLmtleUNvZGUgPT09IDgwICYmIGUuYWx0S2V5KSkpIHsgLy8gQWx0ICsgcFxyXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIG1hcmt1cCBvZiB0aGUgZGlzcGxheWVkIHRhc2sgaW4gdGhlIE1vZGFsXHJcbiAgICAgICAgICAgIHVwZGF0ZU1vZGFsUHJldmlldygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHdpbGwgcmVsb2FkIHRoZSBsaXN0IG9mIHRhc2tzIGZyb20gU3RvcmFnZSB0byBlbnN1cmUgaXRcclxuICAgICAqIGlzIHNvcnRlZCBhbmQgZGlzcGxheWluZyBwcm9wZXJseVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVmcmVzaFVpKCk6IHZvaWQge1xyXG4gICAgICAgIHNldFNob3dDbG9zZWQoVG9kb1R4dFZhdWx0LmdldENvbmZpZygpLnNob3dDbG9zZWQpO1xyXG5cclxuICAgICAgICAvLyB1bmJpbmQgYW55IGV2ZW50IGhhbmRsaW5nXHJcbiAgICAgICAgdW5iaW5kQ29udHJvbEV2ZW50cyhtYWluRXZlbnRIYW5kbGVycyk7XHJcblxyXG4gICAgICAgIC8vIGNsZWFyIHRoZSBVSSBsaXN0XHJcbiAgICAgICAgY2xlYXJUYXNrcygpO1xyXG5cclxuICAgICAgICAvLyBjbGVhciB0aGUgYXR0cmlidXRlc1xyXG4gICAgICAgIGNsZWFyUHJpb3JpdGllcygpO1xyXG4gICAgICAgIGNsZWFyUHJvamVjdHMoKTtcclxuICAgICAgICBjbGVhckNvbnRleHRzKCk7XHJcblxyXG4gICAgICAgIC8vIGNsZWFyIGZpbHRlciBpbnB1dFxyXG4gICAgICAgIGNsZWFyRmlsdGVycygpO1xyXG5cclxuICAgICAgICAvLyBub3cgcmVidWlsZCBVSSBsaXN0IGZyb20gY2FjaGVcclxuICAgICAgICBkaXNwbGF5VGFza3MoKTtcclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIHRoZSBET00gd2l0aCB0YXNrIGF0dHJpYnV0ZXNcclxuICAgICAgICBkaXNwbGF5UHJpb3JpdGllcygpO1xyXG4gICAgICAgIGRpc3BsYXlQcm9qZWN0cygpO1xyXG4gICAgICAgIGRpc3BsYXlDb250ZXh0cygpO1xyXG5cclxuICAgICAgICAvLyBlbmFibGUga2V5Ym9hcmQgc2hvcnRjdXRzIGFuZCBjbGljayBldmVudHMgZm9yIHRoZSBjb250cm9scyBhcmVhXHJcbiAgICAgICAgYmluZENvbnRyb2xFdmVudHMobWFpbkV2ZW50SGFuZGxlcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBzZXRGaWx0ZXJzKGZpbHRlclN0cjogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGZpbHRlclN0cikge1xyXG4gICAgICAgICAgICAvLyBzZXQgZmlsdGVyIHRleHQgaW5wdXRcclxuICAgICAgICAgICAgbGV0IGlucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmaWx0ZXItaW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBmaWx0ZXJTdHI7XHJcbiAgICAgICAgICAgIGhhbmRsZUZpbHRlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gY2xlYXJGaWx0ZXJzKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIHVwZGF0ZSBmaWx0ZXIgaW5wdXRcclxuICAgICAgICAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmaWx0ZXItaW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjbGVhclRhc2tzKCk6IHZvaWQge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlzdENvbnRhaW5lci1kaXZcIikuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZmlsdGVyRGlzcGxheWVkVGFza3MoKTogdm9pZCB7XHJcbiAgICAgICAgY2xlYXJUYXNrcygpO1xyXG5cclxuICAgICAgICAvLyBob25vcnMgYW55IHNwZWNpZmllZCBmaWx0ZXJzXHJcbiAgICAgICAgZGlzcGxheVRhc2tzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZVNob3dDbG9zZWRTdGF0dXMoKTogdm9pZCB7XHJcbiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3dDbG9zZWQtbGFiZWwnKTtcclxuICAgICAgICB2YXIgYWN0aXZlID0gZWwuY2xhc3NOYW1lLm1hdGNoKC8oKCB8XilidG4tc3VjY2VzcykvKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAvLyBpZiBhY3RpdmUgdG9nZ2xlIHRvIGluYWN0aXZlXHJcbiAgICAgICAgc2V0U2hvd0Nsb3NlZCghYWN0aXZlKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0U2hvd0Nsb3NlZChhY3RpdmU6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvd0Nsb3NlZC1sYWJlbCcpO1xyXG4gICAgICAgIGlmIChhY3RpdmUpIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UoLygoIHxeKWJ0bi1kYW5nZXIpLywgXCIgYnRuLXN1Y2Nlc3NcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UoLygoIHxeKWJ0bi1zdWNjZXNzKS8sIFwiIGJ0bi1kYW5nZXJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFRvZG9UeHRWYXVsdC5zZXRDb25maWcoe3Nob3dDbG9zZWQ6IGFjdGl2ZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB0b2dnbGVQYW5lbChuYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB2YXIgaGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgbmFtZSArICcgLnBhbmVsLWhlYWRpbmcnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB2YXIgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgbmFtZSArICcgLnBhbmVsLWJvZHknKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB2YXIgaGlkZGVuID0gYm9keS5jbGFzc05hbWUubWF0Y2goLygoIHxeKWNvbGxhcHNlKS8pID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIGlmIChoaWRkZW4pIHtcclxuICAgICAgICAgICAgc2hvd1BhbmVsKGhlYWRpbmcsIGJvZHkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGhpZGVQYW5lbChoZWFkaW5nLCBib2R5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNob3dQYW5lbChoZWFkaW5nOiBIVE1MRWxlbWVudCwgYm9keTogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgaW5kaWNhdG9yID0gaGVhZGluZy5xdWVyeVNlbGVjdG9yKFwiLmdseXBoaWNvblwiKTtcclxuICAgICAgICBib2R5LmNsYXNzTmFtZSA9IGJvZHkuY2xhc3NOYW1lLnJlcGxhY2UoLygoIHxeKWNvbGxhcHNlKS9nLCBcIlwiKTtcclxuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gaW5kaWNhdG9yLmNsYXNzTmFtZS5yZXBsYWNlKC8oKCB8XilnbHlwaGljb24tY2hldnJvbi1kb3duKS8sIFwiIGdseXBoaWNvbi1jaGV2cm9uLXVwXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBoaWRlUGFuZWwoaGVhZGluZzogSFRNTEVsZW1lbnQsIGJvZHk6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIGluZGljYXRvciA9IGhlYWRpbmcucXVlcnlTZWxlY3RvcihcIi5nbHlwaGljb25cIik7XHJcbiAgICAgICAgYm9keS5jbGFzc05hbWUgKz0gXCIgY29sbGFwc2VcIjtcclxuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gaW5kaWNhdG9yLmNsYXNzTmFtZS5yZXBsYWNlKC8oKCB8XilnbHlwaGljb24tY2hldnJvbi11cCkvLCBcIiBnbHlwaGljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB0b2dnbGVUYXNrU3RhdHVzKHRhc2tJZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdmFyIHRhc2sgPSBUb2RvVHh0LmdldFRhc2sodGFza0lkKTtcclxuICAgICAgICBpZiAodGFzaykge1xyXG4gICAgICAgICAgICBpZiAodGFzay5pc0FjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgVG9kb1R4dC5jbG9zZVRhc2sodGFza0lkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFRvZG9UeHQuYWN0aXZhdGVUYXNrKHRhc2tJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aWxsIHJldHJpZXZlIHRoZSB0b2RvLnR4dCBmaWxlIGZyb20gdGhlIHBhc3NlZCBpblxyXG4gICAgICogZmlsZU5hbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGZpbGVOYW1lIHRoZSBTdHJpbmcgbmFtZSBvZiB0aGUgdG9kby50eHQgZmlsZSB0byBiZSBvcGVuZWRcclxuICAgICAqIGZpbGUuXHJcbiAgICAgKiBFWDogXCJ0b2RvLnR4dFwiXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb2RvVHh0RmlsZShmaWxlTmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8gbG9hZCB2aWEgQUpBWCBjYWxsIHRvIGxvY2FsIGZpbGUgc3lzdGVtXHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IGZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAvL2Nyb3NzRG9tYWluOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAoanFYSFIsIHRleHRTdGF0dXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZGlzcGxheSBhIHByb3BlciBlcnJvciBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KHRleHRTdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFzcyB0aGUgcmVzcG9uc2Ugb24gdG8gdGhlIG5leHQgY2FsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBUb2RvVHh0LnBhcnNlVG9kb1R4dEZpbGUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hVaSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBoYW5kbGVGaWxlU2VsZWN0KGU6IEZpbGVEcm9wRXZlbnQpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdmFyIGZpbGVzID0gZS5kYXRhVHJhbnNmZXIuZmlsZXM7IC8vIEZpbGVMaXN0IG9iamVjdC5cclxuXHJcbiAgICAgICAgLy8gZmlsZXMgaXMgYSBGaWxlTGlzdCBvZiBGaWxlIG9iamVjdHMuXHJcbiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIGYgPSBmaWxlc1swXTtcclxuXHJcbiAgICAgICAgICAgIC8vIHByb2Nlc3MgdXNpbmcgYSBGaWxlUmVhZGVyXHJcbiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgICAgICAgICAgLy8gZ2V0IHRoZSBjb250ZW50IGFzIGEgU3RyaW5nXHJcbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoZTogUHJvZ3Jlc3NFdmVudDxGaWxlUmVhZGVyPikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpcm0oVG9kb1R4dFJlc291cmNlcy5nZXQoXCJPVkVSV1JJVEVfQ09ORklSTVwiKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBUb2RvVHh0LnBhcnNlVG9kb1R4dEZpbGUoZS50YXJnZXQucmVzdWx0LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hVaSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmLCBcIlVURi04XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaGFuZGxlRHJhZ092ZXIoZTogRHJhZ0V2ZW50KSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IFwiY29weVwiOyAvLyBFeHBsaWNpdGx5IHNob3cgdGhpcyBpcyBhIGNvcHkuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aWxsIGFsbG93IHRoZSB1c2VyIHRvIGRvd25sb2FkIGEgY29weSBvZiB0aGUgdG9kby50eHQgZmlsZVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZXhwb3J0VG9kb1R4dEZpbGUoKSB7XHJcbiAgICAgICAgbGV0IHRhc2tzOiBUb2RvVHh0VGFza1tdID0gVG9kb1R4dC5nZXRTb3J0ZWRUYXNrQXJyYXkoKTtcclxuICAgICAgICBsZXQgdGFza0FycmF5OiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTx0YXNrcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0YXNrQXJyYXkucHVzaCh0YXNrc1tpXS50ZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgb3V0cHV0IHN0cmluZyB0byBiZSB3cml0dGVuXHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB0YXNrQXJyYXkuam9pbihcIlxcblwiKTtcclxuXHJcbiAgICAgICAgLy8gc2V0IGRhdGF0eXBlIHRvIHRleHQvY3N2IHRvIGluaXRpYXRlIGRvd25sb2FkIHByb21wdFxyXG4gICAgICAgIHZhciBkYXRhID0gZW5jb2RlVVJJKFwiZGF0YTp0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04LFwiICsgY29udGVudCk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5vcGVuKGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gd2lsbCBnZW5lcmF0ZSBhIGh0bWwtbWFya3VwIHZlcnNpb24gb2YgdGhlIHRhc2tcclxuICAgICAqIEBwYXJhbSB7VG9kb1R4dFRhc2t9IHRhc2sgLSB0aGUgdGFzayB0byBnZW5lcmF0ZSBmb3JcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBIVE1MIG1hcmtlZCB1cCB0YXNrIHRleHRcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldE1hcmt1cEZvclRhc2sodGFzazogVG9kb1R4dFRhc2spOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCB0ZXh0OiBzdHJpbmcgPSB0YXNrLnRleHQgfHwgJyc7XHJcblxyXG4gICAgICAgIC8vIG1ha2UgaHRtbCBjb21wYXRpYmxlXHJcbiAgICAgICAgdGV4dCA9IFRvZG9UeHRVdGlscy5odG1sRW5jb2RlKHRleHQpO1xyXG5cclxuICAgICAgICAvLyBtYXJrdXAgcHJpb3JpdHlcclxuICAgICAgICBsZXQgcHJpQ2xzOiBzdHJpbmcgPSBnZXREaXNwbGF5Q2xhc3NGb3JUYXNrKHRhc2spO1xyXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UodGFzay5wcmlvcml0eSwgXCI8c3BhbiBjbGFzcz1cXFwiXCIgKyBwcmlDbHMgKyBcIlxcXCI+PGI+XCIgKyB0YXNrLnByaW9yaXR5ICsgXCI8L2I+PC9zcGFuPlwiKTtcclxuXHJcbiAgICAgICAgLy8gbWFya3VwIHByb2plY3RzXHJcbiAgICAgICAgbGV0IHByb2plY3RzOiBzdHJpbmdbXSA9IHRhc2sucHJvamVjdHM7XHJcbiAgICAgICAgcHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKHByb2plY3QucmVwbGFjZSgvXFwrL2csIFwiXFxcXCtcIikgKyBcIig/IVswLTlBLVphLXpdKVwiLCBcImdcIik7XHJcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UocmVnZXgsIFwiPHNwYW4gY2xhc3M9XFxcInRleHQtbXV0ZWRcXFwiPjxiPjxpPlwiICsgcHJvamVjdCArIFwiPC9pPjwvYj48L3NwYW4+XCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBtYXJrdXAgY29udGV4dHNcclxuICAgICAgICBsZXQgY29udGV4dHM6IHN0cmluZ1tdID0gdGFzay5jb250ZXh0cztcclxuICAgICAgICBjb250ZXh0cy5mb3JFYWNoKChjdHgpID0+IHtcclxuICAgICAgICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChjdHggKyBcIig/IVswLTlBLVphLXpdKVwiLCBcImdcIik7XHJcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UocmVnZXgsIFwiPHNwYW4gY2xhc3M9XFxcInRleHQtbXV0ZWRcXFwiPjxiPjxpPlwiICsgY3R4ICsgXCI8L2k+PC9iPjwvc3Bhbj5cIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIG1hcmt1cCBjcmVhdGVkIGRhdGVcclxuICAgICAgICBsZXQgZGF0ZTogc3RyaW5nID0gdGFzay5jcmVhdGVkRGF0ZTtcclxuICAgICAgICBpZiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKGRhdGUsIFwiPHNwYW4gY2xhc3M9XFxcInRleHQtbXV0ZWQgaGlkZGVuLXhzXFxcIj48Yj48aT5cIiArIGRhdGUgKyBcIjwvaT48L2I+PC9zcGFuPlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gcmV0dXJucyB0aGUgYXBwcm9wcmlhdGUgZGlzcGxheSBjbGFzc2VzIGZvciB0aGlzIHRhc2tcclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHByaW9yaXR5IGJhc2VkIGNsYXNzIHRvIGFwcGx5IHRvIGEgVGFzayBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXREaXNwbGF5Q2xhc3NGb3JUYXNrKHRhc2s6IFRvZG9UeHRUYXNrKTogc3RyaW5nIHtcclxuICAgICAgICAvLyBnZXQgYSBsaXN0IG9mIHRoZSBjdXJyZW50IHRhc2tzIGFuZCBpdGVyYXRlIHRocm91Z2hcclxuICAgICAgICBsZXQgY2xzOiBzdHJpbmcgPSAnJztcclxuICAgICAgICBpZiAodGFzay5wcmlvcml0eSAhPT0gbnVsbCAmJiB0YXNrLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXNrLnByaW9yaXR5ID09PSBcIihBKVwiKSB7XHJcbiAgICAgICAgICAgICAgICBjbHMgKz0gXCIgdGV4dC1kYW5nZXJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGFzay5wcmlvcml0eSA9PT0gXCIoQilcIikge1xyXG4gICAgICAgICAgICAgICAgY2xzICs9IFwiIHRleHQtd2FybmluZ1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0YXNrLnByaW9yaXR5ID09PSBcIihDKVwiKSB7XHJcbiAgICAgICAgICAgICAgICBjbHMgKz0gXCIgdGV4dC1wcmltYXJ5XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjbHM7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVFbGVtZW50cygpOiB2b2lkIHtcclxuICAgICAgICAvKmpzaGludCBtdWx0aXN0cjogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciBiYXNlRWxlbWVudHMgPSAnIFxcXHJcbiAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCIgaWQ9XCJmaWxlRHJvcC1kaXZcIj4gXFxcclxuICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtOVwiPiBcXFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj4gXFxcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ0bi1ncm91cCBidG4tZ3JvdXAtanVzdGlmaWVkXCI+IFxcXHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImJ0biBidG4tYmxvY2sgYnRuLXByaW1hcnkgYnRuLWxnIGJ0bi1maWxlIGVsbGlwc2lzXCIgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCIgZGF0YS1wbGFjZW1lbnQ9XCJ0b3BcIiB0ZXh0PVwiJyArIFRvZG9UeHRSZXNvdXJjZXMuZ2V0KFwiSU1QT1JUXCIpICsgJ1wiPiBcXFxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1zYXZlXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImhpZGRlbi14c1wiPicgKyBUb2RvVHh0UmVzb3VyY2VzLmdldChcIklNUE9SVFwiKSArICc8L3NwYW4+IDxpbnB1dCBpZD1cImZpbGVVcGxvYWQtaW5wdXRcIiB0eXBlPVwiZmlsZVwiIHBsYWNlaG9sZGVyPVwiU2VsZWN0IHRvZG8udHh0IEZpbGVcIj4gXFxcclxuICAgICAgICAgICAgICAgIDwvYT4gXFxcclxuICAgICAgICAgICAgICAgIDxhIGlkPVwiYWRkVGFza0J1dHRvbi1idXR0b25cIiBjbGFzcz1cImJ0biBidG4tbGcgYnRuLXByaW1hcnkgZWxsaXBzaXNcIiBkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIiBkYXRhLXBsYWNlbWVudD1cInRvcFwiIHRleHQ9XCInICsgVG9kb1R4dFJlc291cmNlcy5nZXQoXCJBRERfVEFTS1wiKSArICdcIj4gXFxcclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcGx1c1wiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJoaWRkZW4teHNcIj4nICsgVG9kb1R4dFJlc291cmNlcy5nZXQoXCJBRERfVEFTS1wiKSArICc8L3NwYW4+IFxcXHJcbiAgICAgICAgICAgICAgICA8L2E+IFxcXHJcbiAgICAgICAgICAgICAgICA8YSBpZD1cInNhdmVGaWxlQnV0dG9uLWJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1sZyBidG4tcHJpbWFyeSBlbGxpcHNpc1wiIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiIGRhdGEtcGxhY2VtZW50PVwidG9wXCIgdGV4dD1cIicgKyBUb2RvVHh0UmVzb3VyY2VzLmdldChcIkVYUE9SVFwiKSArICdcIj4gXFxcclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tb3BlblwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJoaWRkZW4teHNcIj4nICsgVG9kb1R4dFJlc291cmNlcy5nZXQoXCJFWFBPUlRcIikgKyAnPC9zcGFuPiBcXFxyXG4gICAgICAgICAgICAgICAgPC9hPiBcXFxyXG4gICAgICAgICAgICAgICAgPGEgaWQ9XCJzaG93Q2xvc2VkLWxhYmVsXCIgY2xhc3M9XCJidG4gYnRuLWxnIGJ0bi1kYW5nZXIgZWxsaXBzaXNcIiBkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIiBkYXRhLXBsYWNlbWVudD1cInRvcFwiIHRleHQ9XCInICsgVG9kb1R4dFJlc291cmNlcy5nZXQoXCJTSE9XX0NMT1NFRFwiKSArICdcIj4gXFxcclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tb2stY2lyY2xlXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImhpZGRlbi14c1wiPicgKyBUb2RvVHh0UmVzb3VyY2VzLmdldChcIlNIT1dfQ0xPU0VEXCIpICsgJzwvc3Bhbj4gXFxcclxuICAgICAgICAgICAgICAgIDwvYT4gXFxcclxuICAgICAgICAgICAgPC9kaXY+IFxcXHJcbiAgICAgICAgPC9kaXY+IFxcXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPiBcXFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgaW5wdXQtZ3JvdXAtbGdcIj4gXFxcclxuICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cImZpbHRlci1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIicgKyBUb2RvVHh0UmVzb3VyY2VzLmdldChcIkZJTFRFUl9QTEFDRUhPTERFUl9URVhUXCIpICsgJ1wiPiBcXFxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC1idG5cIj4gXFxcclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiY2xlYXJGaWx0ZXItYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiB0eXBlPVwiYnV0dG9uXCIgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCIgZGF0YS1wbGFjZW1lbnQ9XCJ0b3BcIiB0ZXh0PVwiJyArIFRvZG9UeHRSZXNvdXJjZXMuZ2V0KFwiQ0xFQVJfRklMVEVSXCIpICsgJ1wiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmUtY2lyY2xlXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImhpZGRlbi14c1wiPicgKyBUb2RvVHh0UmVzb3VyY2VzLmdldChcIkNMRUFSX0ZJTFRFUlwiKSArICc8L3NwYW4+PC9idXR0b24+IFxcXHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+IFxcXHJcbiAgICAgICAgICAgIDwvZGl2PiBcXFxyXG4gICAgICAgIDwvZGl2PiBcXFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj4gXFxcclxuICAgICAgICAgICAgPGRpdiBpZD1cImxpc3RDb250YWluZXItZGl2XCI+PC9kaXY+IFxcXHJcbiAgICAgICAgPC9kaXY+IFxcXHJcbiAgICA8L2Rpdj4gXFxcclxuICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtM1wiPiBcXFxyXG4gICAgICAgIDxkaXYgaWQ9XCJwcmlvcml0aWVzLWRpdlwiIGNsYXNzPVwicGFuZWwgcGFuZWwtcHJpbWFyeVwiPiBcXFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtaGVhZGluZ1wiPiBcXFxyXG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwicGFuZWwtdGl0bGVcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi11cFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj4gJyArIFRvZG9UeHRSZXNvdXJjZXMuZ2V0KFwiUFJJT1JJVElFU1wiKSArICc8L2gzPiBcXFxyXG4gICAgICAgICAgICA8L2Rpdj4gXFxcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWJvZHlcIj4gXFxcclxuICAgICAgICAgICAgICAgIDx1bCBpZD1cInByaW9yaXRpZXMtdWxcIiBjbGFzcz1cImxpc3QtZ3JvdXBcIj48L3VsPiBcXFxyXG4gICAgICAgICAgICA8L2Rpdj4gXFxcclxuICAgICAgICA8L2Rpdj4gXFxcclxuICAgICAgICA8ZGl2IGlkPVwicHJvamVjdHMtZGl2XCIgY2xhc3M9XCJwYW5lbCBwYW5lbC1wcmltYXJ5XCI+IFxcXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1oZWFkaW5nXCI+IFxcXHJcbiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJwYW5lbC10aXRsZVwiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPiAnICsgVG9kb1R4dFJlc291cmNlcy5nZXQoXCJQUk9KRUNUU1wiKSArICc8L2gzPiBcXFxyXG4gICAgICAgICAgICA8L2Rpdj4gXFxcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWJvZHlcIj4gXFxcclxuICAgICAgICAgICAgICAgIDx1bCBpZD1cInByb2plY3RzLXVsXCIgY2xhc3M9XCJsaXN0LWdyb3VwXCI+PC91bD4gXFxcclxuICAgICAgICAgICAgPC9kaXY+IFxcXHJcbiAgICAgICAgPC9kaXY+IFxcXHJcbiAgICAgICAgPGRpdiBpZD1cImNvbnRleHRzLWRpdlwiIGNsYXNzPVwicGFuZWwgcGFuZWwtcHJpbWFyeVwiPiBcXFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtaGVhZGluZ1wiPiBcXFxyXG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwicGFuZWwtdGl0bGVcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi11cFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj4gJyArIFRvZG9UeHRSZXNvdXJjZXMuZ2V0KFwiQ09OVEVYVFNcIikgKyAnPC9oMz4gXFxcclxuICAgICAgICAgICAgPC9kaXY+IFxcXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1ib2R5XCI+IFxcXHJcbiAgICAgICAgICAgICAgICA8dWwgaWQ9XCJjb250ZXh0cy11bFwiIGNsYXNzPVwibGlzdC1ncm91cFwiPjwvdWw+IFxcXHJcbiAgICAgICAgICAgIDwvZGl2PiBcXFxyXG4gICAgICAgIDwvZGl2PiBcXFxyXG4gICAgPC9kaXY+IFxcXHJcbiAgICA8L2Rpdj4nO1xyXG5cclxuICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG90eHQnKTtcclxuICAgICAgICBpZiAoY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBiYXNlRWxlbWVudHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICogVGhpcyBqYXZhc2NyaXB0IHdhcyBjcmVhdGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbnMgYXRcclxuICogaHR0cDovL3RvZG90eHQuY29tLyBhbmQgaXMgaW50ZW5kZWQgdG8gYWxsb3cgdXNlcnMgdG8gYWNjZXNzIHRoZWlyXHJcbiAqIHRvZG8udHh0IGZpbGVzIGluIGEgdXNlci1mcmllbmRseSBhbmQgZWFzeSB0byB2aXN1YWxpemUgbWFubmVyLlxyXG4gKlxyXG4gKiBPbmNlIGluaXRpYWxseSB1cGxvYWRlZCwgdGhlIHRvZG8udHh0IGZpbGUgd2lsbFxyXG4gKiBiZSBsb2FkZWQgaW50byBhbiBIVE1MNSBsb2NhbFN0b3JhZ2UgYW5kIG1hbmFnZWQgZnJvbSB0aGVyZS5cclxuICogVGhlIHdlYiBwYWdlIHRoZW4gYWxsb3dzIGRvd25sb2FkaW5nIGNoYW5nZXMgYmFjayB0byB0aGUgdXNlclxyXG4gKiBpbiBhIHR4dCBmb3JtYXQgY29tcGxpYW50IHdpdGggdGhlIHRvZG8udHh0IHNwZWNpZmljYXRpb25zLCBidXRcclxuICogaGF2aW5nIHJlLXNvcnRlZCB0aGUgdGFza3MuXHJcbiAqIFxyXG4gKiBAQ3JlYXRlZDogMDgvMTQvMjAxMlxyXG4gKiBAQXV0aG9yOiBKYXNvbiBIb2x0IFNtaXRoIChiaWNhcmJvbjhAZ21haWwuY29tKVxyXG4gKiBAVmVyc2lvbjogMC4wLjFcclxuICogQ29weXJpZ2h0IChjKSAyMDEyIEphc29uIEhvbHQgU21pdGguIHRvZG9UeHRXZWJVaSBpcyBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxyXG4gKiBcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdG9kb1R4dFdlYlVpLlxyXG4gKiBcclxuICogdG9kb1R4dFdlYlVpIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcclxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cclxuICogXHJcbiAqIHRvZG9UeHRXZWJVaSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqIFxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIHRvZG9UeHRXZWJVaS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmltcG9ydCB7IFRvZG9UeHRBdHRyaWJ1dGVzIH0gZnJvbSAnLi90YXNrcy90b2RvLXR4dC1hdHRyaWJ1dGVzJztcclxuaW1wb3J0IHsgVG9kb1R4dFRhc2sgfSBmcm9tICcuL3Rhc2tzL3RvZG8tdHh0LXRhc2snO1xyXG5pbXBvcnQgeyBUb2RvVHh0VXRpbHMgfSBmcm9tICcuL2hlbHBlcnMvdG9kby10eHQtdXRpbHMnO1xyXG5pbXBvcnQgeyBUb2RvVHh0VmF1bHQgfSBmcm9tICcuL3N0b3JhZ2UvdG9kby10eHQtdmF1bHQnO1xyXG5cclxuZXhwb3J0IG1vZHVsZSBUb2RvVHh0IHtcclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gd2lsbCByZXR1cm4gYSBzb3J0ZWQgYXJyYXkgb2YgdGFza3MgYXMgcHVsbGVkIGZyb21cclxuICAgICAqIGxvY2FsU3RvcmFnZS5cclxuICAgICAqIEByZXR1cm5zIHthcnJheX0gYSBzb3J0ZWQgbGlzdCBvZiB0YXNrcyBmcm9tIGxvY2FsU3RvcmFnZVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0U29ydGVkVGFza0FycmF5KCk6IFRvZG9UeHRUYXNrW10ge1xyXG4gICAgICAgIC8vIHNvcnQgdGhlIGxpc3QgYW5kIHRoZW4gYWRkIGl0XHJcbiAgICAgICAgbGV0IHRhc2tBcnJheTogVG9kb1R4dFRhc2tbXSA9IFRvZG9UeHRWYXVsdC5nZXRBbGxUYXNrcygpO1xyXG4gICAgICAgIFRvZG9UeHRBdHRyaWJ1dGVzLnJlc2V0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHRhc2tBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB1cGRhdGVBdHRyaWJ1dGVzKHRhc2tBcnJheVtpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhc2tBcnJheS5zb3J0KGNvbXBhcmVUYXNrcyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0YXNrQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aWxsIHJldHVybiBhIGZpbHRlcmVkIGFycmF5IG9mIHRhc2tzIGJhc2VkIG9uIHRoZSBwYXNzZWQgaW5cclxuICAgICAqIGZpbHRlciBzdHJpbmcuICBNYXRjaGluZyB1c2VzIGFuIG9yZGVyZWQgZnV6enkgbWF0Y2ggc28gZm9yIHRoZSBmb2xsb3dpbmc6XHJcbiAgICAgKiBcIihBKSAyMDE0LTAzLTAyIGRvbid0IGZvcmdldCB0byBmaWxlIEByZXBvcnQgd2l0aCArSm9oblwiIGEgcGFzc2VkIGluIGZpbHRlclxyXG4gICAgICogc3RyaW5nIG9mIFwiZm9yIEpvaG5cIiB3aWxsIG1hdGNoLCBidXQgXCJKb2huIHJlcG9ydFwiIHdpbGwgbm90IG1hdGNoXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyU3RyIC0gYSBzdHJpbmcgY29udGFpbmluZyBjaGFyYWN0ZXJzIHRvIG1hdGNoIGFnYWluc3QgdGhlIGV4aXN0aW5nIHRhc2tzXHJcbiAgICAgKiBAcmV0dXJucyB7YXJyYXl9IGEgc29ydGVkIGxpc3Qgb2YgdGFza3MgbWF0Y2hpbmcgdGhlIHBhc3NlZCBpbiA8Yj48aT5maWx0ZXJTdHI8L2k+PC9iPlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0RmlsdGVyZWRUYXNrQXJyYXkoZmlsdGVyU3RyOiBzdHJpbmcpIHtcclxuICAgICAgICB2YXIgZmlsdGVyZWRUYXNrcyA9IFRvZG9UeHQuZ2V0U29ydGVkVGFza0FycmF5KCk7XHJcbiAgICAgICAgaWYgKGZpbHRlclN0ciAmJiBmaWx0ZXJTdHIgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSByZWdleCBtYXRjaGVyXHJcbiAgICAgICAgICAgIGxldCBmaWx0ZXJzOiBzdHJpbmdbXSA9IGZpbHRlclN0ci5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgIGxldCByU3RyOiBzdHJpbmcgPSAnJztcclxuICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGZpbHRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBmaWx0ZXJzW2ldLnJlcGxhY2UoLyhbLVxcKFxcKVxcW1xcXVxce1xcfStcXD8qXFwuJFxcXlxcfCw6IzxcXCFcXFxcXSkvZywgJ1xcXFwkMScpLnJlcGxhY2UoL1xceDA4L2csICdcXFxceDA4Jyk7XHJcbiAgICAgICAgICAgICAgICByU3RyICs9IFwiLiooXCIgKyBmaWx0ZXIgKyBcIikuKlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoclN0ciwgXCJpXCIpO1xyXG4gICAgICAgICAgICBsZXQgdGFza3M6IFRvZG9UeHRUYXNrW10gPSBmaWx0ZXJlZFRhc2tzLmZpbHRlcihmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQudGV4dC5tYXRjaChyZWdleCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmaWx0ZXJlZFRhc2tzID0gdGFza3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmlsdGVyZWRUYXNrcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHdpbGwgcHJvY2VzcyBlYWNoIGxpbmUgb2YgdGhlIHRvZG8udHh0LCBzb3J0IGJ5IHByaW9yaXR5LFxyXG4gICAgICogY3JlYXRpb25EYXRlLCBhbmQgc3RhdGUgKGFjdGl2ZSBvciBjbG9zZWQpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0b2RvVHh0IC0gdGhlIFwiXFxuXCIgZGVsaW1pdGVkIGxpbmVzIGZyb20gYSB0b2RvLnR4dCBmaWxlXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFwcGVuZCAtIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIGV4aXN0aW5nIHRhc2tzIHNob3VsZCBiZSBjbGVhcmVkXHJcbiAgICAgKiBmaXJzdCBvciBqdXN0IGFwcGVuZGVkIHRvIHdpdGggdGhlIG5ldyBmaWxlXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBwYXJzZVRvZG9UeHRGaWxlKHRvZG9UeHQ6IHN0cmluZywgYXBwZW5kPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICghYXBwZW5kKSB7XHJcbiAgICAgICAgICAgIC8vIGNsZWFyIHRoZSBTdG9yYWdlXHJcbiAgICAgICAgICAgIFRvZG9UeHRWYXVsdC5yZW1vdmVBbGxUYXNrcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbGluZXMgPSB0b2RvVHh0LnNwbGl0KFwiXFxuXCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gbGluZXMpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBsaW5lc1tpXSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpbmU6IHN0cmluZyA9IGxpbmVzW2ldO1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVtcHR5IGxpbmVzXHJcbiAgICAgICAgICAgICAgICBpZiAobGluZSAmJiBsaW5lICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyBUYXNrIGFuZCBhZGQgdG8gb3VyIGdsb2JhbCBsaXN0IGluIGl0J3MgcHJvcGVyIGxvY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGFzayhsaW5lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIGNyZWF0ZXMgYSBuZXcgdGFzayBhbmQgc2F2ZXMgdG8ge1RvZG9UeHRWYXVsdH1cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0U3RyIC0gYSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgcmF3IHRhc2tcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBJRCBvZiB0aGUgbmV3bHkgY3JlYXRlZCB7VG9kb1R4dC5UYXNrfVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayh0ZXh0U3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCB0ZXh0OiBzdHJpbmcgPSB0ZXh0U3RyIHx8ICcnO1xyXG4gICAgICAgIGxldCB0OiBUb2RvVHh0VGFzayA9IG5ldyBUb2RvVHh0VGFzayh0ZXh0KTtcclxuICAgICAgICBhZGRUYXNrKHQpO1xyXG4gICAgICAgIHJldHVybiB0LmlkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gd2lsbCBnZXQgYSBzcGVjaWZpZWQgdGFzayBmcm9tIFRvZG9UeHRWYXVsdCBieSBpZFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhc2tJZCAtIHRoZSB1bmlxdWUgaWQgb2YgdGhlIHRhc2sgdG8gYmUgcmV0dXJuZWRcclxuICAgICAqIEByZXR1cm5zIHtUb2RvVHh0VGFza30gYSB0YXNrIG9yIG51bGwgaWYgdGFzayBub3QgZm91bmRcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2sodGFza0lkOiBzdHJpbmcpOiBUb2RvVHh0VGFzayB7XHJcbiAgICAgICAgbGV0IHRhc2s6IFRvZG9UeHRUYXNrID0gVG9kb1R4dFZhdWx0LmdldFRhc2sodGFza0lkKTtcclxuICAgICAgICByZXR1cm4gdGFzaztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHVwZGF0ZXMgdGhlIHRhc2sgYW5kIHNhdmVzIGl0IHRvIHRoZSBUb2RvVHh0VmF1bHQgY2FjaGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YXNrSWQgLSB1bmlxdWUgSUQgdXNlZCB0byByZXRyaWV2ZSB0aGUgdGFzayBmcm9tIFN0b3JhZ2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdUZXh0IC0gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB1cGRhdGVkLCByYXcgdGFzayB0ZXh0XHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0YXNrIGNvdWxkIGJlIHVwZGF0ZWQgb3RoZXJ3aXNlIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrKHRhc2tJZDogc3RyaW5nLCBuZXdUZXh0OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAvLyByZS1wYXJzZSB0YXNrXHJcbiAgICAgICAgbGV0IHRhc2s6IFRvZG9UeHRUYXNrO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRhc2sgPSBnZXRUYXNrKHRhc2tJZCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0YXNrID0gbmV3IFRvZG9UeHRUYXNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhc2sucGFyc2VJbnB1dChuZXdUZXh0KTtcclxuXHJcbiAgICAgICAgLy8gb3ZlcndyaXRlIHN0b3JhZ2Ugd2l0aCB1cGRhdGVkIHRhc2tcclxuICAgICAgICBUb2RvVHh0LmFkZFRhc2sodGFzayk7XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gYWRkcyB0aGlzIHRhc2sgdG8gdGhlIGJyb3dzZXIncyBsb2NhbCBjYWNoZSBhbGxvd2luZyBmb3JcclxuICAgICAqIHJldGFpbmVkIGRhdGEgb24gc3Vic2VxdWVudCByZWxvYWRzIG9mIHRoZSBwYWdlXHJcbiAgICAgKiBAcGFyYW0ge1RvZG9UeHRUYXNrfSB0YXNrIC0gYSB0YXNrIHRvIGJlIGFkZGVkIHRvIFN0b3JhZ2VcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFkZFRhc2sodGFzazogVG9kb1R4dFRhc2spIHtcclxuICAgICAgICBUb2RvVHh0VmF1bHQuYWRkVGFzayh0YXNrKTtcclxuICAgICAgICB1cGRhdGVBdHRyaWJ1dGVzKHRhc2spO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gd2lsbCBhcHBlbmQgYW4gXCJ4IFlZWVktTU0tREQgXCIgdG8gYSBzdG9yZWRcclxuICAgICAqIHRhc2sgaWYgbm90IGFscmVhZHkgY2xvc2VkIGFuZCB3aWxsIHJlbW92ZSBhbnkgcHJpb3JpdHlcclxuICAgICAqIGRlY2xhcmF0aW9ucyBpbiB0aGUgdGV4dCBvZiB0aGUgVGFza1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhc2tJZCAtIHVuaXF1ZSBJRCB1c2VkIHRvIHJldHJpZXZlIHRoZSB0YXNrIGZyb20gU3RvcmFnZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGFzayBjb3VsZCBiZSBjbG9zZWQsIG90aGVyd2lzZSBmYWxzZVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gY2xvc2VUYXNrKHRhc2tJZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgdmFyIHRhc2sgPSBnZXRUYXNrKHRhc2tJZCk7XHJcblxyXG4gICAgICAgIGlmICh0YXNrICYmIHRhc2suaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSB0YXNrLnRleHQ7XHJcbiAgICAgICAgICAgIGlmICh0YXNrLnByaW9yaXR5KSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHRhc2sucHJpb3JpdHksIFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRleHQgPSBcInggXCIgKyBUb2RvVHh0VXRpbHMuZm9ybWF0RGF0ZShuZXcgRGF0ZSgpKSArIFwiIFwiICsgdGV4dDtcclxuICAgICAgICAgICAgdXBkYXRlVGFzayh0YXNrLmlkLCB0ZXh0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHdpbGwgcmVtb3ZlIFwieCBZWVlZLU1NLUREIFwiIGZyb20gYSBzdG9yZWRcclxuICAgICAqIHRhc2sgaWYgbm90IGFscmVhZHkgYWN0aXZlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFza0lkIC0gdW5pcXVlIElEIHVzZWQgdG8gcmV0cmlldmUgdGhlIHRhc2sgZnJvbSBTdG9yYWdlXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0YXNrIGNvdWxkIGJlIGFjdGl2YXRlZCwgb3RoZXJ3aXNlIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0ZVRhc2sodGFza0lkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICB2YXIgdGFzayA9IGdldFRhc2sodGFza0lkKTtcclxuICAgICAgICBpZiAodGFzayAmJiAhdGFzay5pc0FjdGl2ZSkge1xyXG4gICAgICAgICAgICBsZXQgdGV4dDogc3RyaW5nID0gdGFzay50ZXh0O1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9eKHggKS8sIFwiXCIpLnJlcGxhY2UodGFzay5jb21wbGV0ZWREYXRlICsgXCIgXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB1cGRhdGVUYXNrKHRhc2suaWQsIHRleHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBAaWdub3JlICovXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVBdHRyaWJ1dGVzKHRhc2s6IFRvZG9UeHRUYXNrKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRhc2suaXNBY3RpdmUgfHwgVG9kb1R4dFZhdWx0LmdldENvbmZpZygpLnNob3dDbG9zZWQpIHtcclxuICAgICAgICAgICAgLy8gZ2V0IHRoZSBwcmlvcml0eSBhbmQgYWRkIHRvIGdsb2JhbCBmaWx0ZXIgaGFzaHNldFxyXG4gICAgICAgICAgICBpZiAodGFzay5wcmlvcml0eSkge1xyXG4gICAgICAgICAgICAgICAgVG9kb1R4dEF0dHJpYnV0ZXMucHJpb3JpdGllcy5hZGQodGFzay5wcmlvcml0eSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGdldCBlYWNoIHByb2plY3QgYW5kIGFkZCB0byB0aGUgZ2xvYmFsIGZpbHRlciBoYXNoc2V0XHJcbiAgICAgICAgICAgIHRhc2sucHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb2plY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBUb2RvVHh0QXR0cmlidXRlcy5wcm9qZWN0cy5hZGQocHJvamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gZ2V0IGVhY2ggY29udGV4dCBhbmQgYWRkIHRvIHRoZSBnbG9iYWwgZmlsdGVyIGhhc2hzZXRcclxuICAgICAgICAgICAgdGFzay5jb250ZXh0cy5mb3JFYWNoKChjb250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFRvZG9UeHRBdHRyaWJ1dGVzLmNvbnRleHRzLmFkZChjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBAaWdub3JlICovXHJcbiAgICBmdW5jdGlvbiBjb21wYXJlVGFza3ModGFza0E6IFRvZG9UeHRUYXNrLCB0YXNrQjogVG9kb1R4dFRhc2spIHtcclxuICAgICAgICAvLyBmdW5jdGlvbiB3aWxsIGFsbG93IHNvcnRpbmcgb2YgdGFza3MgYnkgdGhlIGZvbGxvd2luZ1xyXG4gICAgICAgIC8vIGNyaXRlcmlhOiAoMSkgYWN0aXZlIHZzLiBjbG9zZWQgKDIpIHByaW9yaXR5ICgzKSBjcmVhdGVkIGRhdGVcclxuICAgICAgICAvLyAoNCkgY29tcGxldGVkIGRhdGVcclxuICAgICAgICB2YXIgYUFjdGl2ZSA9IHRhc2tBLmlzQWN0aXZlO1xyXG4gICAgICAgIHZhciBiQWN0aXZlID0gdGFza0IuaXNBY3RpdmU7XHJcbiAgICAgICAgdmFyIGFQcmkgPSB0YXNrQS5wcmlvcml0eTtcclxuICAgICAgICB2YXIgYlByaSA9IHRhc2tCLnByaW9yaXR5O1xyXG4gICAgICAgIHZhciBhQ3JlYXRlZCA9IHRhc2tBLmNyZWF0ZWREYXRlO1xyXG4gICAgICAgIHZhciBiQ3JlYXRlZCA9IHRhc2tCLmNyZWF0ZWREYXRlO1xyXG4gICAgICAgIHZhciBhQ29tcGxldGVkID0gdGFza0EuY29tcGxldGVkRGF0ZTtcclxuICAgICAgICB2YXIgYkNvbXBsZXRlZCA9IHRhc2tCLmNvbXBsZXRlZERhdGU7XHJcblxyXG4gICAgICAgIC8vICgxKSBjb21wYXJlIGFjdGl2ZSB2cy4gY2xvc2VkXHJcbiAgICAgICAgaWYgKGFBY3RpdmUgIT09IGJBY3RpdmUpIHtcclxuICAgICAgICAgICAgLy8gcHJpb3JpdGl6ZSBhY3RpdmUgb3ZlciBjbG9zZWRcclxuICAgICAgICAgICAgaWYgKGFBY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gKDIpIGNvbXBhcmUgcHJpb3JpdHlcclxuICAgICAgICAgICAgaWYgKGFQcmkgIT09IGJQcmkpIHtcclxuICAgICAgICAgICAgICAgIC8vIG9yZGVyIGJ5IHByaW9yaXR5LCBidXQgZmF2b3IgaGF2aW5nIHByaW9yaXR5IG92ZXIgbm90XHJcbiAgICAgICAgICAgICAgICBpZiAoIWJQcmkgfHwgYVByaSA8IGJQcmkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFhUHJpIHx8IGFQcmkgPiBiUHJpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vICgzKSBjb21wYXJlIGNyZWF0ZWQgZGF0ZVxyXG4gICAgICAgICAgICAgICAgaWYgKGFDcmVhdGVkICE9PSBiQ3JlYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9yZGVyIGJ5IGNyZWF0ZWQgZGF0ZSBhc2NlbmRpbmcgKG9sZGVzdCBvbmVzIGZpcnN0KVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhQ3JlYXRlZCA8IGJDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyAoNCkgY29tcGFyZSBjb21wbGV0ZWQgZGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhQ29tcGxldGVkICE9PSBiQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yZGVyIGJ5IGNvbXBsZXRlZCBkYXRlIGRlc2NlbmRpbmcgKGxhdGVzdCBvbmVzIGZpcnN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYUNvbXBsZXRlZCA+IGJDb21wbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBvYmplY3RzIGFyZSBlcXVpdmFsZW50XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbn0iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBUaGlzIGphdmFzY3JpcHQgd2FzIGNyZWF0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9ucyBhdFxyXG4gKiBodHRwOi8vdG9kb3R4dC5jb20vIGFuZCBpcyBpbnRlbmRlZCB0byBhbGxvdyB1c2VycyB0byBhY2Nlc3MgdGhlaXJcclxuICogdG9kby50eHQgZmlsZXMgaW4gYSB1c2VyLWZyaWVuZGx5IGFuZCBlYXN5IHRvIHZpc3VhbGl6ZSBtYW5uZXIuXHJcbiAqXHJcbiAqIE9uY2UgaW5pdGlhbGx5IHVwbG9hZGVkLCB0aGUgdG9kby50eHQgZmlsZSB3aWxsXHJcbiAqIGJlIGxvYWRlZCBpbnRvIGFuIEhUTUw1IGxvY2FsU3RvcmFnZSBhbmQgbWFuYWdlZCBmcm9tIHRoZXJlLlxyXG4gKiBUaGUgd2ViIHBhZ2UgdGhlbiBhbGxvd3MgZG93bmxvYWRpbmcgY2hhbmdlcyBiYWNrIHRvIHRoZSB1c2VyXHJcbiAqIGluIGEgdHh0IGZvcm1hdCBjb21wbGlhbnQgd2l0aCB0aGUgdG9kby50eHQgc3BlY2lmaWNhdGlvbnMsIGJ1dFxyXG4gKiBoYXZpbmcgcmUtc29ydGVkIHRoZSB0YXNrcy5cclxuICogXHJcbiAqIEBDcmVhdGVkOiAwOC8xNC8yMDEyXHJcbiAqIEBBdXRob3I6IEphc29uIEhvbHQgU21pdGggKGJpY2FyYm9uOEBnbWFpbC5jb20pXHJcbiAqIEBWZXJzaW9uOiAwLjAuMVxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgSmFzb24gSG9sdCBTbWl0aC4gdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiB0b2RvVHh0V2ViVWkuXHJcbiAqIFxyXG4gKiB0b2RvVHh0V2ViVWkgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxyXG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxyXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxyXG4gKiBcclxuICogdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICogXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggdG9kb1R4dFdlYlVpLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuaW1wb3J0IHsgVG9kb1R4dENvbmZpZyB9IGZyb20gXCIuL3RvZG8tdHh0LWNvbmZpZ1wiO1xyXG5pbXBvcnQgeyBUb2RvVHh0VGFzayB9IGZyb20gXCIuLi90YXNrcy90b2RvLXR4dC10YXNrXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVG9kb1RleHRQZXJzaXN0YW5jZSB7XHJcbiAgICB0YXNrczogVGFza0l0ZW1bXSA9IFtdO1xyXG4gICAgY29uZmlnOiBUb2RvVHh0Q29uZmlnID0geyBzaG93Q2xvc2VkOiBmYWxzZSB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRhc2tzPzogTWFwPHN0cmluZywgVG9kb1R4dFRhc2s+LCBjb25maWc/OiBUb2RvVHh0Q29uZmlnKSB7XHJcbiAgICAgICAgaWYgKHRhc2tzKSB7XHJcbiAgICAgICAgICAgIHRhc2tzLmZvckVhY2goKHZhbHVlOiBUb2RvVHh0VGFzaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YXNrcy5wdXNoKHtpZDogdmFsdWUuaWQsIHRleHQ6IHZhbHVlLnRleHR9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb25maWcpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5pbnRlcmZhY2UgVGFza0l0ZW0ge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIHRleHQ6IHN0cmluZztcclxufSIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqIFRoaXMgamF2YXNjcmlwdCB3YXMgY3JlYXRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb25zIGF0XHJcbiAqIGh0dHA6Ly90b2RvdHh0LmNvbS8gYW5kIGlzIGludGVuZGVkIHRvIGFsbG93IHVzZXJzIHRvIGFjY2VzcyB0aGVpclxyXG4gKiB0b2RvLnR4dCBmaWxlcyBpbiBhIHVzZXItZnJpZW5kbHkgYW5kIGVhc3kgdG8gdmlzdWFsaXplIG1hbm5lci5cclxuICpcclxuICogT25jZSBpbml0aWFsbHkgdXBsb2FkZWQsIHRoZSB0b2RvLnR4dCBmaWxlIHdpbGxcclxuICogYmUgbG9hZGVkIGludG8gYW4gSFRNTDUgbG9jYWxTdG9yYWdlIGFuZCBtYW5hZ2VkIGZyb20gdGhlcmUuXHJcbiAqIFRoZSB3ZWIgcGFnZSB0aGVuIGFsbG93cyBkb3dubG9hZGluZyBjaGFuZ2VzIGJhY2sgdG8gdGhlIHVzZXJcclxuICogaW4gYSB0eHQgZm9ybWF0IGNvbXBsaWFudCB3aXRoIHRoZSB0b2RvLnR4dCBzcGVjaWZpY2F0aW9ucywgYnV0XHJcbiAqIGhhdmluZyByZS1zb3J0ZWQgdGhlIHRhc2tzLlxyXG4gKiBcclxuICogQENyZWF0ZWQ6IDA4LzE0LzIwMTJcclxuICogQEF1dGhvcjogSmFzb24gSG9sdCBTbWl0aCAoYmljYXJib244QGdtYWlsLmNvbSlcclxuICogQFZlcnNpb246IDAuMC4xXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMiBKYXNvbiBIb2x0IFNtaXRoLiB0b2RvVHh0V2ViVWkgaXMgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRvZG9UeHRXZWJVaS5cclxuICogXHJcbiAqIHRvZG9UeHRXZWJVaSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XHJcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXHJcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXHJcbiAqIFxyXG4gKiB0b2RvVHh0V2ViVWkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKiBcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCB0b2RvVHh0V2ViVWkuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5pbXBvcnQgeyBUb2RvVHh0VXRpbHMgfSBmcm9tIFwiLi4vaGVscGVycy90b2RvLXR4dC11dGlsc1wiO1xyXG5cclxuZXhwb3J0IG1vZHVsZSBUb2RvVHh0UmVzb3VyY2VzIHtcclxuICAgIHZhciByZWNzOiBNYXA8c3RyaW5nLCBhbnk+ID0gbmV3IE1hcDxzdHJpbmcsIGFueT4oKTtcclxuXHJcblx0ZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyKGxhbmdMb2NhbGU6IHN0cmluZywgcmVzb3VyY2VPYmo6IGFueSk6IHZvaWQge1xyXG5cdFx0cmVjcy5zZXQobGFuZ0xvY2FsZSwgcmVzb3VyY2VPYmopO1xyXG4gICAgfVxyXG4gICAgXHJcblx0ZXhwb3J0IGZ1bmN0aW9uIGdldChrZXk6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRsZXQgcmVjOiBhbnkgPSByZWNzLmdldChUb2RvVHh0VXRpbHMuZ2V0TGFuZ3VhZ2UoKSk7XHJcblx0XHRpZiAoIXJlYykge1xyXG5cdFx0XHRyZWMgPSByZWNzLmdldChcImVuLXVzXCIpOyAvLyBmYWxsYmFjayB0byBlbi1VU1xyXG5cdFx0fVxyXG5cdFx0bGV0IHZhbDogc3RyaW5nID0gcmVjW2tleV07XHJcblx0XHRpZiAoIXZhbCkge1xyXG5cdFx0XHR0aHJvdyBgcmVxdWVzdGVkIHJlc291cmNlIG5vdCBmb3VuZDogJHtrZXl9YDtcclxuXHRcdH1cclxuXHRcdHJldHVybiB2YWw7XHJcbiAgICB9XHJcbn1cclxuXHJcblRvZG9UeHRSZXNvdXJjZXMucmVnaXN0ZXIoXCJlbi11c1wiLCB7XHJcblx0T1ZFUldSSVRFX0NPTkZJUk06IFwiVGhpcyB3aWxsIG92ZXJ3cml0ZSBhbnkgZXhpc3RpbmcgbGlzdC4gIEFyZSB5b3Ugc3VyZSB5b3Ugd2lzaCB0byBwcm9jZWVkP1wiLFxyXG5cdERFTEVURV9DT05GSVJNOiBcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGFzaz9cIixcclxuICAgIElNUE9SVDogXCJJbXBvcnRcIixcclxuICAgIEFERF9UQVNLOiBcIkFkZCBUYXNrXCIsXHJcbiAgICBFWFBPUlQ6IFwiRXhwb3J0XCIsXHJcbiAgICBTSE9XX0NMT1NFRDogXCJTaG93IENsb3NlZFwiLFxyXG4gICAgRklMVEVSX1BMQUNFSE9MREVSX1RFWFQ6IFwiVHlwZSBmaWx0ZXIocylcIixcclxuICAgIENMRUFSX0ZJTFRFUjogXCJDbGVhciBGaWx0ZXJcIixcclxuICAgIFBSSU9SSVRJRVM6IFwiUHJpb3JpdGllc1wiLFxyXG4gICAgUFJPSkVDVFM6IFwiUHJvamVjdHNcIixcclxuICAgIENPTlRFWFRTOiBcIkNvbnRleHRzXCIsXHJcbiAgICBDTE9TRTogXCJDbG9zZVwiLFxyXG4gICAgRURJVF9UQVNLX0hFQURFUjogXCJFZGl0IFRhc2tcIixcclxuICAgIEFERDogXCJBZGRcIixcclxuICAgIFVQREFURTogXCJVcGRhdGVcIixcclxuICAgIFBSRVZJRVc6IFwiUHJldmlld1wiLFxyXG4gICAgREVMRVRFOiBcIkRlbGV0ZVwiLFxyXG59KTsiXSwic291cmNlUm9vdCI6IiJ9