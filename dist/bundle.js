!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.formatDate=function(e){var t=e.getFullYear(),n=(e.getMonth()+1).toString();n=n.length<2?"0"+n:n;var o=e.getDate().toString();return o=o.length<2?"0"+o:o,String(t+"-"+n+"-"+o)},e.getLanguage=function(){return(window.navigator.userLanguage||window.navigator.language).toLowerCase()},e.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},e.htmlEncode=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\s{2}/g," &nbsp;")},e.htmlUnencode=function(e){return String(e).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&nbsp;/g," ")}}(t.TodoTxtUtils||(t.TodoTxtUtils={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(){function e(e){this.projects=[],this.contexts=[],this.metadatas=[],this.id=o.TodoTxtUtils.guid(),this.isActive=!0,this.parseInput(e)}return e.prototype.parseInput=function(e){e&&(this.text=e,this.parseStatus(),this.parsePriority(),this.parseCompletedDate(),this.parseCreatedDate(),this.parseProjects(),this.parseContexts())},e.prototype.parseStatus=function(){var e=this.text.match(/^(x )/);e&&e.length>0?this.isActive=!1:this.isActive=!0},e.prototype.parsePriority=function(){var e=null,t=this.text.match(/^(\([A-Z]\)[\s]+)/);t&&(e=t[0].replace(/[\s]*/g,"")),this.priority=e},e.prototype.parseCompletedDate=function(){var e=null;if(!this.isActive){var t=this.getDatesFromText();t&&(e=t[0]?t[0].replace(/[\s]*/g,""):null)}this.completedDate=e},e.prototype.parseCreatedDate=function(){var e=null,t=this.getDatesFromText();t&&(this.isActive?e=t[0]?t[0].replace(/[\s]*/g,""):null:t.length>1&&(e=t[1]?t[1].replace(/[\s]*/g,""):null)),this.createdDate=e},e.prototype.getDatesFromText=function(){var e=[],t=this.text.match(/(?:\s|^)(\d{4}-\d{2}-\d{2})(?=\s)/g);if(t)for(var n=0;n<t.length;n++)e.push(t[n]);return e},e.prototype.parseProjects=function(){var e=new Set,t=this.text.match(/((\s|^)[\(\{\["']?\+[0-9A-Za-z]+[\)\}\]"']?(?=\s|$))/g);if(t)for(var n=0;n<t.length;n++){var o=t[n].replace(/[\s]*/g,"").replace(/[\(\{\[\)\}\]"']/g,"");e.add(o)}this.projects=Array.from(e)},e.prototype.parseContexts=function(){var e=new Set,t=this.text.match(/((\s|^)[\(\{\["']?\@[0-9A-Za-z]+[\)\}\]"']?(?=\s|$))/g);if(t)for(var n=0;n<t.length;n++){var o=t[n].replace(/[\s]*/g,"").replace(/[\(\{\[\)\}\]"']/g,"");e.add(o)}this.contexts=Array.from(e)},e}();t.TodoTxtTask=a},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.priorities=new Set,e.projects=new Set,e.contexts=new Set,e.reset=function(){e.priorities=new Set,e.projects=new Set,e.contexts=new Set}}(t.TodoTxtAttributes||(t.TodoTxtAttributes={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(8);!function(e){var t=new Map,n={showClosed:!1},r=0;function i(){try{var e=new a.TodoTextPersistance(t,n);localStorage.setItem("todo-txt",JSON.stringify(e))}catch(e){0==r&&(alert("WARNING: unable to store Tasks in localStorage; ensure you export your tasks before you close the browser or they will be lost!"),console.error("TodoTxt unable to cache data in localStorage due to: "+e),r++)}}function s(){try{var e=localStorage.getItem("todo-txt");if(e){var a=JSON.parse(e);if(a.tasks){t.clear();for(var i=0;i<a.tasks.length;i++){var s=a.tasks[i];if(s.text&&s.id){var c=new o.TodoTxtTask(s.text);c.id=s.id,t.set(c.id,c)}}n=a.config}}}catch(e){0==r&&console.info("TodoTxt unable to load cache from localStorage due to: "+e)}}e.addTask=function(e){t.has(e.id)&&t.delete(e.id),t.set(e.id,e),i()},e.removeTask=function(e){var n=!1;return t.has(e)&&(t.delete(e),n=!0),i(),n},e.removeAllTasks=function(){t=new Map,i()},e.getTask=function(e){if(s(),t.has(e))return t.get(e);throw new Error("no TodoTxtTask with ID of '"+e+"' could be found")},e.getAllTasks=function(){s();var e=[];return t.forEach((function(t){e.push(t)})),e},e.getConfig=function(){return s(),n},e.setConfig=function(e){n=e,i()},e._clear=function(){t=new Map,n={showClosed:!1},localStorage.removeItem("todo-txt")}}(t.TodoTxtVault||(t.TodoTxtVault={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(6);o("document").ready((function(){a.TodoTxtView.initializeElements(),a.TodoTxtView.refreshUi()}))},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(7),s=n(2),c=n(9),l=n(0),d=n(3),u=n(4);!function(e){function t(e){var t="glyphicon-ok",n="btn-default",o=$(e);e.isActive||(t="glyphicon-remove",n="btn-danger");var a=document.createElement("div");a.className="btn-group btn-block",a.id=e.id;var r=document.createElement("span");r.classList.add("glyphicon"),r.classList.add(t);var i=document.createElement("span");i.classList.add("col-xs-2"),i.classList.add("btn"),i.classList.add("btn-lg"),i.classList.add(n),i.onclick=function(t){z(e.id),q()},i.appendChild(r),a.appendChild(i);var s=document.createElement("button");return s.classList.add("col-xs-10"),s.classList.add("ellipsis"),s.classList.add("btn"),s.classList.add("btn-lg"),s.classList.add(n),s.innerHTML=o,s.onclick=function(t){return v(e.id)},a.appendChild(s),a}function n(e){var t=document.createElement("li");return t.id=e,t.className="list-group-item",t.onclick=function(t){I(e)},t.onmouseover=function(e){t.className+=" active"},t.onmouseout=function(e){t.className=t.className.replace(/(( |^)active)/,"")},t.innerHTML='<h4 class="ellipsis">'+e+"</h4>",t}function p(){var e=document.querySelector("#filter-input").value,t=i.TodoTxt.getFilteredTaskArray(e);if(!u.TodoTxtVault.getConfig().showClosed){var n=t.filter((function(e){return e.isActive}));t=n}t&&t.length>0&&t.forEach((function(e){f(e)}))}function f(e){document.querySelector("#listContainer-div").appendChild(t(e))}function v(t){var n,o=!1;t?n=i.TodoTxt.getTask(t):(n=new r.TodoTxtTask,o=!0),k(e.mainEventHandlers);var a=function(e,t){var n=document.createElement("span");s(n).attr("aria-hidden","true"),n.innerHTML=" &times;";var o=document.createElement("button");o.type="button",o.id="modalEditClose-button",o.classList.add("close"),s(o).attr("data-dismiss","modal"),s(o).attr("aria-label",c.TodoTxtResources.get("CLOSE")),o.onclick=function(e){g()},o.appendChild(n);var a=document.createElement("h4");a.classList.add("modal-title"),a.id="modalEdit-label";var r=document.createElement("div");r.classList.add("modal-header"),r.appendChild(o),r.appendChild(a);var i=document.createElement("div");i.id="modalEdit-textarea",i.classList.add("textarea"),i.contentEditable="true";var l=$(e).replace(/hidden-xs/,"");i.innerHTML=l;var d=document.createElement("div");d.classList.add("modal-body"),d.appendChild(i);var u=document.createElement("span");u.classList.add("hidden-xs");var p=t?c.TodoTxtResources.get("ADD"):c.TodoTxtResources.get("UPDATE");u.innerText=" "+p;var f=document.createElement("span");f.classList.add("glyphicon"),f.classList.add("glyphicon-ok");var v=document.createElement("a");v.type="button",v.id="modalEditSave-button",v.classList.add("btn"),v.classList.add("btn-lg"),v.classList.add("btn-success"),s(v).attr("data-toggle","tooltip"),s(v).attr("data-placement","top"),s(v).attr("text",p),v.onclick=function(e){D()},v.appendChild(f),v.appendChild(u);var h=document.createElement("span");h.classList.add("hidden-xs"),h.innerText=" "+c.TodoTxtResources.get("PREVIEW");var m=document.createElement("span");m.classList.add("glyphicon"),m.classList.add("glyphicon-eye-open");var x=document.createElement("a");x.type="button",x.id="modalEditPreview-button",x.classList.add("btn"),x.classList.add("btn-lg"),x.classList.add("btn-primary"),s(x).attr("data-toggle","tooltip"),s(x).attr("data-placement","top"),s(x).attr("text",c.TodoTxtResources.get("PREVIEW")),x.onclick=function(e){T()},x.appendChild(m),x.appendChild(h);var y=document.createElement("span");y.classList.add("hidden-xs"),y.innerText=" "+c.TodoTxtResources.get("DELETE");var b=document.createElement("span");b.classList.add("glyphicon"),b.classList.add("glyphicon-floppy-remove");var E=document.createElement("a");E.type="button",E.id="modalEditDelete-button",E.classList.add("btn"),E.classList.add("btn-lg"),E.classList.add("btn-danger"),s(E).attr("data-toggle","tooltip"),s(E).attr("data-placement","top"),s(E).attr("text",c.TodoTxtResources.get("DELETE")),E.onclick=function(e){_()},E.appendChild(b),E.appendChild(y);var C=document.createElement("div");C.classList.add("btn-group"),C.classList.add("btn-group-justified"),C.appendChild(v),C.appendChild(x),t||C.appendChild(E);var k=document.createElement("div");k.classList.add("modal-footer"),k.appendChild(C);var S=document.createElement("div");S.classList.add("modal-content"),S.appendChild(r),S.appendChild(d),S.appendChild(k);var w=document.createElement("div");w.classList.add("modal-dialog"),w.appendChild(S);var L=document.createElement("div");return L.classList.add("modal"),L.id="modalEdit-div",L.tabIndex=-1,s(L).attr("role","dialog"),s(L).attr("aria-labelledby","modalEdit-label"),s(L).attr("aria-hidden","true"),s(L).attr("task-id",e.id),L.appendChild(w),L}(n,o);document.body.appendChild(a),C(e.modalEventHandlers),s(a).show(0),document.querySelector("#modalEdit-textarea").focus()}function T(){var e=document.querySelector("#modalEdit-textarea");if(e){var t=e.textContent,n=new r.TodoTxtTask(t);e.innerHTML=$(n)}}function g(){k(e.modalEventHandlers),s("#modalEdit-div").remove(),C(e.mainEventHandlers),q()}function h(){var e=document.querySelector("#priorities-ul");d.TodoTxtAttributes.priorities.forEach((function(t){if(t||u.TodoTxtVault.getConfig().showClosed){var o=n(t);e.appendChild(o)}}))}function m(){document.querySelector("#priorities-ul").innerHTML=""}function x(){var e=document.querySelector("#projects-ul");d.TodoTxtAttributes.projects.forEach((function(t){if(t||u.TodoTxtVault.getConfig().showClosed){var o=n(t);e.appendChild(o)}}))}function y(){document.querySelector("#projects-ul").innerHTML=""}function b(){var e=document.querySelector("#contexts-ul");d.TodoTxtAttributes.contexts.forEach((function(t){if(t||u.TodoTxtVault.getConfig().showClosed){var o=n(t);e.appendChild(o)}}))}function E(){document.querySelector("#contexts-ul").innerHTML=""}function C(e){e.forEach((function(e){var t=!1;e.uc&&(t=e.uc);try{e.el().addEventListener(e.ev,e.fn,t)}catch(e){console.error(e)}}))}function k(e){e.forEach((function(e){var t=!1;e.uc&&(t=e.uc);try{e.el().removeEventListener(e.ev,e.fn,t)}catch(e){console.error(e)}}))}function S(e){83==e.keyCode&&e.altKey&&J()}function w(e){67==e.keyCode&&e.altKey&&q()}function L(e){84==e.keyCode&&e.altKey&&v()}function A(e){B(e)}function R(e){e.keyCode&&13===e.keyCode&&e.altKey&&D()}function D(){var e=document.querySelector("#modalEdit-div"),t=s(e).attr("task-id"),n=document.querySelector("#modalEdit-textarea").textContent;if(n=l.TodoTxtUtils.htmlUnencode(n),i.TodoTxt.updateTask(t,n)){q();try{g()}catch(e){}}}function P(e){27!==e.keyCode&&0!==e.keyCode||g()}function _(){var e=document.querySelector("#modalEdit-div"),t=s(e).attr("task-id"),n=i.TodoTxt.getTask(t);if(n&&confirm(c.TodoTxtResources.get("DELETE_CONFIRM")+'\n\t"'+n.text+'"')&&u.TodoTxtVault.removeTask(t)){q();try{g()}catch(e){}}}var O;function j(){O&&window.clearTimeout(O),O=window.setTimeout((function(){H()}),500)}function M(e){e.keyCode&&80===e.keyCode&&e.altKey&&T()}function q(){U(u.TodoTxtVault.getConfig().showClosed),k(e.mainEventHandlers),N(),m(),y(),E(),F(),p(),h(),x(),b(),C(e.mainEventHandlers)}function I(e){e&&(document.querySelector("#filter-input").value=e,j())}function F(){document.querySelector("#filter-input").value=""}function N(){document.querySelector("#listContainer-div").innerHTML=""}function H(){N(),p()}function V(){U(!!!document.querySelector("#showClosed-label").className.match(/(( |^)btn-success)/))}function U(e){var t=document.querySelector("#showClosed-label");t.className=e?t.className.replace(/(( |^)btn-danger)/," btn-success"):t.className.replace(/(( |^)btn-success)/," btn-danger"),u.TodoTxtVault.setConfig({showClosed:e})}function K(e){var t=document.querySelector("#"+e+" .panel-heading"),n=document.querySelector("#"+e+" .panel-body");!!n.className.match(/(( |^)collapse)/)?W(t,n):X(t,n)}function W(e,t){var n=e.querySelector(".glyphicon");t.className=t.className.replace(/(( |^)collapse)/g,""),n.className=n.className.replace(/(( |^)glyphicon-chevron-down)/," glyphicon-chevron-up")}function X(e,t){var n=e.querySelector(".glyphicon");t.className+=" collapse",n.className=n.className.replace(/(( |^)glyphicon-chevron-up)/," glyphicon-chevron-down")}function z(e){var t=i.TodoTxt.getTask(e);t&&(t.isActive?i.TodoTxt.closeTask(e):i.TodoTxt.activateTask(e))}function B(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;if(t.length>0){var n=t[0],o=new FileReader;o.onloadend=function(e){confirm(c.TodoTxtResources.get("OVERWRITE_CONFIRM"))&&(i.TodoTxt.parseTodoTxtFile(e.target.result.toString()),q())},o.readAsText(n,"UTF-8")}}function Z(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function J(){for(var e=i.TodoTxt.getSortedTaskArray(),t=[],n=0;n<e.length;n++)t.push(e[n].text);var o=t.join("\n"),a=encodeURI("data:text/csv;charset=utf-8,"+o);window.open(a)}function $(e){var t=e.text||"";t=l.TodoTxtUtils.htmlEncode(t);var n=G(e);t=t.replace(e.priority,'<span class="'+n+'"><b>'+e.priority+"</b></span>"),e.projects.forEach((function(e){var n=new RegExp(e.replace(/\+/g,"\\+")+"(?![0-9A-Za-z])","g");t=t.replace(n,'<span class="text-muted"><b><i>'+e+"</i></b></span>")})),e.contexts.forEach((function(e){var n=new RegExp(e+"(?![0-9A-Za-z])","g");t=t.replace(n,'<span class="text-muted"><b><i>'+e+"</i></b></span>")}));var o=e.createdDate;return o&&(t=t.replace(o,'<span class="text-muted hidden-xs"><b><i>'+o+"</i></b></span>")),t}function G(e){var t="";return null!==e.priority&&e.isActive&&("(A)"===e.priority&&(t+=" text-danger"),"(B)"===e.priority&&(t+=" text-warning"),"(C)"===e.priority&&(t+=" text-primary")),t}e.generateTaskElement=t,e.generateListElement=n,e.displayTasks=p,e.displayTask=f,e.removeTask=function(e){document.querySelector("#listContainer-div").removeChild(document.querySelector("#"+e))},e.displayModalForTask=v,e.updateModalPreview=T,e.removeModal=g,e.modalEventHandlers=[{el:function(){return document},ev:"keydown",fn:function(e){R(e)}},{el:function(){return document},ev:"keydown",fn:function(e){P(e)}},{el:function(){return document},ev:"keydown",fn:function(e){M(e)}}],e.displayPriorities=h,e.clearPriorities=m,e.displayProjects=x,e.clearProjects=y,e.displayContexts=b,e.clearContexts=E,e.mainEventHandlers=[{el:function(){return document},ev:"keydown",fn:function(e){S(e)}},{el:function(){return document},ev:"keydown",fn:function(e){w(e)}},{el:function(){return document},ev:"keydown",fn:function(e){L(e)}},{el:function(){return document.querySelector("#fileDrop-div")},ev:"dragover",fn:function(e){Z(e)}},{el:function(){return document.querySelector("#fileDrop-div")},ev:"drop",fn:function(e){A(e)}},{el:function(){return document.querySelector("#fileUpload-input")},ev:"change",fn:function(e){A(e)}},{el:function(){return document.querySelector("#showClosed-label")},ev:"click",fn:function(){V(),q()}},{el:function(){return document.querySelector("#addTaskButton-button")},ev:"click",fn:function(){v()}},{el:function(){return document.querySelector("#saveFileButton-button")},ev:"click",fn:function(){J()}},{el:function(){return document.querySelector("#filter-input")},ev:"keyup",fn:function(){j()}},{el:function(){return document.querySelector("#clearFilter-button")},ev:"click",fn:function(){q()}},{el:function(){return document.querySelector("#priorities-div .panel-heading")},ev:"click",fn:function(){K("priorities-div")}},{el:function(){return document.querySelector("#projects-div .panel-heading")},ev:"click",fn:function(){K("projects-div")}},{el:function(){return document.querySelector("#contexts-div .panel-heading")},ev:"click",fn:function(){K("contexts-div")}}],e.bindControlEvents=C,e.unbindControlEvents=k,e.handleAltS=S,e.handleAltC=w,e.handleAltT=L,e.handleDrop=A,e.handleAltEnter=R,e.handleEsc=P,e.handleDeleteClick=_,e.handleFilter=j,e.handleAltP=M,e.refreshUi=q,e.setFilters=I,e.clearFilters=F,e.clearTasks=N,e.filterDisplayedTasks=H,e.toggleShowClosedStatus=V,e.setShowClosed=U,e.togglePanel=K,e.showPanel=W,e.hidePanel=X,e.toggleTaskStatus=z,e.getTodoTxtFile=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){try{s.ajax({url:e,cache:!1,error:function(e,t){alert(t)},success:function(e){i.TodoTxt.parseTodoTxtFile(e),q(),t()}})}catch(e){n(e)}}))];case 1:return t.sent(),[2]}}))}))},e.handleFileSelect=B,e.handleDragOver=Z,e.exportTodoTxtFile=J,e.getMarkupForTask=$,e.getDisplayClassForTask=G,e.initializeElements=function(){var e='     <div class="container-fluid" id="fileDrop-div">     <div class="col-md-9">         <div class="row">             <div class="btn-group btn-group-justified">                 <a class="btn btn-block btn-primary btn-lg btn-file ellipsis" data-toggle="tooltip" data-placement="top" text="'+c.TodoTxtResources.get("IMPORT")+'">                     <span class="glyphicon glyphicon-save"></span> <span class="hidden-xs">'+c.TodoTxtResources.get("IMPORT")+'</span> <input id="fileUpload-input" type="file" placeholder="Select todo.txt File">                 </a>                 <a id="addTaskButton-button" class="btn btn-lg btn-primary ellipsis" data-toggle="tooltip" data-placement="top" text="'+c.TodoTxtResources.get("ADD_TASK")+'">                     <span class="glyphicon glyphicon-plus"></span> <span class="hidden-xs">'+c.TodoTxtResources.get("ADD_TASK")+'</span>                 </a>                 <a id="saveFileButton-button" class="btn btn-lg btn-primary ellipsis" data-toggle="tooltip" data-placement="top" text="'+c.TodoTxtResources.get("EXPORT")+'">                     <span class="glyphicon glyphicon-open"></span> <span class="hidden-xs">'+c.TodoTxtResources.get("EXPORT")+'</span>                 </a>                 <a id="showClosed-label" class="btn btn-lg btn-danger ellipsis" data-toggle="tooltip" data-placement="top" text="'+c.TodoTxtResources.get("SHOW_CLOSED")+'">                     <span class="glyphicon glyphicon-ok-circle"></span> <span class="hidden-xs">'+c.TodoTxtResources.get("SHOW_CLOSED")+'</span>                 </a>             </div>         </div>         <div class="row">             <div class="input-group input-group-lg">                 <input id="filter-input" type="text" class="form-control" placeholder="'+c.TodoTxtResources.get("FILTER_PLACEHOLDER_TEXT")+'">                 <span class="input-group-btn">                     <button id="clearFilter-button" class="btn btn-primary" type="button" data-toggle="tooltip" data-placement="top" text="'+c.TodoTxtResources.get("CLEAR_FILTER")+'"><span class="glyphicon glyphicon-remove-circle"></span> <span class="hidden-xs">'+c.TodoTxtResources.get("CLEAR_FILTER")+'</span></button>                 </span>             </div>         </div>         <div class="row">             <div id="listContainer-div"></div>         </div>     </div>     <div class="col-md-3">         <div id="priorities-div" class="panel panel-primary">             <div class="panel-heading">                 <h3 class="panel-title"><span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span> '+c.TodoTxtResources.get("PRIORITIES")+'</h3>             </div>             <div class="panel-body">                 <ul id="priorities-ul" class="list-group"></ul>             </div>         </div>         <div id="projects-div" class="panel panel-primary">             <div class="panel-heading">                 <h3 class="panel-title"><span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span> '+c.TodoTxtResources.get("PROJECTS")+'</h3>             </div>             <div class="panel-body">                 <ul id="projects-ul" class="list-group"></ul>             </div>         </div>         <div id="contexts-div" class="panel panel-primary">             <div class="panel-heading">                 <h3 class="panel-title"><span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span> '+c.TodoTxtResources.get("CONTEXTS")+'</h3>             </div>             <div class="panel-body">                 <ul id="contexts-ul" class="list-group"></ul>             </div>         </div>     </div>     </div>',t=document.getElementById("todotxt");t&&(t.innerHTML=e)}}(t.TodoTxtView||(t.TodoTxtView={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=n(1),r=n(0),i=n(4);!function(e){function t(e){var t=e||"",n=new a.TodoTxtTask(t);return c(n),n.id}function n(e){return i.TodoTxtVault.getTask(e)}function s(t,o){var r;try{r=n(t)}catch(e){r=new a.TodoTxtTask}return r.parseInput(o),e.addTask(r),!0}function c(e){i.TodoTxtVault.addTask(e),l(e)}function l(e){e.priority&&o.TodoTxtAttributes.priorities.add(e.priority),e.projects.forEach((function(e){e&&o.TodoTxtAttributes.projects.add(e)})),e.contexts.forEach((function(e){e&&o.TodoTxtAttributes.contexts.add(e)}))}function d(e,t){var n=e.isActive,o=t.isActive,a=e.priority,r=t.priority,i=e.createdDate,s=t.createdDate,c=e.completedDate,l=t.completedDate;if(n!==o)return n?-1:1;if(a!==r){if(!r||a<r)return-1;if(!a||a>r)return 1}else{if(i!==s)return i<s?-1:1;if(c!==l)return c>l?-1:1}return 0}e.getSortedTaskArray=function(){var e=i.TodoTxtVault.getAllTasks();o.TodoTxtAttributes.reset();for(var t=0;t<e.length;t++)l(e[t]);return e.sort(d),e},e.getFilteredTaskArray=function(t){var n=e.getSortedTaskArray();if(t&&""!==t){for(var o=t.split(" "),a="",r=0;r<o.length;r++){a+=".*("+o[r].replace(/([-\(\)\[\]\{\}+\?*\.$\^\|,:#<\!\\])/g,"\\$1").replace(/\x08/g,"\\x08")+").*"}var i=new RegExp(a,"i"),s=n.filter((function(e){return e.text.match(i)}));n=s}return n},e.parseTodoTxtFile=function(e,n){n||i.TodoTxtVault.removeAllTasks();var o=e.split("\n");for(var a in o)if("string"==typeof o[a]){var r=o[a];r&&""!==r&&t(r)}},e.createTask=t,e.getTask=n,e.updateTask=s,e.addTask=c,e.closeTask=function(e){var t=n(e);if(t&&t.isActive){var o=t.text;return t.priority&&(o=o.replace(t.priority,"")),o="x "+r.TodoTxtUtils.formatDate(new Date)+" "+o,s(t.id,o),!0}return!1},e.activateTask=function(e){var t=n(e);if(t&&!t.isActive){var o=t.text;return o=o.replace(/^(x )/,"").replace(t.completedDate+" ",""),s(t.id,o),!0}return!1}}(t.TodoTxt||(t.TodoTxt={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){var n=this;this.tasks=[],this.config={showClosed:!1},e&&e.forEach((function(e){n.tasks.push({id:e.id,text:e.text})})),t&&(this.config=t)};t.TodoTextPersistance=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(0);!function(e){var t=new Map;e.register=function(e,n){t.set(e,n)},e.get=function(e){var n=t.get(a.TodoTxtUtils.getLanguage());n||(n=t.get("en-us"));var o=n[e];if(!o)throw"requested resource not found: "+e;return o}}(o=t.TodoTxtResources||(t.TodoTxtResources={})),o.register("en-us",{OVERWRITE_CONFIRM:"This will overwrite any existing list.  Are you sure you wish to proceed?",DELETE_CONFIRM:"Are you sure you want to delete task?",IMPORT:"Import",ADD_TASK:"Add Task",EXPORT:"Export",SHOW_CLOSED:"Show Closed",FILTER_PLACEHOLDER_TEXT:"Type filter(s)",CLEAR_FILTER:"Clear Filter",PRIORITIES:"Priorities",PROJECTS:"Projects",CONTEXTS:"Contexts",CLOSE:"Close",EDIT_TASK_HEADER:"Edit Task",ADD:"Add",UPDATE:"Update",PREVIEW:"Preview",DELETE:"Delete"})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlbHBlcnMvdG9kby10eHQtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rhc2tzL3RvZG8tdHh0LXRhc2sudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwialF1ZXJ5XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rhc2tzL3RvZG8tdHh0LWF0dHJpYnV0ZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0b3JhZ2UvdG9kby10eHQtdmF1bHQudHMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VpL3RvZG8tdHh0LXZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RvZG8tdHh0LnRzIiwid2VicGFjazovLy8uL3NyYy9zdG9yYWdlL3RvZG8tdHh0LWNhY2hlLnRzIiwid2VicGFjazovLy8uL3NyYy91aS90b2RvLXR4dC1yZXNvdXJjZXMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJUb2RvVHh0VXRpbHMiLCJmb3JtYXREYXRlIiwiZGF0ZU9iaiIsInl5eXkiLCJnZXRGdWxsWWVhciIsIm1tIiwiZ2V0TW9udGgiLCJ0b1N0cmluZyIsImxlbmd0aCIsImRkIiwiZ2V0RGF0ZSIsIlN0cmluZyIsImdldExhbmd1YWdlIiwid2luZG93IiwibmF2aWdhdG9yIiwibGFuZ3VhZ2UiLCJ0b0xvd2VyQ2FzZSIsImd1aWQiLCJyZXBsYWNlIiwiTWF0aCIsInJhbmRvbSIsImh0bWxFbmNvZGUiLCJzdHIiLCJodG1sVW5lbmNvZGUiLCJ0ZXh0IiwicHJvamVjdHMiLCJjb250ZXh0cyIsIm1ldGFkYXRhcyIsInRoaXMiLCJpZCIsImlzQWN0aXZlIiwicGFyc2VJbnB1dCIsImlucHV0IiwicGFyc2VTdGF0dXMiLCJwYXJzZVByaW9yaXR5IiwicGFyc2VDb21wbGV0ZWREYXRlIiwicGFyc2VDcmVhdGVkRGF0ZSIsInBhcnNlUHJvamVjdHMiLCJwYXJzZUNvbnRleHRzIiwibWF0Y2giLCJwcmkiLCJwcmlvcml0eSIsImNvbXBsZXRlZCIsImRhdGVzIiwiZ2V0RGF0ZXNGcm9tVGV4dCIsImNvbXBsZXRlZERhdGUiLCJjcmVhdGVkIiwiY3JlYXRlZERhdGUiLCJwdXNoIiwidG1wU2V0IiwiU2V0IiwiYWRkIiwiQXJyYXkiLCJmcm9tIiwiVG9kb1R4dFRhc2siLCJqUXVlcnkiLCJUb2RvVHh0QXR0cmlidXRlcyIsInByaW9yaXRpZXMiLCJyZXNldCIsIlRvZG9UeHRWYXVsdCIsInRhc2tzIiwiTWFwIiwiY29uZmlnIiwic2hvd0Nsb3NlZCIsImNhY2hlRXJyb3IiLCJwZXJzaXN0IiwiY2FjaGUiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImUiLCJhbGVydCIsImNvbnNvbGUiLCJlcnJvciIsImxvYWQiLCJwZXJzaXN0YW5jZSIsImdldEl0ZW0iLCJwYXJzZSIsImNsZWFyIiwidGFzayIsInNldCIsImluZm8iLCJhZGRUYXNrIiwiaGFzIiwiZGVsZXRlIiwicmVtb3ZlVGFzayIsInRhc2tJZCIsImZvdW5kIiwicmVtb3ZlQWxsVGFza3MiLCJnZXRUYXNrIiwiRXJyb3IiLCJnZXRBbGxUYXNrcyIsInRzIiwiZm9yRWFjaCIsImdldENvbmZpZyIsInNldENvbmZpZyIsImNmZyIsIl9jbGVhciIsInJlbW92ZUl0ZW0iLCIkIiwicmVhZHkiLCJUb2RvVHh0VmlldyIsImluaXRpYWxpemVFbGVtZW50cyIsInJlZnJlc2hVaSIsImdlbmVyYXRlVGFza0VsZW1lbnQiLCJpY29uIiwic3RhdHVzIiwiaHRtbFRleHQiLCJnZXRNYXJrdXBGb3JUYXNrIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImljb25TcGFuIiwiY2xhc3NMaXN0Iiwic3RhdHVzVG9nZ2xlU3BhbiIsIm9uY2xpY2siLCJ0b2dnbGVUYXNrU3RhdHVzIiwiYXBwZW5kQ2hpbGQiLCJkaXNwbGF5TW9kYWxCdXR0b24iLCJpbm5lckhUTUwiLCJkaXNwbGF5TW9kYWxGb3JUYXNrIiwiZ2VuZXJhdGVMaXN0RWxlbWVudCIsInNldEZpbHRlcnMiLCJvbm1vdXNlb3ZlciIsIm9ubW91c2VvdXQiLCJkaXNwbGF5VGFza3MiLCJmaWx0ZXIiLCJxdWVyeVNlbGVjdG9yIiwiZmlsdGVyZWRUYXNrcyIsIlRvZG9UeHQiLCJnZXRGaWx0ZXJlZFRhc2tBcnJheSIsImRpc3BsYXlUYXNrIiwiaXNOZXciLCJ1bmJpbmRDb250cm9sRXZlbnRzIiwibWFpbkV2ZW50SGFuZGxlcnMiLCJtb2RhbCIsImNsb3NlQnV0dG9uSWNvbiIsImF0dHIiLCJjbG9zZUJ1dHRvbiIsInR5cGUiLCJUb2RvVHh0UmVzb3VyY2VzIiwicmVtb3ZlTW9kYWwiLCJtb2RhbFRpdGxlIiwibW9kYWxIZWFkZXIiLCJtb2RhbFRleHRBcmVhIiwiY29udGVudEVkaXRhYmxlIiwibW9kYWxCb2R5Iiwic2F2ZUJ1dHRvbkxhYmVsIiwidHh0IiwiaW5uZXJUZXh0Iiwic2F2ZUJ1dHRvbkljb24iLCJzYXZlQnV0dG9uIiwic2F2ZU9yVXBkYXRlVGFza0Zyb21Nb2RhbCIsInByZXZpZXdCdXR0b25MYWJlbCIsInByZXZpZXdCdXR0b25JY29uIiwicHJldmlld0J1dHRvbiIsInVwZGF0ZU1vZGFsUHJldmlldyIsImRlbGV0ZUJ1dHRvbkxhYmVsIiwiZGVsZXRlQnV0dG9uSWNvbiIsImRlbGV0ZUJ1dHRvbiIsImhhbmRsZURlbGV0ZUNsaWNrIiwibW9kYWxGb290ZXJCdXR0b25Hcm91cCIsIm1vZGFsRm9vdGVyIiwibW9kYWxDb250ZW50IiwibW9kYWxEaWFsb2ciLCJ0YWJJbmRleCIsImdlbmVyYXRlTW9kYWxFbGVtZW50IiwiYm9keSIsImJpbmRDb250cm9sRXZlbnRzIiwibW9kYWxFdmVudEhhbmRsZXJzIiwic2hvdyIsImZvY3VzIiwiZWwiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsImRpc3BsYXlQcmlvcml0aWVzIiwicHJpTGlzdCIsImNsZWFyUHJpb3JpdGllcyIsImRpc3BsYXlQcm9qZWN0cyIsInByb2pMaXN0IiwicHJvaiIsImNsZWFyUHJvamVjdHMiLCJkaXNwbGF5Q29udGV4dHMiLCJjdHhMaXN0IiwiY3R4IiwiY2xlYXJDb250ZXh0cyIsImhhbmRsZXJzIiwiaGFuZGxlciIsInVzZUNhcHR1cmUiLCJ1YyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldiIsImZuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUFsdFMiLCJrZXlDb2RlIiwiYWx0S2V5IiwiZXhwb3J0VG9kb1R4dEZpbGUiLCJoYW5kbGVBbHRDIiwiaGFuZGxlQWx0VCIsImhhbmRsZURyb3AiLCJoYW5kbGVGaWxlU2VsZWN0IiwiaGFuZGxlQWx0RW50ZXIiLCJ1cGRhdGVUYXNrIiwiZXgiLCJoYW5kbGVFc2MiLCJjb25maXJtIiwiZmlsdGVyVGltZW91dElkIiwiaGFuZGxlRmlsdGVyIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImZpbHRlckRpc3BsYXllZFRhc2tzIiwiaGFuZGxlQWx0UCIsInNldFNob3dDbG9zZWQiLCJjbGVhclRhc2tzIiwiY2xlYXJGaWx0ZXJzIiwiZmlsdGVyU3RyIiwidG9nZ2xlU2hvd0Nsb3NlZFN0YXR1cyIsImFjdGl2ZSIsInRvZ2dsZVBhbmVsIiwiaGVhZGluZyIsInNob3dQYW5lbCIsImhpZGVQYW5lbCIsImluZGljYXRvciIsImNsb3NlVGFzayIsImFjdGl2YXRlVGFzayIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZmlsZXMiLCJkYXRhVHJhbnNmZXIiLCJmIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZGVuZCIsInBhcnNlVG9kb1R4dEZpbGUiLCJ0YXJnZXQiLCJyZXN1bHQiLCJyZWFkQXNUZXh0IiwiaGFuZGxlRHJhZ092ZXIiLCJkcm9wRWZmZWN0IiwiZ2V0U29ydGVkVGFza0FycmF5IiwidGFza0FycmF5IiwiY29udGVudCIsImpvaW4iLCJkYXRhIiwiZW5jb2RlVVJJIiwib3BlbiIsInByaUNscyIsImdldERpc3BsYXlDbGFzc0ZvclRhc2siLCJwcm9qZWN0IiwicmVnZXgiLCJSZWdFeHAiLCJkYXRlIiwiY2xzIiwicmVtb3ZlQ2hpbGQiLCJnZXRUb2RvVHh0RmlsZSIsImZpbGVOYW1lIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJhamF4IiwidXJsIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwic3VjY2VzcyIsImJhc2VFbGVtZW50cyIsImNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlVGFzayIsInRleHRTdHIiLCJuZXdUZXh0IiwidXBkYXRlQXR0cmlidXRlcyIsImNvbnRleHQiLCJjb21wYXJlVGFza3MiLCJ0YXNrQSIsInRhc2tCIiwiYUFjdGl2ZSIsImJBY3RpdmUiLCJhUHJpIiwiYlByaSIsImFDcmVhdGVkIiwiYkNyZWF0ZWQiLCJhQ29tcGxldGVkIiwiYkNvbXBsZXRlZCIsInNvcnQiLCJmaWx0ZXJzIiwic3BsaXQiLCJyU3RyIiwidG9kb1R4dCIsImFwcGVuZCIsImxpbmVzIiwibGluZSIsIkRhdGUiLCJUb2RvVGV4dFBlcnNpc3RhbmNlIiwicmVjcyIsInJlZ2lzdGVyIiwibGFuZ0xvY2FsZSIsInJlc291cmNlT2JqIiwicmVjIiwidmFsIiwiT1ZFUldSSVRFX0NPTkZJUk0iLCJERUxFVEVfQ09ORklSTSIsIklNUE9SVCIsIkFERF9UQVNLIiwiRVhQT1JUIiwiU0hPV19DTE9TRUQiLCJGSUxURVJfUExBQ0VIT0xERVJfVEVYVCIsIkNMRUFSX0ZJTFRFUiIsIlBSSU9SSVRJRVMiLCJQUk9KRUNUUyIsIkNPTlRFWFRTIiwiQ0xPU0UiLCJFRElUX1RBU0tfSEVBREVSIiwiQUREIiwiVVBEQVRFIiwiUFJFVklFVyIsIkRFTEVURSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixF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QzVDSCxFQUFLdk4sSUFBSXlOLEVBQVlDLElBR04sRUFBQTlULElBQWhCLFNBQW9CVSxHQUNuQixJQUFJcVQsRUFBV0osRUFBSzNULElBQUksRUFBQW1CLGFBQWFZLGVBQ2hDZ1MsSUFDSkEsRUFBTUosRUFBSzNULElBQUksVUFFaEIsSUFBSWdVLEVBQWNELEVBQUlyVCxHQUN0QixJQUFLc1QsRUFDSixLQUFNLGlDQUFpQ3RULEVBRXhDLE9BQU9zVCxHQWhCVCxDQUFjL0osRUFBQSxFQUFBQSxtQkFBQSxFQUFBQSxpQkFBZ0IsS0FvQjlCQSxFQUFpQjJKLFNBQVMsUUFBUyxDQUNsQ0ssa0JBQW1CLDRFQUNuQkMsZUFBZ0Isd0NBQ2JDLE9BQVEsU0FDUkMsU0FBVSxXQUNWQyxPQUFRLFNBQ1JDLFlBQWEsY0FDYkMsd0JBQXlCLGlCQUN6QkMsYUFBYyxlQUNkQyxXQUFZLGFBQ1pDLFNBQVUsV0FDVkMsU0FBVSxXQUNWQyxNQUFPLFFBQ1BDLGlCQUFrQixZQUNsQkMsSUFBSyxNQUNMQyxPQUFRLFNBQ1JDLFFBQVMsVUFDVEMsT0FBUSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBUaGlzIGphdmFzY3JpcHQgd2FzIGNyZWF0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9ucyBhdFxyXG4gKiBodHRwOi8vdG9kb3R4dC5jb20vIGFuZCBpcyBpbnRlbmRlZCB0byBhbGxvdyB1c2VycyB0byBhY2Nlc3MgdGhlaXJcclxuICogdG9kby50eHQgZmlsZXMgaW4gYSB1c2VyLWZyaWVuZGx5IGFuZCBlYXN5IHRvIHZpc3VhbGl6ZSBtYW5uZXIuXHJcbiAqXHJcbiAqIE9uY2UgaW5pdGlhbGx5IHVwbG9hZGVkLCB0aGUgdG9kby50eHQgZmlsZSB3aWxsXHJcbiAqIGJlIGxvYWRlZCBpbnRvIGFuIEhUTUw1IGxvY2FsU3RvcmFnZSBhbmQgbWFuYWdlZCBmcm9tIHRoZXJlLlxyXG4gKiBUaGUgd2ViIHBhZ2UgdGhlbiBhbGxvd3MgZG93bmxvYWRpbmcgY2hhbmdlcyBiYWNrIHRvIHRoZSB1c2VyXHJcbiAqIGluIGEgdHh0IGZvcm1hdCBjb21wbGlhbnQgd2l0aCB0aGUgdG9kby50eHQgc3BlY2lmaWNhdGlvbnMsIGJ1dFxyXG4gKiBoYXZpbmcgcmUtc29ydGVkIHRoZSB0YXNrcy5cclxuICogXHJcbiAqIEBDcmVhdGVkOiAwOC8xNC8yMDEyXHJcbiAqIEBBdXRob3I6IEphc29uIEhvbHQgU21pdGggKGJpY2FyYm9uOEBnbWFpbC5jb20pXHJcbiAqIEBWZXJzaW9uOiAwLjAuMVxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgSmFzb24gSG9sdCBTbWl0aC4gdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiB0b2RvVHh0V2ViVWkuXHJcbiAqIFxyXG4gKiB0b2RvVHh0V2ViVWkgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxyXG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxyXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxyXG4gKiBcclxuICogdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICogXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggdG9kb1R4dFdlYlVpLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuLyoqXHJcbiAqIFV0aWxpdHkgbWV0aG9kcyB1c2VkIGJ5IHRoZSBwcm9qZWN0IGxpYnJhcnlcclxuICogQG5hbWVzcGFjZVxyXG4gKi9cclxuZXhwb3J0IG1vZHVsZSBUb2RvVHh0VXRpbHMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aWxsIGZvcm1hdCBhIERhdGUgb2JqZWN0IHRvIGEgc3RyaW5nIG9mIFlZWVktTU0tRERcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGZvcm1hdHRlZCBkYXRlXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGVPYmo6IERhdGUpOiBzdHJpbmcge1xyXG4gICAgICAgIHZhciB5eXl5ID0gZGF0ZU9iai5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIHZhciBtbSA9IChkYXRlT2JqLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKTsgLy8gZ2V0TW9udGgoKSBpcyB6ZXJvLWJhc2VkXHJcbiAgICAgICAgbW0gPSBtbS5sZW5ndGggPCAyID8gXCIwXCIgKyBtbSA6IG1tO1xyXG4gICAgICAgIHZhciBkZCAgPSAoZGF0ZU9iai5nZXREYXRlKCkpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgZGQgPSBkZC5sZW5ndGggPCAyID8gXCIwXCIgKyBkZCA6IGRkO1xyXG4gICAgICAgIHJldHVybiBTdHJpbmcoeXl5eSArIFwiLVwiICsgbW0gKyBcIi1cIiArIGRkKTsgLy8gTGVhZGluZyB6ZXJvcyBmb3IgbW0gYW5kIGRkXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aWxsIGdldCB0aGUgY3VycmVudCBicm93c2VyIGxhbmd1YWdlLWxvY2FsZVxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gYSBJU08gbGFuZ3VhZ2UtbG9jYWxlIGZvciB0aGUgYnJvd3NlclxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0TGFuZ3VhZ2UoKTogc3RyaW5nIHtcclxuICAgICAgICB2YXIgbGFuZ0xvY2FsZSA9IHdpbmRvdy5uYXZpZ2F0b3JbXCJ1c2VyTGFuZ3VhZ2VcIl0gfHwgd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZTtcclxuICAgICAgICByZXR1cm4gbGFuZ0xvY2FsZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gZ2VuZXJhdGVzIGEgR1VJRFxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gYSBHVUlEIChOTk5OTk5OTi1OTk5OLU5OTk4tTk5OTi1OTk5OTk5OTk5OTk4pXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBndWlkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24oYykge1xyXG4gICAgICAgICAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDAsIHYgPSBjID09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCk7XHJcbiAgICAgICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHdpbGwgc3RyaXAgb3V0IGFueSBjaGFyYWN0ZXJzIGZyb20gdGhlIHBhc3NlZCBpbiBzdHJpbmcgdGhhdCBhcmVcclxuICAgICAqIG5vdCBjb21wYXRpYmxlIHdpdGggaHRtbCBhbmQgcmVwbGFjZSB3aXRoIGh0bWwtZnJpZW5kbHkgdmVyc2lvbnNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSB0aGUgc3RyaW5nIHRvIGJlIGh0bWwgZW5jb2RlZFxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gYSBodG1sIGVuY29kZWQgdmVyc2lvbiBvZiB0aGUgc3RyaW5nIHRoYXQgY2FuIGJlIHVzZWQgc2FmZWx5XHJcbiAgICAgKiB3aXRoaW4gYSBodG1sIHBhZ2VcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGh0bWxFbmNvZGUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBTdHJpbmcoc3RyKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvJi9nLCAnJmFtcDsnKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcclxuICAgICAgICAgICAgLnJlcGxhY2UoL1wiL2csICcmcXVvdDsnKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxzezJ9L2csICcgJm5ic3A7Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aWxsIHN0cmlwIG91dCBhbnkgY2hhcmFjdGVycyBmcm9tIHRoZSBwYXNzZWQgaW4gc3RyaW5nIHRoYXQgYXJlXHJcbiAgICAgKiBodG1sIGNoYXJhY3RlciBlbnRpdGllcyBhbmQgcmVwbGFjZSB3aXRoIHN0YW5kYXJkIHN0cmluZyB2ZXJzaW9uc1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIHRoZSBzdHJpbmcgdG8gYmUgaHRtbCB1bmVuY29kZWRcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGEgdmVyc2lvbiBvZiB0aGUgc3RyaW5nIHRoYXQgY2FuIGNvbnRhaW5zIG5vbi1odG1sLWZyaWVuZGx5XHJcbiAgICAgKiBzdHJpbmdzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBodG1sVW5lbmNvZGUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBTdHJpbmcoc3RyKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvJmFtcDsvZywgJyYnKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvJmx0Oy9nLCAnPCcpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8mZ3Q7L2csICc+JylcclxuICAgICAgICAgICAgLnJlcGxhY2UoLyZxdW90Oy9nLCAnXCInKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvJm5ic3A7L2csICcgJyk7XHJcbiAgICB9XHJcbn0iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBUaGlzIGphdmFzY3JpcHQgd2FzIGNyZWF0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9ucyBhdFxyXG4gKiBodHRwOi8vdG9kb3R4dC5jb20vIGFuZCBpcyBpbnRlbmRlZCB0byBhbGxvdyB1c2VycyB0byBhY2Nlc3MgdGhlaXJcclxuICogdG9kby50eHQgZmlsZXMgaW4gYSB1c2VyLWZyaWVuZGx5IGFuZCBlYXN5IHRvIHZpc3VhbGl6ZSBtYW5uZXIuXHJcbiAqXHJcbiAqIE9uY2UgaW5pdGlhbGx5IHVwbG9hZGVkLCB0aGUgdG9kby50eHQgZmlsZSB3aWxsXHJcbiAqIGJlIGxvYWRlZCBpbnRvIGFuIEhUTUw1IGxvY2FsU3RvcmFnZSBhbmQgbWFuYWdlZCBmcm9tIHRoZXJlLlxyXG4gKiBUaGUgd2ViIHBhZ2UgdGhlbiBhbGxvd3MgZG93bmxvYWRpbmcgY2hhbmdlcyBiYWNrIHRvIHRoZSB1c2VyXHJcbiAqIGluIGEgdHh0IGZvcm1hdCBjb21wbGlhbnQgd2l0aCB0aGUgdG9kby50eHQgc3BlY2lmaWNhdGlvbnMsIGJ1dFxyXG4gKiBoYXZpbmcgcmUtc29ydGVkIHRoZSB0YXNrcy5cclxuICogXHJcbiAqIEBDcmVhdGVkOiAwOC8xNC8yMDEyXHJcbiAqIEBBdXRob3I6IEphc29uIEhvbHQgU21pdGggKGJpY2FyYm9uOEBnbWFpbC5jb20pXHJcbiAqIEBWZXJzaW9uOiAwLjAuMVxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgSmFzb24gSG9sdCBTbWl0aC4gdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiB0b2RvVHh0V2ViVWkuXHJcbiAqIFxyXG4gKiB0b2RvVHh0V2ViVWkgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxyXG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxyXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxyXG4gKiBcclxuICogdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICogXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggdG9kb1R4dFdlYlVpLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuaW1wb3J0IHsgVG9kb1R4dFV0aWxzIH0gZnJvbSBcIi4uL2hlbHBlcnMvdG9kby10eHQtdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUb2RvVHh0VGFzayB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgcHJpb3JpdHk6IHN0cmluZztcclxuICAgIGNyZWF0ZWREYXRlOiBzdHJpbmc7XHJcbiAgICBjb21wbGV0ZWREYXRlOiBzdHJpbmc7XHJcbiAgICBwcm9qZWN0czogc3RyaW5nW10gPSBbXTtcclxuICAgIGNvbnRleHRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgbWV0YWRhdGFzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgaXNBY3RpdmU6IGJvb2xlYW47XHJcbiAgICB0ZXh0OiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IodGV4dD86IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuaWQgPSBUb2RvVHh0VXRpbHMuZ3VpZCgpO1xyXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucGFyc2VJbnB1dCh0ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUlucHV0KGlucHV0OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBpZiAoaW5wdXQpIHtcclxuICAgICAgICAgICAgdGhpcy50ZXh0ID0gaW5wdXQ7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VTdGF0dXMoKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZVByaW9yaXR5KCk7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VDb21wbGV0ZWREYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VDcmVhdGVkRGF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcnNlUHJvamVjdHMoKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZUNvbnRleHRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VTdGF0dXMoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIHN0cmluZ3Mgc3RhcnRpbmcgd2l0aCBzb21ldGhpbmcgbGlrZSBcInggXCJcclxuICAgICAgICBsZXQgbWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkgPSB0aGlzLnRleHQubWF0Y2goL14oeCApLyk7XHJcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlUHJpb3JpdHkoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IHByaTogc3RyaW5nID0gbnVsbDsgLy8gdXNlZCB0byBob2xkIHRoZSBwcmlvcml0eSBpZiBzZXRcclxuICAgICAgICBcclxuICAgICAgICAvLyBwYXJzZSBvdXQgdGhlIHByaW9yaXR5IFJlZ0V4OiAvXFxeKFtBLVpdXFwpLiovIFxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBzdHJpbmdzIHN0YXJ0aW5nIHdpdGggc29tZXRoaW5nIGxpa2UgXCIoQSkgXCJcclxuICAgICAgICBsZXQgcHJpUGF0dGVybjogUmVnRXhwID0gL14oXFwoW0EtWl1cXClbXFxzXSspLztcclxuICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLnRleHQubWF0Y2gocHJpUGF0dGVybik7IC8vIHJldHVybnMgbnVsbCBpZiBub3QgZm91bmRcclxuICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgLy8gZm91bmQgYW4gYWN0aXZlIG1hdGNoIHNvIGdldCB0aGUgcHJpb3JpdHlcclxuICAgICAgICAgICAgcHJpID0gbWF0Y2hbMF0ucmVwbGFjZSgvW1xcc10qL2csIFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VDb21wbGV0ZWREYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHZhciBjb21wbGV0ZWQgPSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHBhcnNlIG91dCB0aGUgY29tcGxldGVkRGF0ZSBpZiBjbG9zZWQgKHN0YXJ0cyB3aXRoIFwieCBcIilcclxuICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgbGV0IGRhdGVzOiBzdHJpbmdbXSA9IHRoaXMuZ2V0RGF0ZXNGcm9tVGV4dCgpO1xyXG4gICAgICAgICAgICBpZiAoZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZCA9IGRhdGVzWzBdID8gZGF0ZXNbMF0ucmVwbGFjZSgvW1xcc10qL2csIFwiXCIpIDogbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNvbXBsZXRlZERhdGUgPSBjb21wbGV0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZUNyZWF0ZWREYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHZhciBjcmVhdGVkID0gbnVsbDtcclxuICAgICAgICAvLyBwYXJzZSBvdXQgdGhlIGNyZWF0ZWREYXRlICh3aWxsIGJlIDJuZCBpZiBpdGVtIGlzIGNsb3NlZClcclxuICAgICAgICBsZXQgZGF0ZXM6IHN0cmluZ1tdID0gdGhpcy5nZXREYXRlc0Zyb21UZXh0KCk7XHJcbiAgICAgICAgaWYgKGRhdGVzKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGVzLmxlbmd0aCA+IDEpIHsgLy8gd2UgaGF2ZSBjcmVhdGVkIGFuZCBjb21wbGV0ZWRcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkID0gZGF0ZXNbMV0gPyBkYXRlc1sxXS5yZXBsYWNlKC9bXFxzXSovZywgXCJcIikgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlZCA9IGRhdGVzWzBdID8gZGF0ZXNbMF0ucmVwbGFjZSgvW1xcc10qL2csIFwiXCIpIDogbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZWREYXRlID0gY3JlYXRlZDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERhdGVzRnJvbVRleHQoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHZhciBkYXRlczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBjaGVjayBmb3Igc3RyaW5ncyB3aXRoIHNvbWV0aGluZyBsaWtlIFwiMjAxMi0wOC0wOVwiXHJcbiAgICAgICAgbGV0IGRhdGVQYXR0ZXJuOiBSZWdFeHAgPSAvKD86XFxzfF4pKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KSg/PVxccykvZztcclxuICAgICAgICBsZXQgbWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkgPSB0aGlzLnRleHQubWF0Y2goZGF0ZVBhdHRlcm4pOyAvLyByZXR1cm5zIG51bGwgaWYgbm90IGZvdW5kXHJcbiAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxtYXRjaC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZGF0ZXMucHVzaChtYXRjaFtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGRhdGVzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VQcm9qZWN0cygpOiB2b2lkIHtcclxuICAgICAgICB2YXIgdG1wU2V0OiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQ8c3RyaW5nPigpOyAvLyB1c2VkIHRvIGhvbGQgdGhlIHByb2plY3QgaWYgc2V0XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcGFyc2Ugb3V0IHRoZSBwcm9qZWN0cyBSZWdFeDogL1xcK1swLTlBLVphLXpdK1xccy8gKHdvcmRzIHN0YXJ0aW5nIHdpdGggXCIrXCIpXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIHN0cmluZ3MgbGlrZSBcIitBQkMxMjNcIlxyXG4gICAgICAgIHZhciBwcm9qUGF0dGVybiA9IC8oKFxcc3xeKVtcXChcXHtcXFtcIiddP1xcK1swLTlBLVphLXpdK1tcXClcXH1cXF1cIiddPyg/PVxcc3wkKSkvZztcclxuICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLnRleHQubWF0Y2gocHJvalBhdHRlcm4pOyAvLyByZXR1cm5zIG51bGwgaWYgbm90IGZvdW5kXHJcbiAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgIC8vIG9ubHkgc3RvcmUgb25lIGluc3RhbmNlIG9mIGR1cGxpY2F0ZSBwcm9qZWN0IGVudHJpZXNcclxuICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPG1hdGNoLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IG1hdGNoW2ldLnJlcGxhY2UoL1tcXHNdKi9nLCBcIlwiKS5yZXBsYWNlKC9bXFwoXFx7XFxbXFwpXFx9XFxdXCInXS9nLCBcIlwiKTs7XHJcbiAgICAgICAgICAgICAgICB0bXBTZXQuYWRkKHApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMucHJvamVjdHMgPSBBcnJheS5mcm9tKHRtcFNldCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZUNvbnRleHRzKCk6IHZvaWQge1xyXG4gICAgICAgIHZhciB0bXBTZXQ6IFNldDxzdHJpbmc+ID0gbmV3IFNldDxzdHJpbmc+KCk7IC8vIHVzZWQgdG8gaG9sZCB0aGUgY29udGV4dCBpZiBzZXRcclxuICAgIFxyXG4gICAgICAgIC8vIHBhcnNlIG91dCB0aGUgY29udGV4dHMgUmVnRXg6IC9cXEBbMC05QS1aYS16XStcXHMvICh3b3JkcyBzdGFydGluZyB3aXRoIFwiK1wiKVxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBzdHJpbmdzIGxpa2UgXCJAQUJDMTIzXCJcclxuICAgICAgICB2YXIgY3R4UGF0dGVybiA9IC8oKFxcc3xeKVtcXChcXHtcXFtcIiddP1xcQFswLTlBLVphLXpdK1tcXClcXH1cXF1cIiddPyg/PVxcc3wkKSkvZztcclxuICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLnRleHQubWF0Y2goY3R4UGF0dGVybik7IC8vIHJldHVybnMgbnVsbCBpZiBub3QgZm91bmRcclxuICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgLy8gb25seSBzdG9yZSBvbmUgaW5zdGFuY2Ugb2YgZHVwbGljYXRlIHByb2plY3QgZW50cmllc1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8bWF0Y2gubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gbWF0Y2hbaV0ucmVwbGFjZSgvW1xcc10qL2csIFwiXCIpLnJlcGxhY2UoL1tcXChcXHtcXFtcXClcXH1cXF1cIiddL2csIFwiXCIpOztcclxuICAgICAgICAgICAgICAgIHRtcFNldC5hZGQoYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICB0aGlzLmNvbnRleHRzID0gQXJyYXkuZnJvbSh0bXBTZXQpO1xyXG4gICAgfVxyXG59IiwibW9kdWxlLmV4cG9ydHMgPSBqUXVlcnk7IiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICogVGhpcyBqYXZhc2NyaXB0IHdhcyBjcmVhdGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbnMgYXRcclxuICogaHR0cDovL3RvZG90eHQuY29tLyBhbmQgaXMgaW50ZW5kZWQgdG8gYWxsb3cgdXNlcnMgdG8gYWNjZXNzIHRoZWlyXHJcbiAqIHRvZG8udHh0IGZpbGVzIGluIGEgdXNlci1mcmllbmRseSBhbmQgZWFzeSB0byB2aXN1YWxpemUgbWFubmVyLlxyXG4gKlxyXG4gKiBPbmNlIGluaXRpYWxseSB1cGxvYWRlZCwgdGhlIHRvZG8udHh0IGZpbGUgd2lsbFxyXG4gKiBiZSBsb2FkZWQgaW50byBhbiBIVE1MNSBsb2NhbFN0b3JhZ2UgYW5kIG1hbmFnZWQgZnJvbSB0aGVyZS5cclxuICogVGhlIHdlYiBwYWdlIHRoZW4gYWxsb3dzIGRvd25sb2FkaW5nIGNoYW5nZXMgYmFjayB0byB0aGUgdXNlclxyXG4gKiBpbiBhIHR4dCBmb3JtYXQgY29tcGxpYW50IHdpdGggdGhlIHRvZG8udHh0IHNwZWNpZmljYXRpb25zLCBidXRcclxuICogaGF2aW5nIHJlLXNvcnRlZCB0aGUgdGFza3MuXHJcbiAqIFxyXG4gKiBAQ3JlYXRlZDogMDgvMTQvMjAxMlxyXG4gKiBAQXV0aG9yOiBKYXNvbiBIb2x0IFNtaXRoIChiaWNhcmJvbjhAZ21haWwuY29tKVxyXG4gKiBAVmVyc2lvbjogMC4wLjFcclxuICogQ29weXJpZ2h0IChjKSAyMDEyIEphc29uIEhvbHQgU21pdGguIHRvZG9UeHRXZWJVaSBpcyBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxyXG4gKiBcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdG9kb1R4dFdlYlVpLlxyXG4gKiBcclxuICogdG9kb1R4dFdlYlVpIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcclxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cclxuICogXHJcbiAqIHRvZG9UeHRXZWJVaSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqIFxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIHRvZG9UeHRXZWJVaS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmV4cG9ydCBtb2R1bGUgVG9kb1R4dEF0dHJpYnV0ZXMge1xyXG4gICAgZXhwb3J0IHZhciBwcmlvcml0aWVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgZXhwb3J0IHZhciBwcm9qZWN0czogU2V0PHN0cmluZz4gPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgIGV4cG9ydCB2YXIgY29udGV4dHM6IFNldDxzdHJpbmc+ID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIHByaW9yaXRpZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgICAgICBwcm9qZWN0cyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgICAgIGNvbnRleHRzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgICB9XHJcbn0iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBUaGlzIGphdmFzY3JpcHQgd2FzIGNyZWF0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9ucyBhdFxyXG4gKiBodHRwOi8vdG9kb3R4dC5jb20vIGFuZCBpcyBpbnRlbmRlZCB0byBhbGxvdyB1c2VycyB0byBhY2Nlc3MgdGhlaXJcclxuICogdG9kby50eHQgZmlsZXMgaW4gYSB1c2VyLWZyaWVuZGx5IGFuZCBlYXN5IHRvIHZpc3VhbGl6ZSBtYW5uZXIuXHJcbiAqXHJcbiAqIE9uY2UgaW5pdGlhbGx5IHVwbG9hZGVkLCB0aGUgdG9kby50eHQgZmlsZSB3aWxsXHJcbiAqIGJlIGxvYWRlZCBpbnRvIGFuIEhUTUw1IGxvY2FsU3RvcmFnZSBhbmQgbWFuYWdlZCBmcm9tIHRoZXJlLlxyXG4gKiBUaGUgd2ViIHBhZ2UgdGhlbiBhbGxvd3MgZG93bmxvYWRpbmcgY2hhbmdlcyBiYWNrIHRvIHRoZSB1c2VyXHJcbiAqIGluIGEgdHh0IGZvcm1hdCBjb21wbGlhbnQgd2l0aCB0aGUgdG9kby50eHQgc3BlY2lmaWNhdGlvbnMsIGJ1dFxyXG4gKiBoYXZpbmcgcmUtc29ydGVkIHRoZSB0YXNrcy5cclxuICogXHJcbiAqIEBDcmVhdGVkOiAwOC8xNC8yMDEyXHJcbiAqIEBBdXRob3I6IEphc29uIEhvbHQgU21pdGggKGJpY2FyYm9uOEBnbWFpbC5jb20pXHJcbiAqIEBWZXJzaW9uOiAwLjAuMVxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgSmFzb24gSG9sdCBTbWl0aC4gdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIHVuZGVyXHJcbiAqIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiB0b2RvVHh0V2ViVWkuXHJcbiAqIFxyXG4gKiB0b2RvVHh0V2ViVWkgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxyXG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxyXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxyXG4gKiBcclxuICogdG9kb1R4dFdlYlVpIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICogXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggdG9kb1R4dFdlYlVpLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuaW1wb3J0IHsgVG9kb1R4dFRhc2sgfSBmcm9tIFwiLi4vdGFza3MvdG9kby10eHQtdGFza1wiO1xyXG5pbXBvcnQgeyBUb2RvVHh0Q29uZmlnIH0gZnJvbSBcIi4vdG9kby10eHQtY29uZmlnXCI7XHJcbmltcG9ydCB7IFRvZG9UZXh0UGVyc2lzdGFuY2UgYXMgVG9kb1RleHRDYWNoZSB9IGZyb20gXCIuL3RvZG8tdHh0LWNhY2hlXCI7XHJcblxyXG5leHBvcnQgbW9kdWxlIFRvZG9UeHRWYXVsdCB7XHJcbiAgICB2YXIgdGFza3M6IE1hcDxzdHJpbmcsIFRvZG9UeHRUYXNrPiA9IG5ldyBNYXA8c3RyaW5nLCBUb2RvVHh0VGFzaz4oKTtcclxuICAgIHZhciBjb25maWc6IFRvZG9UeHRDb25maWcgPSB7IHNob3dDbG9zZWQ6IGZhbHNlIH07XHJcbiAgICB2YXIgY2FjaGVFcnJvcjogbnVtYmVyID0gMDtcclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gYWRkVGFzayh0YXNrOiBUb2RvVHh0VGFzayk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0YXNrcy5oYXModGFzay5pZCkpIHtcclxuICAgICAgICAgICAgdGFza3MuZGVsZXRlKHRhc2suaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXNrcy5zZXQodGFzay5pZCwgdGFzayk7XHJcblxyXG4gICAgICAgIHBlcnNpc3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlVGFzayh0YXNrSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBmb3VuZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0YXNrcy5oYXModGFza0lkKSkge1xyXG4gICAgICAgICAgICB0YXNrcy5kZWxldGUodGFza0lkKTtcclxuICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGVyc2lzdCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gZm91bmQ7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFsbFRhc2tzKCk6IHZvaWQge1xyXG4gICAgICAgIHRhc2tzID0gbmV3IE1hcDxzdHJpbmcsIFRvZG9UeHRUYXNrPigpO1xyXG5cclxuICAgICAgICBwZXJzaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2sodGFza0lkOiBzdHJpbmcpOiBUb2RvVHh0VGFzayB7XHJcbiAgICAgICAgbG9hZCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0YXNrcy5oYXModGFza0lkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFza3MuZ2V0KHRhc2tJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgbm8gVG9kb1R4dFRhc2sgd2l0aCBJRCBvZiAnJHt0YXNrSWR9JyBjb3VsZCBiZSBmb3VuZGApO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRBbGxUYXNrcygpOiBUb2RvVHh0VGFza1tdIHtcclxuICAgICAgICBsb2FkKCk7XHJcblxyXG4gICAgICAgIGxldCB0czogVG9kb1R4dFRhc2tbXSA9IFtdO1xyXG4gICAgICAgIHRhc2tzLmZvckVhY2goKHZhbHVlOiBUb2RvVHh0VGFzaykgPT4ge1xyXG4gICAgICAgICAgICB0cy5wdXNoKHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHM7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZygpOiBUb2RvVHh0Q29uZmlnIHtcclxuICAgICAgICBsb2FkKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNldENvbmZpZyhjZmc6IFRvZG9UeHRDb25maWcpOiB2b2lkIHtcclxuICAgICAgICBjb25maWcgPSBjZmc7XHJcblxyXG4gICAgICAgIHBlcnNpc3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwZXJzaXN0KCk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBjYWNoZTogVG9kb1RleHRDYWNoZSA9IG5ldyBUb2RvVGV4dENhY2hlKHRhc2tzLCBjb25maWcpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kby10eHQnLCBKU09OLnN0cmluZ2lmeShjYWNoZSkpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGNhY2hlRXJyb3IgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogbW92ZSB0aGlzIHRvIFRvZG9UeHRWaWV3IGFuZCBwcmVzZW50IGFzIE1vZGFsIG9uIHN0YXJ0dXBcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdXQVJOSU5HOiB1bmFibGUgdG8gc3RvcmUgVGFza3MgaW4gbG9jYWxTdG9yYWdlOyBlbnN1cmUgeW91IGV4cG9ydCB5b3VyIHRhc2tzIGJlZm9yZSB5b3UgY2xvc2UgdGhlIGJyb3dzZXIgb3IgdGhleSB3aWxsIGJlIGxvc3QhJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBUb2RvVHh0IHVuYWJsZSB0byBjYWNoZSBkYXRhIGluIGxvY2FsU3RvcmFnZSBkdWUgdG86ICR7ZX1gKTtcclxuICAgICAgICAgICAgICAgIGNhY2hlRXJyb3IrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBsb2FkKCk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwZXJzaXN0YW5jZTogc3RyaW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RvZG8tdHh0Jyk7XHJcbiAgICAgICAgICAgIGlmIChwZXJzaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNhY2hlOiBUb2RvVGV4dENhY2hlID0gSlNPTi5wYXJzZShwZXJzaXN0YW5jZSkgYXMgVG9kb1RleHRDYWNoZTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZS50YXNrcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhc2tzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGNhY2hlLnRhc2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ID0gY2FjaGUudGFza3NbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Wyd0ZXh0J10gJiYgdFsnaWQnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhc2s6IFRvZG9UeHRUYXNrID0gbmV3IFRvZG9UeHRUYXNrKHQudGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLmlkID0gdC5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tzLnNldCh0YXNrLmlkLCB0YXNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25maWcgPSBjYWNoZS5jb25maWc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChjYWNoZUVycm9yID09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhgVG9kb1R4dCB1bmFibGUgdG8gbG9hZCBjYWNoZSBmcm9tIGxvY2FsU3RvcmFnZSBkdWUgdG86ICR7ZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdBUk5JTkchISByZW1vdmVzIGFsbCBjYWNoZWQgZGF0YSBpbmNsdWRpbmcgdGFza3MgYW5kIGNvbmZpZ3VyYXRpb24uXHJcbiAgICAgKiBvbmx5IHRvIGJlIHVzZWQgYWZ0ZXIgeW91J3ZlIGV4cG9ydGVkIHlvdXIgdGFza3MgdG8gYSBmaWxlXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBfY2xlYXIoKTogdm9pZCB7XHJcbiAgICAgICAgdGFza3MgPSBuZXcgTWFwPHN0cmluZywgVG9kb1R4dFRhc2s+KCk7XHJcbiAgICAgICAgY29uZmlnID0ge3Nob3dDbG9zZWQ6IGZhbHNlfTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9kby10eHQnKTtcclxuICAgIH1cclxufSIsImltcG9ydCAqIGFzICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IHsgVG9kb1R4dFZpZXcgfSBmcm9tICcuL3NyYy91aS90b2RvLXR4dC12aWV3JztcclxuXHJcbiQoJ2RvY3VtZW50JykucmVhZHkoKCkgPT4ge1xyXG4gICAgVG9kb1R4dFZpZXcuaW5pdGlhbGl6ZUVsZW1lbnRzKCk7XHJcbiAgICBUb2RvVHh0Vmlldy5yZWZyZXNoVWkoKTtcclxufSk7IiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICogVGhpcyBqYXZhc2NyaXB0IHdhcyBjcmVhdGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbnMgYXRcclxuICogaHR0cDovL3RvZG90eHQuY29tLyBhbmQgaXMgaW50ZW5kZWQgdG8gYWxsb3cgdXNlcnMgdG8gYWNjZXNzIHRoZWlyXHJcbiAqIHRvZG8udHh0IGZpbGVzIGluIGEgdXNlci1mcmllbmRseSBhbmQgZWFzeSB0byB2aXN1YWxpemUgbWFubmVyLlxyXG4gKlxyXG4gKiBPbmNlIGluaXRpYWxseSB1cGxvYWRlZCwgdGhlIHRvZG8udHh0IGZpbGUgd2lsbFxyXG4gKiBiZSBsb2FkZWQgaW50byBhbiBIVE1MNSBsb2NhbFN0b3JhZ2UgYW5kIG1hbmFnZWQgZnJvbSB0aGVyZS5cclxuICogVGhlIHdlYiBwYWdlIHRoZW4gYWxsb3dzIGRvd25sb2FkaW5nIGNoYW5nZXMgYmFjayB0byB0aGUgdXNlclxyXG4gKiBpbiBhIHR4dCBmb3JtYXQgY29tcGxpYW50IHdpdGggdGhlIHRvZG8udHh0IHNwZWNpZmljYXRpb25zLCBidXRcclxuICogaGF2aW5nIHJlLXNvcnRlZCB0aGUgdGFza3MuXHJcbiAqIFxyXG4gKiBAQ3JlYXRlZDogMDgvMTQvMjAxMlxyXG4gKiBAQXV0aG9yOiBKYXNvbiBIb2x0IFNtaXRoIChiaWNhcmJvbjhAZ21haWwuY29tKVxyXG4gKiBAVmVyc2lvbjogMC4wLjFcclxuICogQ29weXJpZ2h0IChjKSAyMDEyIEphc29uIEhvbHQgU21pdGguIHRvZG9UeHRXZWJVaSBpcyBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxyXG4gKiBcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdG9kb1R4dFdlYlVpLlxyXG4gKiBcclxuICogdG9kb1R4dFdlYlVpIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcclxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cclxuICogXHJcbiAqIHRvZG9UeHRXZWJVaSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqIFxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIHRvZG9UeHRXZWJVaS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmltcG9ydCB7IFRvZG9UeHRUYXNrIH0gZnJvbSBcIi4uL3Rhc2tzL3RvZG8tdHh0LXRhc2tcIjtcclxuaW1wb3J0IHsgVG9kb1R4dCB9IGZyb20gJy4uL3RvZG8tdHh0JztcclxuaW1wb3J0ICogYXMgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgeyBUb2RvVHh0UmVzb3VyY2VzIH0gZnJvbSBcIi4vdG9kby10eHQtcmVzb3VyY2VzXCI7XHJcbmltcG9ydCB7IFRvZG9UeHRVdGlscyB9IGZyb20gXCIuLi9oZWxwZXJzL3RvZG8tdHh0LXV0aWxzXCI7XHJcbmltcG9ydCB7IEZpbGVEcm9wRXZlbnQgfSBmcm9tIFwiLi4vaGVscGVycy9maWxlLWRyb3AtZXZlbnRcIjtcclxuaW1wb3J0IHsgVG9kb1R4dEF0dHJpYnV0ZXMgfSBmcm9tIFwiLi4vdGFza3MvdG9kby10eHQtYXR0cmlidXRlc1wiO1xyXG5pbXBvcnQgeyBUb2RvVHh0VmF1bHQgfSBmcm9tIFwiLi4vc3RvcmFnZS90b2RvLXR4dC12YXVsdFwiO1xyXG5cclxuZXhwb3J0IG1vZHVsZSBUb2RvVHh0VmlldyB7XHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIGdlbmVyYXRlcyB0aGUgRE9NIGVsZW1lbnQgZm9yIHRoZSBwYXNzZWQgaW4gdGFza1xyXG4gICAgICogQHBhcmFtIHtUb2RvVHh0VGFza30gdGFzayAtIHRoZSB0YXNrIG9iamVjdCB0byBiZSBjb252ZXJ0ZWQgdG8gSFRNTERpdkVsZW1lbnRcclxuICAgICAqIEByZXR1cm5zIGEge0hUTUxEaXZFbGVtZW50fSBmcm9tIHRoZSBwYXNzZWQgaW4ge1Rhc2t9XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRhc2tFbGVtZW50KHRhc2s6IFRvZG9UeHRUYXNrKTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgICAgIHZhciBpY29uID0gXCJnbHlwaGljb24tb2tcIjtcclxuICAgICAgICB2YXIgc3RhdHVzID0gXCJidG4tZGVmYXVsdFwiO1xyXG4gICAgICAgIHZhciBodG1sVGV4dCA9IGdldE1hcmt1cEZvclRhc2sodGFzayk7XHJcbiAgICAgICAgaWYgKCF0YXNrLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgIGljb24gPSBcImdseXBoaWNvbi1yZW1vdmVcIjtcclxuICAgICAgICAgICAgc3RhdHVzID0gXCJidG4tZGFuZ2VyXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUYXNrIGVsZW1lbnRcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBcImJ0bi1ncm91cCBidG4tYmxvY2tcIjtcclxuICAgICAgICBlbGVtZW50LmlkID0gdGFzay5pZDtcclxuXHJcbiAgICAgICAgLy8gQ2xvc2UgVGFzayBCdXR0b24gSWNvblxyXG4gICAgICAgIGxldCBpY29uU3BhbjogSFRNTFNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIGljb25TcGFuLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbicpO1xyXG4gICAgICAgIGljb25TcGFuLmNsYXNzTGlzdC5hZGQoaWNvbik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2xvc2UgVGFzayBCdXR0b24gSWNvbiBjb250YWluZXJcclxuICAgICAgICBsZXQgc3RhdHVzVG9nZ2xlU3BhbjogSFRNTFNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIHN0YXR1c1RvZ2dsZVNwYW4uY2xhc3NMaXN0LmFkZCgnY29sLXhzLTInKTtcclxuICAgICAgICBzdGF0dXNUb2dnbGVTcGFuLmNsYXNzTGlzdC5hZGQoJ2J0bicpO1xyXG4gICAgICAgIHN0YXR1c1RvZ2dsZVNwYW4uY2xhc3NMaXN0LmFkZCgnYnRuLWxnJyk7XHJcbiAgICAgICAgc3RhdHVzVG9nZ2xlU3Bhbi5jbGFzc0xpc3QuYWRkKHN0YXR1cyk7XHJcbiAgICAgICAgc3RhdHVzVG9nZ2xlU3Bhbi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdG9nZ2xlVGFza1N0YXR1cyh0YXNrLmlkKTtcclxuICAgICAgICAgICAgcmVmcmVzaFVpKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN0YXR1c1RvZ2dsZVNwYW4uYXBwZW5kQ2hpbGQoaWNvblNwYW4pO1xyXG5cclxuICAgICAgICAvLyBhZGQgQ2xvc2UgVGFzayBCdXR0b24gdG8gVGFzayBlbGVtZW50XHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChzdGF0dXNUb2dnbGVTcGFuKTtcclxuXHJcbiAgICAgICAgLy8gVGFzayB0ZXh0IGRpc3BsYXkgY29udGFpbmVyXHJcbiAgICAgICAgbGV0IGRpc3BsYXlNb2RhbEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBkaXNwbGF5TW9kYWxCdXR0b24uY2xhc3NMaXN0LmFkZCgnY29sLXhzLTEwJyk7XHJcbiAgICAgICAgZGlzcGxheU1vZGFsQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2VsbGlwc2lzJyk7XHJcbiAgICAgICAgZGlzcGxheU1vZGFsQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpO1xyXG4gICAgICAgIGRpc3BsYXlNb2RhbEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tbGcnKTtcclxuICAgICAgICBkaXNwbGF5TW9kYWxCdXR0b24uY2xhc3NMaXN0LmFkZChzdGF0dXMpO1xyXG4gICAgICAgIGRpc3BsYXlNb2RhbEJ1dHRvbi5pbm5lckhUTUwgPSBodG1sVGV4dDtcclxuICAgICAgICBkaXNwbGF5TW9kYWxCdXR0b24ub25jbGljayA9IChlKSA9PiBkaXNwbGF5TW9kYWxGb3JUYXNrKHRhc2suaWQpO1xyXG5cclxuICAgICAgICAvLyBhZGQgVGFzayB0ZXh0IGNvbnRhaW5lciB0byBUYXNrIGVsZW1lbnRcclxuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGRpc3BsYXlNb2RhbEJ1dHRvbik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlTGlzdEVsZW1lbnQodGV4dDogc3RyaW5nKTogSFRNTExJRWxlbWVudCB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgZWxlbWVudC5pZCA9IHRleHQ7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBcImxpc3QtZ3JvdXAtaXRlbVwiO1xyXG4gICAgICAgIGVsZW1lbnQub25jbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHNldEZpbHRlcnModGV4dCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBlbGVtZW50Lm9ubW91c2VvdmVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gXCIgYWN0aXZlXCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBlbGVtZW50Lm9ubW91c2VvdXQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoLygoIHxeKWFjdGl2ZSkvLCBcIlwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJzxoNCBjbGFzcz1cImVsbGlwc2lzXCI+JyArIHRleHQgKyAnPC9oND4nO1xyXG5cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHdpbGwgYXR0ZW1wdCB0byBnZXQgYWxsIHRhc2tzIGFuZCBkaXNwbGF5IHRoZW1cclxuICAgICAqIGluIHRoZSBET00gaWYgYW55IGV4aXN0LiAgVGhpcyB3aWxsIGFkZCB0byBhbnkgZXhpc3RpbmcgdGFza3Mgc28geW91XHJcbiAgICAgKiB3aWxsIG5lZWQgdG8gY2xlYXIgdGhlIERPTSBmaXJzdCBpZiB5b3Ugd2FudCB0byB1cGRhdGUgdGhlIGVudGlyZSBsaXN0XHJcbiAgICAgKiBpbnN0ZWFkIG9mIGp1c3QgYXBwZW5kaW5nIHRvIHRoZSBsaXN0LlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZGlzcGxheVRhc2tzKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIGdldCB0aGUgbGlzdCBvZiBzZWxlY3RlZCBwcmlvcml0aWVzIGZyb20gdGhlIGZpbHRlclxyXG4gICAgICAgIGxldCBmaWx0ZXI6IHN0cmluZyA9IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZpbHRlci1pbnB1dFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuXHJcbiAgICAgICAgLy8gZmlsdGVyIGxpc3QgYnkgdGhvc2UgbWF0Y2hpbmcgc2VsZWN0ZWQgZmlsdGVyc1xyXG4gICAgICAgIGxldCBmaWx0ZXJlZFRhc2tzOiBUb2RvVHh0VGFza1tdID0gVG9kb1R4dC5nZXRGaWx0ZXJlZFRhc2tBcnJheShmaWx0ZXIpO1xyXG5cclxuICAgICAgICBsZXQgaGlkZUNsb3NlZDogYm9vbGVhbiA9ICFUb2RvVHh0VmF1bHQuZ2V0Q29uZmlnKCkuc2hvd0Nsb3NlZDtcclxuICAgICAgICBpZiAoaGlkZUNsb3NlZCkge1xyXG4gICAgICAgICAgICAvLyBmaWx0ZXIgb3V0IGNsb3NlZCB0YXNrcyBzbyB0aGV5IGFyZW4ndCBpbiBET01cclxuICAgICAgICAgICAgbGV0IHRhc2tzOiBUb2RvVHh0VGFza1tdID0gZmlsdGVyZWRUYXNrcy5maWx0ZXIoKHQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0LmlzQWN0aXZlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZmlsdGVyZWRUYXNrcyA9IHRhc2tzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZpbHRlcmVkVGFza3MgJiYgZmlsdGVyZWRUYXNrcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCB0YXNrcyB0byBET01cclxuICAgICAgICAgICAgZmlsdGVyZWRUYXNrcy5mb3JFYWNoKCh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGFzayh0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5VGFzayh0YXNrOiBUb2RvVHh0VGFzayk6IHZvaWQge1xyXG4gICAgICAgIC8vIGFkZCB0YXNrIHRvIERPTVxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlzdENvbnRhaW5lci1kaXZcIikuYXBwZW5kQ2hpbGQoZ2VuZXJhdGVUYXNrRWxlbWVudCh0YXNrKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRhc2sodGFza0lkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAvLyBkZWxldGUgdGhlIHRhc2sgZnJvbSB0aGUgRE9NXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaXN0Q29udGFpbmVyLWRpdlwiKS5yZW1vdmVDaGlsZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgdGFza0lkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiBvcGVucyB0aGUgc3BlY2lmaWVkIHRhc2sgaW4gYW4gZWRpdGluZyB3aW5kb3dcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlNb2RhbEZvclRhc2sodGFza0lkPzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgLy8gcG9wdWxhdGUgdGhlIG1vZGFsIHRleHRhcmVhIHdpdGggdGhpcyB0YXNrIHN0cmluZ1xyXG4gICAgICAgIGxldCB0YXNrOiBUb2RvVHh0VGFzaztcclxuICAgICAgICBsZXQgaXNOZXc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICBpZih0YXNrSWQpIHtcclxuICAgICAgICAgICAgdGFzayA9IFRvZG9UeHQuZ2V0VGFzayh0YXNrSWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRhc2sgPSBuZXcgVG9kb1R4dFRhc2soKTtcclxuICAgICAgICAgICAgaXNOZXcgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdW5iaW5kQ29udHJvbEV2ZW50cyhtYWluRXZlbnRIYW5kbGVycyk7XHJcblxyXG4gICAgICAgIGxldCBtb2RhbDogSFRNTERpdkVsZW1lbnQgPSBnZW5lcmF0ZU1vZGFsRWxlbWVudCh0YXNrLCBpc05ldyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XHJcblxyXG4gICAgICAgIGJpbmRDb250cm9sRXZlbnRzKG1vZGFsRXZlbnRIYW5kbGVycyk7XHJcblxyXG4gICAgICAgICQobW9kYWwpLnNob3coMCk7XHJcblxyXG4gICAgICAgIC8vIHBsYWNlIGZvY3VzIG9uIHRoZSB0ZXh0YXJlYVxyXG4gICAgICAgIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsRWRpdC10ZXh0YXJlYVwiKSBhcyBIVE1MRWxlbWVudCkuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNyZWF0ZXMgYSBuZXcgRE9NIGVsZW1lbnQgdG8gYWxsb3cgZWRpdGluZyBvZiBhbiBleGl0aW5nIHtUb2RvVHh0VGFza30gb3IgYWRkaXRpb25cclxuICAgICAqIG9mIGEgbmV3IHRhc2tcclxuICAgICAqIEBwYXJhbSB0YXNrIHtUb2RvVHh0VGFza30gdGhlIHRhc2sgb2JqZWN0IHRvIGJlIGVkaXRlZCBvciBudWxsIGlmIG5ldyBUYXNrIGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcmV0dXJucyB7SFRNTERpdkVsZW1lbnR9IHRoYXQgYWxsb3dzIGVkaXRpbmcgb2YgZXhpc3RpbmcgVGFza1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZW5lcmF0ZU1vZGFsRWxlbWVudCh0YXNrOiBUb2RvVHh0VGFzaywgaXNOZXc6IGJvb2xlYW4pOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgKiBTVEFSVDogbW9kYWwgaGVhZGVyXHJcbiAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICAgICAgLy8gY2xvc2UgYnV0dG9uIGljb25cclxuICAgICAgICBsZXQgY2xvc2VCdXR0b25JY29uOiBIVE1MU3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgJChjbG9zZUJ1dHRvbkljb24pLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbkljb24uaW5uZXJIVE1MID0gJyAmdGltZXM7JztcclxuICAgICAgICBcclxuICAgICAgICAvLyBjbG9zZSBidXR0b25cclxuICAgICAgICBsZXQgY2xvc2VCdXR0b246IEhUTUxCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24udHlwZSA9ICdidXR0b24nO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmlkID0gJ21vZGFsRWRpdENsb3NlLWJ1dHRvbic7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2xvc2UnKTtcclxuICAgICAgICAkKGNsb3NlQnV0dG9uKS5hdHRyKCdkYXRhLWRpc21pc3MnLCAnbW9kYWwnKTtcclxuICAgICAgICAkKGNsb3NlQnV0dG9uKS5hdHRyKCdhcmlhLWxhYmVsJywgVG9kb1R4dFJlc291cmNlcy5nZXQoJ0NMT1NFJykpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICByZW1vdmVNb2RhbCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b25JY29uKTtcclxuXHJcbiAgICAgICAgLy8gbW9kYWwgdGl0bGVcclxuICAgICAgICBsZXQgbW9kYWxUaXRsZTogSFRNTEhlYWRpbmdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDQnKTtcclxuICAgICAgICBtb2RhbFRpdGxlLmNsYXNzTGlzdC5hZGQoJ21vZGFsLXRpdGxlJyk7XHJcbiAgICAgICAgbW9kYWxUaXRsZS5pZCA9ICdtb2RhbEVkaXQtbGFiZWwnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIG1vZGFsIGhlYWRlciBjb250YWluZXJcclxuICAgICAgICBsZXQgbW9kYWxIZWFkZXI6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbW9kYWxIZWFkZXIuY2xhc3NMaXN0LmFkZCgnbW9kYWwtaGVhZGVyJyk7XHJcbiAgICAgICAgbW9kYWxIZWFkZXIuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xyXG4gICAgICAgIG1vZGFsSGVhZGVyLmFwcGVuZENoaWxkKG1vZGFsVGl0bGUpO1xyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICogRU5EOiBtb2RhbCBoZWFkZXJcclxuICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgKiBTVEFSVDogbW9kYWwgYm9keVxyXG4gICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICAgIC8vIG1vZGFsIHRleHRhcmVhXHJcbiAgICAgICAgbGV0IG1vZGFsVGV4dEFyZWE6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbW9kYWxUZXh0QXJlYS5pZCA9ICdtb2RhbEVkaXQtdGV4dGFyZWEnO1xyXG4gICAgICAgIG1vZGFsVGV4dEFyZWEuY2xhc3NMaXN0LmFkZCgndGV4dGFyZWEnKTtcclxuICAgICAgICBtb2RhbFRleHRBcmVhLmNvbnRlbnRFZGl0YWJsZSA9ICd0cnVlJztcclxuICAgICAgICBsZXQgaHRtbFRleHQ6IHN0cmluZyA9IGdldE1hcmt1cEZvclRhc2sodGFzaykucmVwbGFjZSgvaGlkZGVuLXhzLyxcIlwiKTtcclxuICAgICAgICBtb2RhbFRleHRBcmVhLmlubmVySFRNTCA9IGh0bWxUZXh0O1xyXG5cclxuICAgICAgICAvL21vZGFsIGJvZHkgY29udGFpbmVyXHJcbiAgICAgICAgbGV0IG1vZGFsQm9keTogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtb2RhbEJvZHkuY2xhc3NMaXN0LmFkZCgnbW9kYWwtYm9keScpO1xyXG4gICAgICAgIG1vZGFsQm9keS5hcHBlbmRDaGlsZChtb2RhbFRleHRBcmVhKTtcclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAqIEVORDogbW9kYWwgYm9keVxyXG4gICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBcclxuICAgICAgICAgKiBTVEFSVDogbW9kYWwgZm9vdGVyXHJcbiAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICAgICAgLy8gc2F2ZSBidXR0b24gbGFiZWxcclxuICAgICAgICBsZXQgc2F2ZUJ1dHRvbkxhYmVsOiBIVE1MU3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgc2F2ZUJ1dHRvbkxhYmVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbi14cycpO1xyXG4gICAgICAgIGxldCB0eHQ6IHN0cmluZyA9IChpc05ldykgPyBUb2RvVHh0UmVzb3VyY2VzLmdldCgnQUREJykgOiBUb2RvVHh0UmVzb3VyY2VzLmdldCgnVVBEQVRFJyk7XHJcbiAgICAgICAgc2F2ZUJ1dHRvbkxhYmVsLmlubmVyVGV4dCA9ICcgJyArIHR4dDtcclxuXHJcbiAgICAgICAgLy8gc2F2ZSBidXR0b24gaWNvblxyXG4gICAgICAgIGxldCBzYXZlQnV0dG9uSWNvbjogSFRNTFNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIHNhdmVCdXR0b25JY29uLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbicpO1xyXG4gICAgICAgIHNhdmVCdXR0b25JY29uLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbi1vaycpO1xyXG5cclxuICAgICAgICAvLyBzYXZlIGJ1dHRvblxyXG4gICAgICAgIGxldCBzYXZlQnV0dG9uOiBIVE1MQW5jaG9yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBzYXZlQnV0dG9uLnR5cGUgPSAnYnV0dG9uJztcclxuICAgICAgICBzYXZlQnV0dG9uLmlkID0gJ21vZGFsRWRpdFNhdmUtYnV0dG9uJztcclxuICAgICAgICBzYXZlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpO1xyXG4gICAgICAgIHNhdmVCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuLWxnJyk7XHJcbiAgICAgICAgc2F2ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tc3VjY2VzcycpO1xyXG4gICAgICAgICQoc2F2ZUJ1dHRvbikuYXR0cignZGF0YS10b2dnbGUnLCAndG9vbHRpcCcpO1xyXG4gICAgICAgICQoc2F2ZUJ1dHRvbikuYXR0cignZGF0YS1wbGFjZW1lbnQnLCAndG9wJyk7XHJcbiAgICAgICAgJChzYXZlQnV0dG9uKS5hdHRyKCd0ZXh0JywgdHh0KTtcclxuICAgICAgICBzYXZlQnV0dG9uLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBzYXZlT3JVcGRhdGVUYXNrRnJvbU1vZGFsKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzYXZlQnV0dG9uLmFwcGVuZENoaWxkKHNhdmVCdXR0b25JY29uKTtcclxuICAgICAgICBzYXZlQnV0dG9uLmFwcGVuZENoaWxkKHNhdmVCdXR0b25MYWJlbCk7XHJcblxyXG4gICAgICAgIC8vIHByZXZpZXcgYnV0dG9uIGxhYmVsXHJcbiAgICAgICAgbGV0IHByZXZpZXdCdXR0b25MYWJlbDogSFRNTFNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIHByZXZpZXdCdXR0b25MYWJlbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4teHMnKTtcclxuICAgICAgICBwcmV2aWV3QnV0dG9uTGFiZWwuaW5uZXJUZXh0ID0gJyAnICsgVG9kb1R4dFJlc291cmNlcy5nZXQoJ1BSRVZJRVcnKTtcclxuXHJcbiAgICAgICAgLy8gcHJldmlldyBidXR0b24gaWNvblxyXG4gICAgICAgIGxldCBwcmV2aWV3QnV0dG9uSWNvbjogSFRNTFNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIHByZXZpZXdCdXR0b25JY29uLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbicpO1xyXG4gICAgICAgIHByZXZpZXdCdXR0b25JY29uLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbi1leWUtb3BlbicpO1xyXG5cclxuICAgICAgICAvLyBwcmV2aWV3IGJ1dHRvblxyXG4gICAgICAgIGxldCBwcmV2aWV3QnV0dG9uOiBIVE1MQW5jaG9yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBwcmV2aWV3QnV0dG9uLnR5cGUgPSAnYnV0dG9uJztcclxuICAgICAgICBwcmV2aWV3QnV0dG9uLmlkID0gJ21vZGFsRWRpdFByZXZpZXctYnV0dG9uJztcclxuICAgICAgICBwcmV2aWV3QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpO1xyXG4gICAgICAgIHByZXZpZXdCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuLWxnJyk7XHJcbiAgICAgICAgcHJldmlld0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tcHJpbWFyeScpO1xyXG4gICAgICAgICQocHJldmlld0J1dHRvbikuYXR0cignZGF0YS10b2dnbGUnLCAndG9vbHRpcCcpO1xyXG4gICAgICAgICQocHJldmlld0J1dHRvbikuYXR0cignZGF0YS1wbGFjZW1lbnQnLCAndG9wJyk7XHJcbiAgICAgICAgJChwcmV2aWV3QnV0dG9uKS5hdHRyKCd0ZXh0JywgVG9kb1R4dFJlc291cmNlcy5nZXQoJ1BSRVZJRVcnKSk7XHJcbiAgICAgICAgcHJldmlld0J1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdXBkYXRlTW9kYWxQcmV2aWV3KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwcmV2aWV3QnV0dG9uLmFwcGVuZENoaWxkKHByZXZpZXdCdXR0b25JY29uKTtcclxuICAgICAgICBwcmV2aWV3QnV0dG9uLmFwcGVuZENoaWxkKHByZXZpZXdCdXR0b25MYWJlbCk7XHJcblxyXG4gICAgICAgIC8vIGRlbGV0ZSBidXR0b24gbGFiZWxcclxuICAgICAgICBsZXQgZGVsZXRlQnV0dG9uTGFiZWw6IEhUTUxTcGFuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICBkZWxldGVCdXR0b25MYWJlbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4teHMnKTtcclxuICAgICAgICBkZWxldGVCdXR0b25MYWJlbC5pbm5lclRleHQgPSAnICcgKyBUb2RvVHh0UmVzb3VyY2VzLmdldCgnREVMRVRFJyk7XHJcblxyXG4gICAgICAgIC8vIGRlbGV0ZSBidXR0b24gaWNvblxyXG4gICAgICAgIGxldCBkZWxldGVCdXR0b25JY29uOiBIVE1MU3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uSWNvbi5jbGFzc0xpc3QuYWRkKCdnbHlwaGljb24nKTtcclxuICAgICAgICBkZWxldGVCdXR0b25JY29uLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbi1mbG9wcHktcmVtb3ZlJyk7XHJcblxyXG4gICAgICAgIC8vIGRlbGV0ZSBidXR0b25cclxuICAgICAgICBsZXQgZGVsZXRlQnV0dG9uOiBIVE1MQW5jaG9yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBkZWxldGVCdXR0b24udHlwZSA9ICdidXR0b24nO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5pZCA9ICdtb2RhbEVkaXREZWxldGUtYnV0dG9uJztcclxuICAgICAgICBkZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJyk7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bi1sZycpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tZGFuZ2VyJyk7XHJcbiAgICAgICAgJChkZWxldGVCdXR0b24pLmF0dHIoJ2RhdGEtdG9nZ2xlJywgJ3Rvb2x0aXAnKTtcclxuICAgICAgICAkKGRlbGV0ZUJ1dHRvbikuYXR0cignZGF0YS1wbGFjZW1lbnQnLCAndG9wJyk7XHJcbiAgICAgICAgJChkZWxldGVCdXR0b24pLmF0dHIoJ3RleHQnLCBUb2RvVHh0UmVzb3VyY2VzLmdldCgnREVMRVRFJykpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgaGFuZGxlRGVsZXRlQ2xpY2soKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbkljb24pO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hcHBlbmRDaGlsZChkZWxldGVCdXR0b25MYWJlbCk7XHJcblxyXG4gICAgICAgIC8vIGZvb3RlciBidXR0b24gZ3JvdXBcclxuICAgICAgICBsZXQgbW9kYWxGb290ZXJCdXR0b25Hcm91cDogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtb2RhbEZvb3RlckJ1dHRvbkdyb3VwLmNsYXNzTGlzdC5hZGQoJ2J0bi1ncm91cCcpO1xyXG4gICAgICAgIG1vZGFsRm9vdGVyQnV0dG9uR3JvdXAuY2xhc3NMaXN0LmFkZCgnYnRuLWdyb3VwLWp1c3RpZmllZCcpO1xyXG4gICAgICAgIG1vZGFsRm9vdGVyQnV0dG9uR3JvdXAuYXBwZW5kQ2hpbGQoc2F2ZUJ1dHRvbik7XHJcbiAgICAgICAgbW9kYWxGb290ZXJCdXR0b25Hcm91cC5hcHBlbmRDaGlsZChwcmV2aWV3QnV0dG9uKTtcclxuICAgICAgICBpZiAoIWlzTmV3KSB7XHJcbiAgICAgICAgICAgIG1vZGFsRm9vdGVyQnV0dG9uR3JvdXAuYXBwZW5kQ2hpbGQoZGVsZXRlQnV0dG9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG1vZGFsIGZvb3RlciBjb250YWluZXJcclxuICAgICAgICBsZXQgbW9kYWxGb290ZXI6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbW9kYWxGb290ZXIuY2xhc3NMaXN0LmFkZCgnbW9kYWwtZm9vdGVyJyk7XHJcbiAgICAgICAgbW9kYWxGb290ZXIuYXBwZW5kQ2hpbGQobW9kYWxGb290ZXJCdXR0b25Hcm91cCk7XHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogXHJcbiAgICAgICAgICogRU5EOiBtb2RhbCBmb290ZXJcclxuICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgICAgICBcclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBcclxuICAgICAgICAgKiB0ZXJ0aWFyeSBtb2RhbCBjb250YWluZXJcclxuICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgICAgICBsZXQgbW9kYWxDb250ZW50OiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIG1vZGFsQ29udGVudC5jbGFzc0xpc3QuYWRkKCdtb2RhbC1jb250ZW50Jyk7XHJcbiAgICAgICAgbW9kYWxDb250ZW50LmFwcGVuZENoaWxkKG1vZGFsSGVhZGVyKTtcclxuICAgICAgICBtb2RhbENvbnRlbnQuYXBwZW5kQ2hpbGQobW9kYWxCb2R5KTtcclxuICAgICAgICBtb2RhbENvbnRlbnQuYXBwZW5kQ2hpbGQobW9kYWxGb290ZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICogc2Vjb25kYXJ5IG1vZGFsIGNvbnRhaW5lclxyXG4gICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICAgIGxldCBtb2RhbERpYWxvZzogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtb2RhbERpYWxvZy5jbGFzc0xpc3QuYWRkKCdtb2RhbC1kaWFsb2cnKTtcclxuICAgICAgICBtb2RhbERpYWxvZy5hcHBlbmRDaGlsZChtb2RhbENvbnRlbnQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICogbWFpbiBtb2RhbCBjb250YWluZXJcclxuICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgICAgICBsZXQgbW9kYWw6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwnKTtcclxuICAgICAgICBtb2RhbC5pZCA9ICdtb2RhbEVkaXQtZGl2JztcclxuICAgICAgICBtb2RhbC50YWJJbmRleCA9IC0xO1xyXG4gICAgICAgICQobW9kYWwpLmF0dHIoJ3JvbGUnLCAnZGlhbG9nJyk7XHJcbiAgICAgICAgJChtb2RhbCkuYXR0cignYXJpYS1sYWJlbGxlZGJ5JywgJ21vZGFsRWRpdC1sYWJlbCcpO1xyXG4gICAgICAgICQobW9kYWwpLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcclxuICAgICAgICAkKG1vZGFsKS5hdHRyKCd0YXNrLWlkJywgdGFzay5pZCk7XHJcbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQobW9kYWxEaWFsb2cpO1xyXG5cclxuICAgICAgICByZXR1cm4gbW9kYWw7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU1vZGFsUHJldmlldygpOiB2b2lkIHtcclxuICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0LXRleHRhcmVhJyk7XHJcbiAgICAgICAgaWYgKGVsKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gZWwudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIHZhciB0YXNrID0gbmV3IFRvZG9UeHRUYXNrKHRleHQpO1xyXG4gICAgICAgICAgICBlbC5pbm5lckhUTUwgPSBnZXRNYXJrdXBGb3JUYXNrKHRhc2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlTW9kYWwoKTogdm9pZCB7XHJcbiAgICAgICAgdW5iaW5kQ29udHJvbEV2ZW50cyhtb2RhbEV2ZW50SGFuZGxlcnMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICQoJyNtb2RhbEVkaXQtZGl2JykucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIGJpbmRDb250cm9sRXZlbnRzKG1haW5FdmVudEhhbmRsZXJzKTtcclxuXHJcbiAgICAgICAgcmVmcmVzaFVpKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNvbnN0IG1vZGFsRXZlbnRIYW5kbGVyczogYW55W10gPSBbXHJcbiAgICAgICAgeyBlbDogKCkgPT4geyByZXR1cm4gZG9jdW1lbnQ7IH0sIGV2OiBcImtleWRvd25cIiwgZm46IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7IGhhbmRsZUFsdEVudGVyKGUpOyB9IH0sXHJcbiAgICAgICAgeyBlbDogKCkgPT4geyByZXR1cm4gZG9jdW1lbnQ7IH0sIGV2OiBcImtleWRvd25cIiwgZm46IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7IGhhbmRsZUVzYyhlKTsgfSB9LFxyXG4gICAgICAgIHsgZWw6ICgpID0+IHsgcmV0dXJuIGRvY3VtZW50OyB9LCBldjogXCJrZXlkb3duXCIsIGZuOiAoZTogS2V5Ym9hcmRFdmVudCkgPT4geyBoYW5kbGVBbHRQKGUpOyB9IH1cclxuICAgIF07XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlQcmlvcml0aWVzKCk6IHZvaWQge1xyXG4gICAgICAgIGxldCBwcmlMaXN0OiBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW9yaXRpZXMtdWwnKTtcclxuICAgICAgICBUb2RvVHh0QXR0cmlidXRlcy5wcmlvcml0aWVzLmZvckVhY2goKHByaSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBvbmx5IGRpc3BsYXkgYWN0aXZlXHJcbiAgICAgICAgICAgIGlmIChwcmkgfHwgVG9kb1R4dFZhdWx0LmdldENvbmZpZygpLnNob3dDbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZ2VuZXJhdGVMaXN0RWxlbWVudChwcmkpO1xyXG4gICAgICAgICAgICAgICAgcHJpTGlzdC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjbGVhclByaW9yaXRpZXMoKTogdm9pZCB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW9yaXRpZXMtdWwnKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5UHJvamVjdHMoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IHByb2pMaXN0OiBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RzLXVsJyk7XHJcbiAgICAgICAgVG9kb1R4dEF0dHJpYnV0ZXMucHJvamVjdHMuZm9yRWFjaCgocHJvaikgPT4ge1xyXG4gICAgICAgICAgICAvLyBvbmx5IGRpc3BsYXkgYWN0aXZlXHJcbiAgICAgICAgICAgIGlmIChwcm9qIHx8IFRvZG9UeHRWYXVsdC5nZXRDb25maWcoKS5zaG93Q2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGdlbmVyYXRlTGlzdEVsZW1lbnQocHJvaik7XHJcbiAgICAgICAgICAgICAgICBwcm9qTGlzdC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjbGVhclByb2plY3RzKCk6IHZvaWQge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0cy11bCcpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlDb250ZXh0cygpOiB2b2lkIHtcclxuICAgICAgICBsZXQgY3R4TGlzdDogRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZXh0cy11bCcpO1xyXG4gICAgICAgIFRvZG9UeHRBdHRyaWJ1dGVzLmNvbnRleHRzLmZvckVhY2goKGN0eCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBvbmx5IGRpc3BsYXkgYWN0aXZlXHJcbiAgICAgICAgICAgIGlmIChjdHggfHwgVG9kb1R4dFZhdWx0LmdldENvbmZpZygpLnNob3dDbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZ2VuZXJhdGVMaXN0RWxlbWVudChjdHgpO1xyXG4gICAgICAgICAgICAgICAgY3R4TGlzdC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjbGVhckNvbnRleHRzKCk6IHZvaWQge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZXh0cy11bCcpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNvbnN0IG1haW5FdmVudEhhbmRsZXJzOiBhbnlbXSA9IFtcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudDsgfSwgZXY6IFwia2V5ZG93blwiLCBmbjogKGU6IEtleWJvYXJkRXZlbnQpID0+IHsgaGFuZGxlQWx0UyhlKTsgfSB9LFxyXG4gICAgICAgIHsgZWw6ICgpID0+IHsgcmV0dXJuIGRvY3VtZW50OyB9LCBldjogXCJrZXlkb3duXCIsIGZuOiAoZTogS2V5Ym9hcmRFdmVudCkgPT4geyBoYW5kbGVBbHRDKGUpOyB9IH0sXHJcbiAgICAgICAgeyBlbDogKCkgPT4geyByZXR1cm4gZG9jdW1lbnQ7IH0sIGV2OiBcImtleWRvd25cIiwgZm46IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7IGhhbmRsZUFsdFQoZSk7IH0gfSxcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZpbGVEcm9wLWRpdlwiKTsgfSwgZXY6IFwiZHJhZ292ZXJcIiwgZm46IChlOiBEcmFnRXZlbnQpID0+IHsgaGFuZGxlRHJhZ092ZXIoZSk7IH0gfSxcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZpbGVEcm9wLWRpdlwiKTsgfSwgZXY6IFwiZHJvcFwiLCBmbjogKGU6IEZpbGVEcm9wRXZlbnQpID0+IHsgaGFuZGxlRHJvcChlKTsgfSB9LFxyXG4gICAgICAgIHsgZWw6ICgpID0+IHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZmlsZVVwbG9hZC1pbnB1dFwiKTsgfSwgZXY6IFwiY2hhbmdlXCIsIGZuOiAoZTogRXZlbnQpID0+IHsgaGFuZGxlRHJvcChlIGFzIEZpbGVEcm9wRXZlbnQpOyB9IH0sXHJcbiAgICAgICAgeyBlbDogKCkgPT4geyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzaG93Q2xvc2VkLWxhYmVsXCIpOyB9LCBldjogXCJjbGlja1wiLCBmbjogKCkgPT4geyBcclxuICAgICAgICAgICAgdG9nZ2xlU2hvd0Nsb3NlZFN0YXR1cygpO1xyXG4gICAgICAgICAgICByZWZyZXNoVWkoKTtcclxuICAgICAgICB9IH0sXHJcbiAgICAgICAgeyBlbDogKCkgPT4geyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRUYXNrQnV0dG9uLWJ1dHRvblwiKTsgfSwgZXY6IFwiY2xpY2tcIiwgZm46ICgpID0+IHsgZGlzcGxheU1vZGFsRm9yVGFzaygpOyB9IH0sXHJcbiAgICAgICAgeyBlbDogKCkgPT4geyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzYXZlRmlsZUJ1dHRvbi1idXR0b25cIik7IH0sIGV2OiBcImNsaWNrXCIsIGZuOiAoKSA9PiB7IGV4cG9ydFRvZG9UeHRGaWxlKCk7IH0gfSxcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZpbHRlci1pbnB1dFwiKTsgfSwgZXY6IFwia2V5dXBcIiwgZm46ICgpID0+IHsgaGFuZGxlRmlsdGVyKCk7IH0gfSxcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NsZWFyRmlsdGVyLWJ1dHRvblwiKTsgfSwgZXY6IFwiY2xpY2tcIiwgZm46ICgpID0+IHsgcmVmcmVzaFVpKCk7IH0gfSxcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXRpZXMtZGl2IC5wYW5lbC1oZWFkaW5nXCIpOyB9LCBldjogXCJjbGlja1wiLCBmbjogKCkgPT4geyB0b2dnbGVQYW5lbCgncHJpb3JpdGllcy1kaXYnKTsgfSB9LFxyXG4gICAgICAgIHsgZWw6ICgpID0+IHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdHMtZGl2IC5wYW5lbC1oZWFkaW5nXCIpOyB9LCBldjogXCJjbGlja1wiLCBmbjogKCkgPT4geyB0b2dnbGVQYW5lbCgncHJvamVjdHMtZGl2Jyk7IH0gfSxcclxuICAgICAgICB7IGVsOiAoKSA9PiB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbnRleHRzLWRpdiAucGFuZWwtaGVhZGluZ1wiKTsgfSwgZXY6IFwiY2xpY2tcIiwgZm46ICgpID0+IHsgdG9nZ2xlUGFuZWwoJ2NvbnRleHRzLWRpdicpOyB9IH0sXHJcbiAgICBdO1xyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBiaW5kQ29udHJvbEV2ZW50cyhoYW5kbGVyczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICBoYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VDYXB0dXJlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVyLnVjKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VDYXB0dXJlID0gaGFuZGxlci51YztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlci5lbCgpLmFkZEV2ZW50TGlzdGVuZXIoaGFuZGxlci5ldiwgaGFuZGxlci5mbiwgdXNlQ2FwdHVyZSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gdW5iaW5kQ29udHJvbEV2ZW50cyhoYW5kbGVyczogYW55W10pIHtcclxuICAgICAgICBoYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VDYXB0dXJlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVyLnVjKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VDYXB0dXJlID0gaGFuZGxlci51YztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlci5lbCgpLnJlbW92ZUV2ZW50TGlzdGVuZXIoaGFuZGxlci5ldiwgaGFuZGxlci5mbiwgdXNlQ2FwdHVyZSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaGFuZGxlQWx0UyhlOiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PSA4MyAmJiBlLmFsdEtleSkgeyAvLyBBbHQgKyBzXHJcbiAgICAgICAgICAgIGV4cG9ydFRvZG9UeHRGaWxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBoYW5kbGVBbHRDKGU6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09IDY3ICYmIGUuYWx0S2V5KSB7IC8vIEFsdCArIGNcclxuICAgICAgICAgICAgcmVmcmVzaFVpKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBoYW5kbGVBbHRUKGU6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09IDg0ICYmIGUuYWx0S2V5KSB7IC8vIEFsdCArIHRcclxuICAgICAgICAgICAgZGlzcGxheU1vZGFsRm9yVGFzaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaGFuZGxlRHJvcChlOiBGaWxlRHJvcEV2ZW50KSB7XHJcbiAgICAgICAgaGFuZGxlRmlsZVNlbGVjdChlKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaGFuZGxlQWx0RW50ZXIoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGlmICgoZS5rZXlDb2RlICYmIChlLmtleUNvZGUgPT09IDEzICYmIGUuYWx0S2V5KSkpIHsgLy8gQWx0ICsgRW50ZXJcclxuICAgICAgICAgICAgc2F2ZU9yVXBkYXRlVGFza0Zyb21Nb2RhbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzYXZlT3JVcGRhdGVUYXNrRnJvbU1vZGFsKCk6IHZvaWQge1xyXG4gICAgICAgIGxldCBtb2RhbDogSFRNTERpdkVsZW1lbnQgPSAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbEVkaXQtZGl2XCIpIGFzIEhUTUxEaXZFbGVtZW50KTtcclxuICAgICAgICBsZXQgdGFza0lkOiBzdHJpbmcgPSAkKG1vZGFsKS5hdHRyKCd0YXNrLWlkJyk7XHJcbiAgICAgICAgbGV0IHRleHQ6IHN0cmluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxFZGl0LXRleHRhcmVhXCIpLnRleHRDb250ZW50O1xyXG4gICAgICAgIHRleHQgPSBUb2RvVHh0VXRpbHMuaHRtbFVuZW5jb2RlKHRleHQpO1xyXG4gICAgICAgIGlmIChUb2RvVHh0LnVwZGF0ZVRhc2sodGFza0lkLCB0ZXh0KSkge1xyXG4gICAgICAgICAgICByZWZyZXNoVWkoKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZU1vZGFsKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBsb2cgdGhpc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogZGlzcGxheSBlcnJvciB0b2FzdFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaGFuZGxlRXNjKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNyB8fCBlLmtleUNvZGUgPT09IDApIHsgLy8gRXNjXHJcbiAgICAgICAgICAgIHJlbW92ZU1vZGFsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljaygpOiB2b2lkIHtcclxuICAgICAgICBsZXQgbW9kYWw6IEhUTUxEaXZFbGVtZW50ID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxFZGl0LWRpdlwiKSBhcyBIVE1MRGl2RWxlbWVudCk7XHJcbiAgICAgICAgbGV0IHRhc2tJZDogc3RyaW5nID0gJChtb2RhbCkuYXR0cigndGFzay1pZCcpO1xyXG4gICAgICAgIGxldCB0YXNrOiBUb2RvVHh0VGFzayA9IFRvZG9UeHQuZ2V0VGFzayh0YXNrSWQpO1xyXG4gICAgICAgIGlmICh0YXNrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGNvbmZpcm0oVG9kb1R4dFJlc291cmNlcy5nZXQoXCJERUxFVEVfQ09ORklSTVwiKSArIFwiXFxuXFx0XFxcIlwiICsgdGFzay50ZXh0ICsgXCJcXFwiXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoVG9kb1R4dFZhdWx0LnJlbW92ZVRhc2sodGFza0lkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hVaSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBsb2cgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZGlzcGxheSBlcnJvciB0b2FzdFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBmaWx0ZXJUaW1lb3V0SWQ6IG51bWJlcjtcclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaGFuZGxlRmlsdGVyKCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChmaWx0ZXJUaW1lb3V0SWQpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChmaWx0ZXJUaW1lb3V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaWx0ZXJUaW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGdldCB0aGUgbGlzdCBvZiBzZWxlY3RlZCBwcmlvcml0aWVzIGZyb20gdGhlIGZpbHRlclxyXG4gICAgICAgICAgICBmaWx0ZXJEaXNwbGF5ZWRUYXNrcygpO1xyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUFsdFAoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGlmICgoZS5rZXlDb2RlICYmIChlLmtleUNvZGUgPT09IDgwICYmIGUuYWx0S2V5KSkpIHsgLy8gQWx0ICsgcFxyXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIG1hcmt1cCBvZiB0aGUgZGlzcGxheWVkIHRhc2sgaW4gdGhlIE1vZGFsXHJcbiAgICAgICAgICAgIHVwZGF0ZU1vZGFsUHJldmlldygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHdpbGwgcmVsb2FkIHRoZSBsaXN0IG9mIHRhc2tzIGZyb20gU3RvcmFnZSB0byBlbnN1cmUgaXRcclxuICAgICAqIGlzIHNvcnRlZCBhbmQgZGlzcGxheWluZyBwcm9wZXJseVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVmcmVzaFVpKCk6IHZvaWQge1xyXG4gICAgICAgIHNldFNob3dDbG9zZWQoVG9kb1R4dFZhdWx0LmdldENvbmZpZygpLnNob3dDbG9zZWQpO1xyXG5cclxuICAgICAgICAvLyB1bmJpbmQgYW55IGV2ZW50IGhhbmRsaW5nXHJcbiAgICAgICAgdW5iaW5kQ29udHJvbEV2ZW50cyhtYWluRXZlbnRIYW5kbGVycyk7XHJcblxyXG4gICAgICAgIC8vIGNsZWFyIHRoZSBVSSBsaXN0XHJcbiAgICAgICAgY2xlYXJUYXNrcygpO1xyXG5cclxuICAgICAgICAvLyBjbGVhciB0aGUgYXR0cmlidXRlc1xyXG4gICAgICAgIGNsZWFyUHJpb3JpdGllcygpO1xyXG4gICAgICAgIGNsZWFyUHJvamVjdHMoKTtcclxuICAgICAgICBjbGVhckNvbnRleHRzKCk7XHJcblxyXG4gICAgICAgIC8vIGNsZWFyIGZpbHRlciBpbnB1dFxyXG4gICAgICAgIGNsZWFyRmlsdGVycygpO1xyXG5cclxuICAgICAgICAvLyBub3cgcmVidWlsZCBVSSBsaXN0IGZyb20gY2FjaGVcclxuICAgICAgICBkaXNwbGF5VGFza3MoKTtcclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIHRoZSBET00gd2l0aCB0YXNrIGF0dHJpYnV0ZXNcclxuICAgICAgICBkaXNwbGF5UHJpb3JpdGllcygpO1xyXG4gICAgICAgIGRpc3BsYXlQcm9qZWN0cygpO1xyXG4gICAgICAgIGRpc3BsYXlDb250ZXh0cygpO1xyXG5cclxuICAgICAgICAvLyBlbmFibGUga2V5Ym9hcmQgc2hvcnRjdXRzIGFuZCBjbGljayBldmVudHMgZm9yIHRoZSBjb250cm9scyBhcmVhXHJcbiAgICAgICAgYmluZENvbnRyb2xFdmVudHMobWFpbkV2ZW50SGFuZGxlcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBzZXRGaWx0ZXJzKGZpbHRlclN0cjogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGZpbHRlclN0cikge1xyXG4gICAgICAgICAgICAvLyBzZXQgZmlsdGVyIHRleHQgaW5wdXRcclxuICAgICAgICAgICAgbGV0IGlucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmaWx0ZXItaW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBmaWx0ZXJTdHI7XHJcbiAgICAgICAgICAgIGhhbmRsZUZpbHRlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gY2xlYXJGaWx0ZXJzKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIHVwZGF0ZSBmaWx0ZXIgaW5wdXRcclxuICAgICAgICAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmaWx0ZXItaW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjbGVhclRhc2tzKCk6IHZvaWQge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlzdENvbnRhaW5lci1kaXZcIikuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZmlsdGVyRGlzcGxheWVkVGFza3MoKTogdm9pZCB7XHJcbiAgICAgICAgY2xlYXJUYXNrcygpO1xyXG5cclxuICAgICAgICAvLyBob25vcnMgYW55IHNwZWNpZmllZCBmaWx0ZXJzXHJcbiAgICAgICAgZGlzcGxheVRhc2tzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZVNob3dDbG9zZWRTdGF0dXMoKTogdm9pZCB7XHJcbiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3dDbG9zZWQtbGFiZWwnKTtcclxuICAgICAgICB2YXIgYWN0aXZlID0gZWwuY2xhc3NOYW1lLm1hdGNoKC8oKCB8XilidG4tc3VjY2VzcykvKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAvLyBpZiBhY3RpdmUgdG9nZ2xlIHRvIGluYWN0aXZlXHJcbiAgICAgICAgc2V0U2hvd0Nsb3NlZCghYWN0aXZlKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0U2hvd0Nsb3NlZChhY3RpdmU6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvd0Nsb3NlZC1sYWJlbCcpO1xyXG4gICAgICAgIGlmIChhY3RpdmUpIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UoLygoIHxeKWJ0bi1kYW5nZXIpLywgXCIgYnRuLXN1Y2Nlc3NcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UoLygoIHxeKWJ0bi1zdWNjZXNzKS8sIFwiIGJ0bi1kYW5nZXJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFRvZG9UeHRWYXVsdC5zZXRDb25maWcoe3Nob3dDbG9zZWQ6IGFjdGl2ZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB0b2dnbGVQYW5lbChuYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB2YXIgaGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgbmFtZSArICcgLnBhbmVsLWhlYWRpbmcnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB2YXIgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgbmFtZSArICcgLnBhbmVsLWJvZHknKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB2YXIgaGlkZGVuID0gYm9keS5jbGFzc05hbWUubWF0Y2goLygoIHxeKWNvbGxhcHNlKS8pID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIGlmIChoaWRkZW4pIHtcclxuICAgICAgICAgICAgc2hvd1BhbmVsKGhlYWRpbmcsIGJvZHkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGhpZGVQYW5lbChoZWFkaW5nLCBib2R5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNob3dQYW5lbChoZWFkaW5nOiBIVE1MRWxlbWVudCwgYm9keTogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgaW5kaWNhdG9yID0gaGVhZGluZy5xdWVyeVNlbGVjdG9yKFwiLmdseXBoaWNvblwiKTtcclxuICAgICAgICBib2R5LmNsYXNzTmFtZSA9IGJvZHkuY2xhc3NOYW1lLnJlcGxhY2UoLygoIHxeKWNvbGxhcHNlKS9nLCBcIlwiKTtcclxuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gaW5kaWNhdG9yLmNsYXNzTmFtZS5yZXBsYWNlKC8oKCB8XilnbHlwaGljb24tY2hldnJvbi1kb3duKS8sIFwiIGdseXBoaWNvbi1jaGV2cm9uLXVwXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBoaWRlUGFuZWwoaGVhZGluZzogSFRNTEVsZW1lbnQsIGJvZHk6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIGluZGljYXRvciA9IGhlYWRpbmcucXVlcnlTZWxlY3RvcihcIi5nbHlwaGljb25cIik7XHJcbiAgICAgICAgYm9keS5jbGFzc05hbWUgKz0gXCIgY29sbGFwc2VcIjtcclxuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gaW5kaWNhdG9yLmNsYXNzTmFtZS5yZXBsYWNlKC8oKCB8XilnbHlwaGljb24tY2hldnJvbi11cCkvLCBcIiBnbHlwaGljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB0b2dnbGVUYXNrU3RhdHVzKHRhc2tJZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdmFyIHRhc2sgPSBUb2RvVHh0LmdldFRhc2sodGFza0lkKTtcclxuICAgICAgICBpZiAodGFzaykge1xyXG4gICAgICAgICAgICBpZiAodGFzay5pc0FjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgVG9kb1R4dC5jbG9zZVRhc2sodGFza0lkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFRvZG9UeHQuYWN0aXZhdGVUYXNrKHRhc2tJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aWxsIHJldHJpZXZlIHRoZSB0b2RvLnR4dCBmaWxlIGZyb20gdGhlIHBhc3NlZCBpblxyXG4gICAgICogZmlsZU5hbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGZpbGVOYW1lIHRoZSBTdHJpbmcgbmFtZSBvZiB0aGUgdG9kby50eHQgZmlsZSB0byBiZSBvcGVuZWRcclxuICAgICAqIGZpbGUuXHJcbiAgICAgKiBFWDogXCJ0b2RvLnR4dFwiXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb2RvVHh0RmlsZShmaWxlTmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8gbG9hZCB2aWEgQUpBWCBjYWxsIHRvIGxvY2FsIGZpbGUgc3lzdGVtXHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IGZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAvL2Nyb3NzRG9tYWluOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAoanFYSFIsIHRleHRTdGF0dXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZGlzcGxheSBhIHByb3BlciBlcnJvciBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KHRleHRTdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFzcyB0aGUgcmVzcG9uc2Ugb24gdG8gdGhlIG5leHQgY2FsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBUb2RvVHh0LnBhcnNlVG9kb1R4dEZpbGUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hVaSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBoYW5kbGVGaWxlU2VsZWN0KGU6IEZpbGVEcm9wRXZlbnQpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdmFyIGZpbGVzID0gZS5kYXRhVHJhbnNmZXIuZmlsZXM7IC8vIEZpbGVMaXN0IG9iamVjdC5cclxuXHJcbiAgICAgICAgLy8gZmlsZXMgaXMgYSBGaWxlTGlzdCBvZiBGaWxlIG9iamVjdHMuXHJcbiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIGYgPSBmaWxlc1swXTtcclxuXHJcbiAgICAgICAgICAgIC8vIHByb2Nlc3MgdXNpbmcgYSBGaWxlUmVhZGVyXHJcbiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgICAgICAgICAgLy8gZ2V0IHRoZSBjb250ZW50IGFzIGEgU3RyaW5nXHJcbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoZTogUHJvZ3Jlc3NFdmVudDxGaWxlUmVhZGVyPikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpcm0oVG9kb1R4dFJlc291cmNlcy5nZXQoXCJPVkVSV1JJVEVfQ09ORklSTVwiKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBUb2RvVHh0LnBhcnNlVG9kb1R4dEZpbGUoZS50YXJnZXQucmVzdWx0LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hVaSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmLCBcIlVURi04XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaGFuZGxlRHJhZ092ZXIoZTogRHJhZ0V2ZW50KSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IFwiY29weVwiOyAvLyBFeHBsaWNpdGx5IHNob3cgdGhpcyBpcyBhIGNvcHkuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aWxsIGFsbG93IHRoZSB1c2VyIHRvIGRvd25sb2FkIGEgY29weSBvZiB0aGUgdG9kby50eHQgZmlsZVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZXhwb3J0VG9kb1R4dEZpbGUoKSB7XHJcbiAgICAgICAgbGV0IHRhc2tzOiBUb2RvVHh0VGFza1tdID0gVG9kb1R4dC5nZXRTb3J0ZWRUYXNrQXJyYXkoKTtcclxuICAgICAgICBsZXQgdGFza0FycmF5OiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTx0YXNrcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0YXNrQXJyYXkucHVzaCh0YXNrc1tpXS50ZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgb3V0cHV0IHN0cmluZyB0byBiZSB3cml0dGVuXHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB0YXNrQXJyYXkuam9pbihcIlxcblwiKTtcclxuXHJcbiAgICAgICAgLy8gc2V0IGRhdGF0eXBlIHRvIHRleHQvY3N2IHRvIGluaXRpYXRlIGRvd25sb2FkIHByb21wdFxyXG4gICAgICAgIHZhciBkYXRhID0gZW5jb2RlVVJJKFwiZGF0YTp0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04LFwiICsgY29udGVudCk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5vcGVuKGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gd2lsbCBnZW5lcmF0ZSBhIGh0bWwtbWFya3VwIHZlcnNpb24gb2YgdGhlIHRhc2tcclxuICAgICAqIEBwYXJhbSB7VG9kb1R4dFRhc2t9IHRhc2sgLSB0aGUgdGFzayB0byBnZW5lcmF0ZSBmb3JcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBIVE1MIG1hcmtlZCB1cCB0YXNrIHRleHRcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldE1hcmt1cEZvclRhc2sodGFzazogVG9kb1R4dFRhc2spOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCB0ZXh0OiBzdHJpbmcgPSB0YXNrLnRleHQgfHwgJyc7XHJcblxyXG4gICAgICAgIC8vIG1ha2UgaHRtbCBjb21wYXRpYmxlXHJcbiAgICAgICAgdGV4dCA9IFRvZG9UeHRVdGlscy5odG1sRW5jb2RlKHRleHQpO1xyXG5cclxuICAgICAgICAvLyBtYXJrdXAgcHJpb3JpdHlcclxuICAgICAgICBsZXQgcHJpQ2xzOiBzdHJpbmcgPSBnZXREaXNwbGF5Q2xhc3NGb3JUYXNrKHRhc2spO1xyXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UodGFzay5wcmlvcml0eSwgXCI8c3BhbiBjbGFzcz1cXFwiXCIgKyBwcmlDbHMgKyBcIlxcXCI+PGI+XCIgKyB0YXNrLnByaW9yaXR5ICsgXCI8L2I+PC9zcGFuPlwiKTtcclxuXHJcbiAgICAgICAgLy8gbWFya3VwIHByb2plY3RzXHJcbiAgICAgICAgbGV0IHByb2plY3RzOiBzdHJpbmdbXSA9IHRhc2sucHJvamVjdHM7XHJcbiAgICAgICAgcHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKHByb2plY3QucmVwbGFjZSgvXFwrL2csIFwiXFxcXCtcIikgKyBcIig/IVswLTlBLVphLXpdKVwiLCBcImdcIik7XHJcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UocmVnZXgsIFwiPHNwYW4gY2xhc3M9XFxcInRleHQtbXV0ZWRcXFwiPjxiPjxpPlwiICsgcHJvamVjdCArIFwiPC9pPjwvYj48L3NwYW4+XCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBtYXJrdXAgY29udGV4dHNcclxuICAgICAgICBsZXQgY29udGV4dHM6IHN0cmluZ1tdID0gdGFzay5jb250ZXh0cztcclxuICAgICAgICBjb250ZXh0cy5mb3JFYWNoKChjdHgpID0+IHtcclxuICAgICAgICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChjdHggKyBcIig/IVswLTlBLVphLXpdKVwiLCBcImdcIik7XHJcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UocmVnZXgsIFwiPHNwYW4gY2xhc3M9XFxcInRleHQtbXV0ZWRcXFwiPjxiPjxpPlwiICsgY3R4ICsgXCI8L2k+PC9iPjwvc3Bhbj5cIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIG1hcmt1cCBjcmVhdGVkIGRhdGVcclxuICAgICAgICBsZXQgZGF0ZTogc3RyaW5nID0gdGFzay5jcmVhdGVkRGF0ZTtcclxuICAgICAgICBpZiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKGRhdGUsIFwiPHNwYW4gY2xhc3M9XFxcInRleHQtbXV0ZWQgaGlkZGVuLXhzXFxcIj48Yj48aT5cIiArIGRhdGUgKyBcIjwvaT48L2I+PC9zcGFuPlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gcmV0dXJucyB0aGUgYXBwcm9wcmlhdGUgZGlzcGxheSBjbGFzc2VzIGZvciB0aGlzIHRhc2tcclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHByaW9yaXR5IGJhc2VkIGNsYXNzIHRvIGFwcGx5IHRvIGEgVGFzayBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXREaXNwbGF5Q2xhc3NGb3JUYXNrKHRhc2s6IFRvZG9UeHRUYXNrKTogc3RyaW5nIHtcclxuICAgICAgICAvLyBnZXQgYSBsaXN0IG9mIHRoZSBjdXJyZW50IHRhc2tzIGFuZCBpdGVyYXRlIHRocm91Z2hcclxuICAgICAgICBsZXQgY2xzOiBzdHJpbmcgPSAnJztcclxuICAgICAgICBpZiAodGFzay5wcmlvcml0eSAhPT0gbnVsbCAmJiB0YXNrLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXNrLnByaW9yaXR5ID09PSBcIihBKVwiKSB7XHJcbiAgICAgICAgICAgICAgICBjbHMgKz0gXCIgdGV4dC1kYW5nZXJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGFzay5wcmlvcml0eSA9PT0gXCIoQilcIikge1xyXG4gICAgICAgICAgICAgICAgY2xzICs9IFwiIHRleHQtd2FybmluZ1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0YXNrLnByaW9yaXR5ID09PSBcIihDKVwiKSB7XHJcbiAgICAgICAgICAgICAgICBjbHMgKz0gXCIgdGV4dC1wcmltYXJ5XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjbHM7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVFbGVtZW50cygpOiB2b2lkIHtcclxuICAgICAgICAvKmpzaGludCBtdWx0aXN0cjogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciBiYXNlRWxlbWVudHMgPSAnIFxcXHJcbiAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCIgaWQ9XCJmaWxlRHJvcC1kaXZcIj4gXFxcclxuICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtOVwiPiBcXFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj4gXFxcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ0bi1ncm91cCBidG4tZ3JvdXAtanVzdGlmaWVkXCI+IFxcXHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImJ0biBidG4tYmxvY2sgYnRuLXByaW1hcnkgYnRuLWxnIGJ0bi1maWxlIGVsbGlwc2lzXCIgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCIgZGF0YS1wbGFjZW1lbnQ9XCJ0b3BcIiB0ZXh0PVwiJyArIFRvZG9UeHRSZXNvdXJjZXMuZ2V0KFwiSU1QT1JUXCIpICsgJ1wiPiBcXFxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1zYXZlXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImhpZGRlbi14c1wiPicgKyBUb2RvVHh0UmVzb3VyY2VzLmdldChcIklNUE9SVFwiKSArICc8L3NwYW4+IDxpbnB1dCBpZD1cImZpbGVVcGxvYWQtaW5wdXRcIiB0eXBlPVwiZmlsZVwiIHBsYWNlaG9sZGVyPVwiU2VsZWN0IHRvZG8udHh0IEZpbGVcIj4gXFxcclxuICAgICAgICAgICAgICAgIDwvYT4gXFxcclxuICAgICAgICAgICAgICAgIDxhIGlkPVwiYWRkVGFza0J1dHRvbi1idXR0b25cIiBjbGFzcz1cImJ0biBidG4tbGcgYnRuLXByaW1hcnkgZWxsaXBzaXNcIiBkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIiBkYXRhLXBsYWNlbWVudD1cInRvcFwiIHRleHQ9XCInICsgVG9kb1R4dFJlc291cmNlcy5nZXQoXCJBRERfVEFTS1wiKSArICdcIj4gXFxcclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcGx1c1wiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJoaWRkZW4teHNcIj4nICsgVG9kb1R4dFJlc291cmNlcy5nZXQoXCJBRERfVEFTS1wiKSArICc8L3NwYW4+IFxcXHJcbiAgICAgICAgICAgICAgICA8L2E+IFxcXHJcbiAgICAgICAgICAgICAgICA8YSBpZD1cInNhdmVGaWxlQnV0dG9uLWJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1sZyBidG4tcHJpbWFyeSBlbGxpcHNpc1wiIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiIGRhdGEtcGxhY2VtZW50PVwidG9wXCIgdGV4dD1cIicgKyBUb2RvVHh0UmVzb3VyY2VzLmdldChcIkVYUE9SVFwiKSArICdcIj4gXFxcclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tb3BlblwiPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJoaWRkZW4teHNcIj4nICsgVG9kb1R4dFJlc291cmNlcy5nZXQoXCJFWFBPUlRcIikgKyAnPC9zcGFuPiBcXFxyXG4gICAgICAgICAgICAgICAgPC9hPiBcXFxyXG4gICAgICAgICAgICAgICAgPGEgaWQ9XCJzaG93Q2xvc2VkLWxhYmVsXCIgY2xhc3M9XCJidG4gYnRuLWxnIGJ0bi1kYW5nZXIgZWxsaXBzaXNcIiBkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIiBkYXRhLXBsYWNlbWVudD1cInRvcFwiIHRleHQ9XCInICsgVG9kb1R4dFJlc291cmNlcy5nZXQoXCJTSE9XX0NMT1NFRFwiKSArICdcIj4gXFxcclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tb2stY2lyY2xlXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImhpZGRlbi14c1wiPicgKyBUb2RvVHh0UmVzb3VyY2VzLmdldChcIlNIT1dfQ0xPU0VEXCIpICsgJzwvc3Bhbj4gXFxcclxuICAgICAgICAgICAgICAgIDwvYT4gXFxcclxuICAgICAgICAgICAgPC9kaXY+IFxcXHJcbiAgICAgICAgPC9kaXY+IFxcXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPiBcXFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgaW5wdXQtZ3JvdXAtbGdcIj4gXFxcclxuICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cImZpbHRlci1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIicgKyBUb2RvVHh0UmVzb3VyY2VzLmdldChcIkZJTFRFUl9QTEFDRUhPTERFUl9URVhUXCIpICsgJ1wiPiBcXFxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC1idG5cIj4gXFxcclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiY2xlYXJGaWx0ZXItYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiB0eXBlPVwiYnV0dG9uXCIgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCIgZGF0YS1wbGFjZW1lbnQ9XCJ0b3BcIiB0ZXh0PVwiJyArIFRvZG9UeHRSZXNvdXJjZXMuZ2V0KFwiQ0xFQVJfRklMVEVSXCIpICsgJ1wiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmUtY2lyY2xlXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cImhpZGRlbi14c1wiPicgKyBUb2RvVHh0UmVzb3VyY2VzLmdldChcIkNMRUFSX0ZJTFRFUlwiKSArICc8L3NwYW4+PC9idXR0b24+IFxcXHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+IFxcXHJcbiAgICAgICAgICAgIDwvZGl2PiBcXFxyXG4gICAgICAgIDwvZGl2PiBcXFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj4gXFxcclxuICAgICAgICAgICAgPGRpdiBpZD1cImxpc3RDb250YWluZXItZGl2XCI+PC9kaXY+IFxcXHJcbiAgICAgICAgPC9kaXY+IFxcXHJcbiAgICA8L2Rpdj4gXFxcclxuICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtM1wiPiBcXFxyXG4gICAgICAgIDxkaXYgaWQ9XCJwcmlvcml0aWVzLWRpdlwiIGNsYXNzPVwicGFuZWwgcGFuZWwtcHJpbWFyeVwiPiBcXFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtaGVhZGluZ1wiPiBcXFxyXG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwicGFuZWwtdGl0bGVcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi11cFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj4gJyArIFRvZG9UeHRSZXNvdXJjZXMuZ2V0KFwiUFJJT1JJVElFU1wiKSArICc8L2gzPiBcXFxyXG4gICAgICAgICAgICA8L2Rpdj4gXFxcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWJvZHlcIj4gXFxcclxuICAgICAgICAgICAgICAgIDx1bCBpZD1cInByaW9yaXRpZXMtdWxcIiBjbGFzcz1cImxpc3QtZ3JvdXBcIj48L3VsPiBcXFxyXG4gICAgICAgICAgICA8L2Rpdj4gXFxcclxuICAgICAgICA8L2Rpdj4gXFxcclxuICAgICAgICA8ZGl2IGlkPVwicHJvamVjdHMtZGl2XCIgY2xhc3M9XCJwYW5lbCBwYW5lbC1wcmltYXJ5XCI+IFxcXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1oZWFkaW5nXCI+IFxcXHJcbiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJwYW5lbC10aXRsZVwiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPiAnICsgVG9kb1R4dFJlc291cmNlcy5nZXQoXCJQUk9KRUNUU1wiKSArICc8L2gzPiBcXFxyXG4gICAgICAgICAgICA8L2Rpdj4gXFxcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWJvZHlcIj4gXFxcclxuICAgICAgICAgICAgICAgIDx1bCBpZD1cInByb2plY3RzLXVsXCIgY2xhc3M9XCJsaXN0LWdyb3VwXCI+PC91bD4gXFxcclxuICAgICAgICAgICAgPC9kaXY+IFxcXHJcbiAgICAgICAgPC9kaXY+IFxcXHJcbiAgICAgICAgPGRpdiBpZD1cImNvbnRleHRzLWRpdlwiIGNsYXNzPVwicGFuZWwgcGFuZWwtcHJpbWFyeVwiPiBcXFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtaGVhZGluZ1wiPiBcXFxyXG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwicGFuZWwtdGl0bGVcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi11cFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj4gJyArIFRvZG9UeHRSZXNvdXJjZXMuZ2V0KFwiQ09OVEVYVFNcIikgKyAnPC9oMz4gXFxcclxuICAgICAgICAgICAgPC9kaXY+IFxcXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1ib2R5XCI+IFxcXHJcbiAgICAgICAgICAgICAgICA8dWwgaWQ9XCJjb250ZXh0cy11bFwiIGNsYXNzPVwibGlzdC1ncm91cFwiPjwvdWw+IFxcXHJcbiAgICAgICAgICAgIDwvZGl2PiBcXFxyXG4gICAgICAgIDwvZGl2PiBcXFxyXG4gICAgPC9kaXY+IFxcXHJcbiAgICA8L2Rpdj4nO1xyXG5cclxuICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG90eHQnKTtcclxuICAgICAgICBpZiAoY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBiYXNlRWxlbWVudHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICogVGhpcyBqYXZhc2NyaXB0IHdhcyBjcmVhdGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbnMgYXRcclxuICogaHR0cDovL3RvZG90eHQuY29tLyBhbmQgaXMgaW50ZW5kZWQgdG8gYWxsb3cgdXNlcnMgdG8gYWNjZXNzIHRoZWlyXHJcbiAqIHRvZG8udHh0IGZpbGVzIGluIGEgdXNlci1mcmllbmRseSBhbmQgZWFzeSB0byB2aXN1YWxpemUgbWFubmVyLlxyXG4gKlxyXG4gKiBPbmNlIGluaXRpYWxseSB1cGxvYWRlZCwgdGhlIHRvZG8udHh0IGZpbGUgd2lsbFxyXG4gKiBiZSBsb2FkZWQgaW50byBhbiBIVE1MNSBsb2NhbFN0b3JhZ2UgYW5kIG1hbmFnZWQgZnJvbSB0aGVyZS5cclxuICogVGhlIHdlYiBwYWdlIHRoZW4gYWxsb3dzIGRvd25sb2FkaW5nIGNoYW5nZXMgYmFjayB0byB0aGUgdXNlclxyXG4gKiBpbiBhIHR4dCBmb3JtYXQgY29tcGxpYW50IHdpdGggdGhlIHRvZG8udHh0IHNwZWNpZmljYXRpb25zLCBidXRcclxuICogaGF2aW5nIHJlLXNvcnRlZCB0aGUgdGFza3MuXHJcbiAqIFxyXG4gKiBAQ3JlYXRlZDogMDgvMTQvMjAxMlxyXG4gKiBAQXV0aG9yOiBKYXNvbiBIb2x0IFNtaXRoIChiaWNhcmJvbjhAZ21haWwuY29tKVxyXG4gKiBAVmVyc2lvbjogMC4wLjFcclxuICogQ29weXJpZ2h0IChjKSAyMDEyIEphc29uIEhvbHQgU21pdGguIHRvZG9UeHRXZWJVaSBpcyBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxyXG4gKiBcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdG9kb1R4dFdlYlVpLlxyXG4gKiBcclxuICogdG9kb1R4dFdlYlVpIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcclxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cclxuICogXHJcbiAqIHRvZG9UeHRXZWJVaSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqIFxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIHRvZG9UeHRXZWJVaS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmltcG9ydCB7IFRvZG9UeHRBdHRyaWJ1dGVzIH0gZnJvbSAnLi90YXNrcy90b2RvLXR4dC1hdHRyaWJ1dGVzJztcclxuaW1wb3J0IHsgVG9kb1R4dFRhc2sgfSBmcm9tICcuL3Rhc2tzL3RvZG8tdHh0LXRhc2snO1xyXG5pbXBvcnQgeyBUb2RvVHh0VXRpbHMgfSBmcm9tICcuL2hlbHBlcnMvdG9kby10eHQtdXRpbHMnO1xyXG5pbXBvcnQgeyBUb2RvVHh0VmF1bHQgfSBmcm9tICcuL3N0b3JhZ2UvdG9kby10eHQtdmF1bHQnO1xyXG5cclxuZXhwb3J0IG1vZHVsZSBUb2RvVHh0IHtcclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gd2lsbCByZXR1cm4gYSBzb3J0ZWQgYXJyYXkgb2YgdGFza3MgYXMgcHVsbGVkIGZyb21cclxuICAgICAqIGxvY2FsU3RvcmFnZS5cclxuICAgICAqIEByZXR1cm5zIHthcnJheX0gYSBzb3J0ZWQgbGlzdCBvZiB0YXNrcyBmcm9tIGxvY2FsU3RvcmFnZVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0U29ydGVkVGFza0FycmF5KCk6IFRvZG9UeHRUYXNrW10ge1xyXG4gICAgICAgIC8vIHNvcnQgdGhlIGxpc3QgYW5kIHRoZW4gYWRkIGl0XHJcbiAgICAgICAgbGV0IHRhc2tBcnJheTogVG9kb1R4dFRhc2tbXSA9IFRvZG9UeHRWYXVsdC5nZXRBbGxUYXNrcygpO1xyXG4gICAgICAgIFRvZG9UeHRBdHRyaWJ1dGVzLnJlc2V0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHRhc2tBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB1cGRhdGVBdHRyaWJ1dGVzKHRhc2tBcnJheVtpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhc2tBcnJheS5zb3J0KGNvbXBhcmVUYXNrcyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0YXNrQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aWxsIHJldHVybiBhIGZpbHRlcmVkIGFycmF5IG9mIHRhc2tzIGJhc2VkIG9uIHRoZSBwYXNzZWQgaW5cclxuICAgICAqIGZpbHRlciBzdHJpbmcuICBNYXRjaGluZyB1c2VzIGFuIG9yZGVyZWQgZnV6enkgbWF0Y2ggc28gZm9yIHRoZSBmb2xsb3dpbmc6XHJcbiAgICAgKiBcIihBKSAyMDE0LTAzLTAyIGRvbid0IGZvcmdldCB0byBmaWxlIEByZXBvcnQgd2l0aCArSm9oblwiIGEgcGFzc2VkIGluIGZpbHRlclxyXG4gICAgICogc3RyaW5nIG9mIFwiZm9yIEpvaG5cIiB3aWxsIG1hdGNoLCBidXQgXCJKb2huIHJlcG9ydFwiIHdpbGwgbm90IG1hdGNoXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyU3RyIC0gYSBzdHJpbmcgY29udGFpbmluZyBjaGFyYWN0ZXJzIHRvIG1hdGNoIGFnYWluc3QgdGhlIGV4aXN0aW5nIHRhc2tzXHJcbiAgICAgKiBAcmV0dXJucyB7YXJyYXl9IGEgc29ydGVkIGxpc3Qgb2YgdGFza3MgbWF0Y2hpbmcgdGhlIHBhc3NlZCBpbiA8Yj48aT5maWx0ZXJTdHI8L2k+PC9iPlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0RmlsdGVyZWRUYXNrQXJyYXkoZmlsdGVyU3RyOiBzdHJpbmcpIHtcclxuICAgICAgICB2YXIgZmlsdGVyZWRUYXNrcyA9IFRvZG9UeHQuZ2V0U29ydGVkVGFza0FycmF5KCk7XHJcbiAgICAgICAgaWYgKGZpbHRlclN0ciAmJiBmaWx0ZXJTdHIgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSByZWdleCBtYXRjaGVyXHJcbiAgICAgICAgICAgIGxldCBmaWx0ZXJzOiBzdHJpbmdbXSA9IGZpbHRlclN0ci5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgIGxldCByU3RyOiBzdHJpbmcgPSAnJztcclxuICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGZpbHRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBmaWx0ZXJzW2ldLnJlcGxhY2UoLyhbLVxcKFxcKVxcW1xcXVxce1xcfStcXD8qXFwuJFxcXlxcfCw6IzxcXCFcXFxcXSkvZywgJ1xcXFwkMScpLnJlcGxhY2UoL1xceDA4L2csICdcXFxceDA4Jyk7XHJcbiAgICAgICAgICAgICAgICByU3RyICs9IFwiLiooXCIgKyBmaWx0ZXIgKyBcIikuKlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoclN0ciwgXCJpXCIpO1xyXG4gICAgICAgICAgICBsZXQgdGFza3M6IFRvZG9UeHRUYXNrW10gPSBmaWx0ZXJlZFRhc2tzLmZpbHRlcihmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQudGV4dC5tYXRjaChyZWdleCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmaWx0ZXJlZFRhc2tzID0gdGFza3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmlsdGVyZWRUYXNrcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHdpbGwgcHJvY2VzcyBlYWNoIGxpbmUgb2YgdGhlIHRvZG8udHh0LCBzb3J0IGJ5IHByaW9yaXR5LFxyXG4gICAgICogY3JlYXRpb25EYXRlLCBhbmQgc3RhdGUgKGFjdGl2ZSBvciBjbG9zZWQpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0b2RvVHh0IC0gdGhlIFwiXFxuXCIgZGVsaW1pdGVkIGxpbmVzIGZyb20gYSB0b2RvLnR4dCBmaWxlXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFwcGVuZCAtIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIGV4aXN0aW5nIHRhc2tzIHNob3VsZCBiZSBjbGVhcmVkXHJcbiAgICAgKiBmaXJzdCBvciBqdXN0IGFwcGVuZGVkIHRvIHdpdGggdGhlIG5ldyBmaWxlXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBwYXJzZVRvZG9UeHRGaWxlKHRvZG9UeHQ6IHN0cmluZywgYXBwZW5kPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICghYXBwZW5kKSB7XHJcbiAgICAgICAgICAgIC8vIGNsZWFyIHRoZSBTdG9yYWdlXHJcbiAgICAgICAgICAgIFRvZG9UeHRWYXVsdC5yZW1vdmVBbGxUYXNrcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbGluZXMgPSB0b2RvVHh0LnNwbGl0KFwiXFxuXCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gbGluZXMpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBsaW5lc1tpXSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpbmU6IHN0cmluZyA9IGxpbmVzW2ldO1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVtcHR5IGxpbmVzXHJcbiAgICAgICAgICAgICAgICBpZiAobGluZSAmJiBsaW5lICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyBUYXNrIGFuZCBhZGQgdG8gb3VyIGdsb2JhbCBsaXN0IGluIGl0J3MgcHJvcGVyIGxvY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGFzayhsaW5lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIGNyZWF0ZXMgYSBuZXcgdGFzayBhbmQgc2F2ZXMgdG8ge1RvZG9UeHRWYXVsdH1cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0U3RyIC0gYSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgcmF3IHRhc2tcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBJRCBvZiB0aGUgbmV3bHkgY3JlYXRlZCB7VG9kb1R4dC5UYXNrfVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayh0ZXh0U3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCB0ZXh0OiBzdHJpbmcgPSB0ZXh0U3RyIHx8ICcnO1xyXG4gICAgICAgIGxldCB0OiBUb2RvVHh0VGFzayA9IG5ldyBUb2RvVHh0VGFzayh0ZXh0KTtcclxuICAgICAgICBhZGRUYXNrKHQpO1xyXG4gICAgICAgIHJldHVybiB0LmlkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gd2lsbCBnZXQgYSBzcGVjaWZpZWQgdGFzayBmcm9tIFRvZG9UeHRWYXVsdCBieSBpZFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhc2tJZCAtIHRoZSB1bmlxdWUgaWQgb2YgdGhlIHRhc2sgdG8gYmUgcmV0dXJuZWRcclxuICAgICAqIEByZXR1cm5zIHtUb2RvVHh0VGFza30gYSB0YXNrIG9yIG51bGwgaWYgdGFzayBub3QgZm91bmRcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2sodGFza0lkOiBzdHJpbmcpOiBUb2RvVHh0VGFzayB7XHJcbiAgICAgICAgbGV0IHRhc2s6IFRvZG9UeHRUYXNrID0gVG9kb1R4dFZhdWx0LmdldFRhc2sodGFza0lkKTtcclxuICAgICAgICByZXR1cm4gdGFzaztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHVwZGF0ZXMgdGhlIHRhc2sgYW5kIHNhdmVzIGl0IHRvIHRoZSBUb2RvVHh0VmF1bHQgY2FjaGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YXNrSWQgLSB1bmlxdWUgSUQgdXNlZCB0byByZXRyaWV2ZSB0aGUgdGFzayBmcm9tIFN0b3JhZ2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdUZXh0IC0gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB1cGRhdGVkLCByYXcgdGFzayB0ZXh0XHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0YXNrIGNvdWxkIGJlIHVwZGF0ZWQgb3RoZXJ3aXNlIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrKHRhc2tJZDogc3RyaW5nLCBuZXdUZXh0OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAvLyByZS1wYXJzZSB0YXNrXHJcbiAgICAgICAgbGV0IHRhc2s6IFRvZG9UeHRUYXNrO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRhc2sgPSBnZXRUYXNrKHRhc2tJZCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0YXNrID0gbmV3IFRvZG9UeHRUYXNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhc2sucGFyc2VJbnB1dChuZXdUZXh0KTtcclxuXHJcbiAgICAgICAgLy8gb3ZlcndyaXRlIHN0b3JhZ2Ugd2l0aCB1cGRhdGVkIHRhc2tcclxuICAgICAgICBUb2RvVHh0LmFkZFRhc2sodGFzayk7XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gYWRkcyB0aGlzIHRhc2sgdG8gdGhlIGJyb3dzZXIncyBsb2NhbCBjYWNoZSBhbGxvd2luZyBmb3JcclxuICAgICAqIHJldGFpbmVkIGRhdGEgb24gc3Vic2VxdWVudCByZWxvYWRzIG9mIHRoZSBwYWdlXHJcbiAgICAgKiBAcGFyYW0ge1RvZG9UeHRUYXNrfSB0YXNrIC0gYSB0YXNrIHRvIGJlIGFkZGVkIHRvIFN0b3JhZ2VcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFkZFRhc2sodGFzazogVG9kb1R4dFRhc2spIHtcclxuICAgICAgICBUb2RvVHh0VmF1bHQuYWRkVGFzayh0YXNrKTtcclxuICAgICAgICB1cGRhdGVBdHRyaWJ1dGVzKHRhc2spO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gd2lsbCBhcHBlbmQgYW4gXCJ4IFlZWVktTU0tREQgXCIgdG8gYSBzdG9yZWRcclxuICAgICAqIHRhc2sgaWYgbm90IGFscmVhZHkgY2xvc2VkIGFuZCB3aWxsIHJlbW92ZSBhbnkgcHJpb3JpdHlcclxuICAgICAqIGRlY2xhcmF0aW9ucyBpbiB0aGUgdGV4dCBvZiB0aGUgVGFza1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhc2tJZCAtIHVuaXF1ZSBJRCB1c2VkIHRvIHJldHJpZXZlIHRoZSB0YXNrIGZyb20gU3RvcmFnZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGFzayBjb3VsZCBiZSBjbG9zZWQsIG90aGVyd2lzZSBmYWxzZVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gY2xvc2VUYXNrKHRhc2tJZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgdmFyIHRhc2sgPSBnZXRUYXNrKHRhc2tJZCk7XHJcblxyXG4gICAgICAgIGlmICh0YXNrICYmIHRhc2suaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSB0YXNrLnRleHQ7XHJcbiAgICAgICAgICAgIGlmICh0YXNrLnByaW9yaXR5KSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHRhc2sucHJpb3JpdHksIFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRleHQgPSBcInggXCIgKyBUb2RvVHh0VXRpbHMuZm9ybWF0RGF0ZShuZXcgRGF0ZSgpKSArIFwiIFwiICsgdGV4dDtcclxuICAgICAgICAgICAgdXBkYXRlVGFzayh0YXNrLmlkLCB0ZXh0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHdpbGwgcmVtb3ZlIFwieCBZWVlZLU1NLUREIFwiIGZyb20gYSBzdG9yZWRcclxuICAgICAqIHRhc2sgaWYgbm90IGFscmVhZHkgYWN0aXZlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFza0lkIC0gdW5pcXVlIElEIHVzZWQgdG8gcmV0cmlldmUgdGhlIHRhc2sgZnJvbSBTdG9yYWdlXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0YXNrIGNvdWxkIGJlIGFjdGl2YXRlZCwgb3RoZXJ3aXNlIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0ZVRhc2sodGFza0lkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICB2YXIgdGFzayA9IGdldFRhc2sodGFza0lkKTtcclxuICAgICAgICBpZiAodGFzayAmJiAhdGFzay5pc0FjdGl2ZSkge1xyXG4gICAgICAgICAgICBsZXQgdGV4dDogc3RyaW5nID0gdGFzay50ZXh0O1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9eKHggKS8sIFwiXCIpLnJlcGxhY2UodGFzay5jb21wbGV0ZWREYXRlICsgXCIgXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB1cGRhdGVUYXNrKHRhc2suaWQsIHRleHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBAaWdub3JlICovXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVBdHRyaWJ1dGVzKHRhc2s6IFRvZG9UeHRUYXNrKTogdm9pZCB7XHJcbiAgICAgICAgLy8gZ2V0IHRoZSBwcmlvcml0eSBhbmQgYWRkIHRvIGdsb2JhbCBmaWx0ZXIgaGFzaHNldFxyXG4gICAgICAgIGlmICh0YXNrLnByaW9yaXR5KSB7XHJcbiAgICAgICAgICAgIFRvZG9UeHRBdHRyaWJ1dGVzLnByaW9yaXRpZXMuYWRkKHRhc2sucHJpb3JpdHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZ2V0IGVhY2ggcHJvamVjdCBhbmQgYWRkIHRvIHRoZSBnbG9iYWwgZmlsdGVyIGhhc2hzZXRcclxuICAgICAgICB0YXNrLnByb2plY3RzLmZvckVhY2goKHByb2plY3QpID0+IHtcclxuICAgICAgICAgICAgaWYgKHByb2plY3QpIHtcclxuICAgICAgICAgICAgICAgIFRvZG9UeHRBdHRyaWJ1dGVzLnByb2plY3RzLmFkZChwcm9qZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBnZXQgZWFjaCBjb250ZXh0IGFuZCBhZGQgdG8gdGhlIGdsb2JhbCBmaWx0ZXIgaGFzaHNldFxyXG4gICAgICAgIHRhc2suY29udGV4dHMuZm9yRWFjaCgoY29udGV4dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgVG9kb1R4dEF0dHJpYnV0ZXMuY29udGV4dHMuYWRkKGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEBpZ25vcmUgKi9cclxuICAgIGZ1bmN0aW9uIGNvbXBhcmVUYXNrcyh0YXNrQTogVG9kb1R4dFRhc2ssIHRhc2tCOiBUb2RvVHh0VGFzaykge1xyXG4gICAgICAgIC8vIGZ1bmN0aW9uIHdpbGwgYWxsb3cgc29ydGluZyBvZiB0YXNrcyBieSB0aGUgZm9sbG93aW5nXHJcbiAgICAgICAgLy8gY3JpdGVyaWE6ICgxKSBhY3RpdmUgdnMuIGNsb3NlZCAoMikgcHJpb3JpdHkgKDMpIGNyZWF0ZWQgZGF0ZVxyXG4gICAgICAgIC8vICg0KSBjb21wbGV0ZWQgZGF0ZVxyXG4gICAgICAgIHZhciBhQWN0aXZlID0gdGFza0EuaXNBY3RpdmU7XHJcbiAgICAgICAgdmFyIGJBY3RpdmUgPSB0YXNrQi5pc0FjdGl2ZTtcclxuICAgICAgICB2YXIgYVByaSA9IHRhc2tBLnByaW9yaXR5O1xyXG4gICAgICAgIHZhciBiUHJpID0gdGFza0IucHJpb3JpdHk7XHJcbiAgICAgICAgdmFyIGFDcmVhdGVkID0gdGFza0EuY3JlYXRlZERhdGU7XHJcbiAgICAgICAgdmFyIGJDcmVhdGVkID0gdGFza0IuY3JlYXRlZERhdGU7XHJcbiAgICAgICAgdmFyIGFDb21wbGV0ZWQgPSB0YXNrQS5jb21wbGV0ZWREYXRlO1xyXG4gICAgICAgIHZhciBiQ29tcGxldGVkID0gdGFza0IuY29tcGxldGVkRGF0ZTtcclxuXHJcbiAgICAgICAgLy8gKDEpIGNvbXBhcmUgYWN0aXZlIHZzLiBjbG9zZWRcclxuICAgICAgICBpZiAoYUFjdGl2ZSAhPT0gYkFjdGl2ZSkge1xyXG4gICAgICAgICAgICAvLyBwcmlvcml0aXplIGFjdGl2ZSBvdmVyIGNsb3NlZFxyXG4gICAgICAgICAgICBpZiAoYUFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgeyAvLyAoMikgY29tcGFyZSBwcmlvcml0eVxyXG4gICAgICAgICAgICBpZiAoYVByaSAhPT0gYlByaSkge1xyXG4gICAgICAgICAgICAgICAgLy8gb3JkZXIgYnkgcHJpb3JpdHksIGJ1dCBmYXZvciBoYXZpbmcgcHJpb3JpdHkgb3ZlciBub3RcclxuICAgICAgICAgICAgICAgIGlmICghYlByaSB8fCBhUHJpIDwgYlByaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWFQcmkgfHwgYVByaSA+IGJQcmkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gKDMpIGNvbXBhcmUgY3JlYXRlZCBkYXRlXHJcbiAgICAgICAgICAgICAgICBpZiAoYUNyZWF0ZWQgIT09IGJDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb3JkZXIgYnkgY3JlYXRlZCBkYXRlIGFzY2VuZGluZyAob2xkZXN0IG9uZXMgZmlyc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFDcmVhdGVkIDwgYkNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vICg0KSBjb21wYXJlIGNvbXBsZXRlZCBkYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFDb21wbGV0ZWQgIT09IGJDb21wbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3JkZXIgYnkgY29tcGxldGVkIGRhdGUgZGVzY2VuZGluZyAobGF0ZXN0IG9uZXMgZmlyc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhQ29tcGxldGVkID4gYkNvbXBsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG9iamVjdHMgYXJlIGVxdWl2YWxlbnRcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxufSIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqIFRoaXMgamF2YXNjcmlwdCB3YXMgY3JlYXRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb25zIGF0XHJcbiAqIGh0dHA6Ly90b2RvdHh0LmNvbS8gYW5kIGlzIGludGVuZGVkIHRvIGFsbG93IHVzZXJzIHRvIGFjY2VzcyB0aGVpclxyXG4gKiB0b2RvLnR4dCBmaWxlcyBpbiBhIHVzZXItZnJpZW5kbHkgYW5kIGVhc3kgdG8gdmlzdWFsaXplIG1hbm5lci5cclxuICpcclxuICogT25jZSBpbml0aWFsbHkgdXBsb2FkZWQsIHRoZSB0b2RvLnR4dCBmaWxlIHdpbGxcclxuICogYmUgbG9hZGVkIGludG8gYW4gSFRNTDUgbG9jYWxTdG9yYWdlIGFuZCBtYW5hZ2VkIGZyb20gdGhlcmUuXHJcbiAqIFRoZSB3ZWIgcGFnZSB0aGVuIGFsbG93cyBkb3dubG9hZGluZyBjaGFuZ2VzIGJhY2sgdG8gdGhlIHVzZXJcclxuICogaW4gYSB0eHQgZm9ybWF0IGNvbXBsaWFudCB3aXRoIHRoZSB0b2RvLnR4dCBzcGVjaWZpY2F0aW9ucywgYnV0XHJcbiAqIGhhdmluZyByZS1zb3J0ZWQgdGhlIHRhc2tzLlxyXG4gKiBcclxuICogQENyZWF0ZWQ6IDA4LzE0LzIwMTJcclxuICogQEF1dGhvcjogSmFzb24gSG9sdCBTbWl0aCAoYmljYXJib244QGdtYWlsLmNvbSlcclxuICogQFZlcnNpb246IDAuMC4xXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMiBKYXNvbiBIb2x0IFNtaXRoLiB0b2RvVHh0V2ViVWkgaXMgZGlzdHJpYnV0ZWQgdW5kZXJcclxuICogdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS5cclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRvZG9UeHRXZWJVaS5cclxuICogXHJcbiAqIHRvZG9UeHRXZWJVaSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XHJcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXHJcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXHJcbiAqIFxyXG4gKiB0b2RvVHh0V2ViVWkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKiBcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCB0b2RvVHh0V2ViVWkuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5pbXBvcnQgeyBUb2RvVHh0Q29uZmlnIH0gZnJvbSBcIi4vdG9kby10eHQtY29uZmlnXCI7XHJcbmltcG9ydCB7IFRvZG9UeHRUYXNrIH0gZnJvbSBcIi4uL3Rhc2tzL3RvZG8tdHh0LXRhc2tcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUb2RvVGV4dFBlcnNpc3RhbmNlIHtcclxuICAgIHRhc2tzOiBUYXNrSXRlbVtdID0gW107XHJcbiAgICBjb25maWc6IFRvZG9UeHRDb25maWcgPSB7IHNob3dDbG9zZWQ6IGZhbHNlIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IodGFza3M/OiBNYXA8c3RyaW5nLCBUb2RvVHh0VGFzaz4sIGNvbmZpZz86IFRvZG9UeHRDb25maWcpIHtcclxuICAgICAgICBpZiAodGFza3MpIHtcclxuICAgICAgICAgICAgdGFza3MuZm9yRWFjaCgodmFsdWU6IFRvZG9UeHRUYXNrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tzLnB1c2goe2lkOiB2YWx1ZS5pZCwgdGV4dDogdmFsdWUudGV4dH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbmZpZykge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmludGVyZmFjZSBUYXNrSXRlbSB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgdGV4dDogc3RyaW5nO1xyXG59IiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICogVGhpcyBqYXZhc2NyaXB0IHdhcyBjcmVhdGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbnMgYXRcclxuICogaHR0cDovL3RvZG90eHQuY29tLyBhbmQgaXMgaW50ZW5kZWQgdG8gYWxsb3cgdXNlcnMgdG8gYWNjZXNzIHRoZWlyXHJcbiAqIHRvZG8udHh0IGZpbGVzIGluIGEgdXNlci1mcmllbmRseSBhbmQgZWFzeSB0byB2aXN1YWxpemUgbWFubmVyLlxyXG4gKlxyXG4gKiBPbmNlIGluaXRpYWxseSB1cGxvYWRlZCwgdGhlIHRvZG8udHh0IGZpbGUgd2lsbFxyXG4gKiBiZSBsb2FkZWQgaW50byBhbiBIVE1MNSBsb2NhbFN0b3JhZ2UgYW5kIG1hbmFnZWQgZnJvbSB0aGVyZS5cclxuICogVGhlIHdlYiBwYWdlIHRoZW4gYWxsb3dzIGRvd25sb2FkaW5nIGNoYW5nZXMgYmFjayB0byB0aGUgdXNlclxyXG4gKiBpbiBhIHR4dCBmb3JtYXQgY29tcGxpYW50IHdpdGggdGhlIHRvZG8udHh0IHNwZWNpZmljYXRpb25zLCBidXRcclxuICogaGF2aW5nIHJlLXNvcnRlZCB0aGUgdGFza3MuXHJcbiAqIFxyXG4gKiBAQ3JlYXRlZDogMDgvMTQvMjAxMlxyXG4gKiBAQXV0aG9yOiBKYXNvbiBIb2x0IFNtaXRoIChiaWNhcmJvbjhAZ21haWwuY29tKVxyXG4gKiBAVmVyc2lvbjogMC4wLjFcclxuICogQ29weXJpZ2h0IChjKSAyMDEyIEphc29uIEhvbHQgU21pdGguIHRvZG9UeHRXZWJVaSBpcyBkaXN0cmlidXRlZCB1bmRlclxyXG4gKiB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLlxyXG4gKiBcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdG9kb1R4dFdlYlVpLlxyXG4gKiBcclxuICogdG9kb1R4dFdlYlVpIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcclxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cclxuICogXHJcbiAqIHRvZG9UeHRXZWJVaSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqIFxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIHRvZG9UeHRXZWJVaS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmltcG9ydCB7IFRvZG9UeHRVdGlscyB9IGZyb20gXCIuLi9oZWxwZXJzL3RvZG8tdHh0LXV0aWxzXCI7XHJcblxyXG5leHBvcnQgbW9kdWxlIFRvZG9UeHRSZXNvdXJjZXMge1xyXG4gICAgdmFyIHJlY3M6IE1hcDxzdHJpbmcsIGFueT4gPSBuZXcgTWFwPHN0cmluZywgYW55PigpO1xyXG5cclxuXHRleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXIobGFuZ0xvY2FsZTogc3RyaW5nLCByZXNvdXJjZU9iajogYW55KTogdm9pZCB7XHJcblx0XHRyZWNzLnNldChsYW5nTG9jYWxlLCByZXNvdXJjZU9iaik7XHJcbiAgICB9XHJcbiAgICBcclxuXHRleHBvcnQgZnVuY3Rpb24gZ2V0KGtleTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdGxldCByZWM6IGFueSA9IHJlY3MuZ2V0KFRvZG9UeHRVdGlscy5nZXRMYW5ndWFnZSgpKTtcclxuXHRcdGlmICghcmVjKSB7XHJcblx0XHRcdHJlYyA9IHJlY3MuZ2V0KFwiZW4tdXNcIik7IC8vIGZhbGxiYWNrIHRvIGVuLVVTXHJcblx0XHR9XHJcblx0XHRsZXQgdmFsOiBzdHJpbmcgPSByZWNba2V5XTtcclxuXHRcdGlmICghdmFsKSB7XHJcblx0XHRcdHRocm93IGByZXF1ZXN0ZWQgcmVzb3VyY2Ugbm90IGZvdW5kOiAke2tleX1gO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHZhbDtcclxuICAgIH1cclxufVxyXG5cclxuVG9kb1R4dFJlc291cmNlcy5yZWdpc3RlcihcImVuLXVzXCIsIHtcclxuXHRPVkVSV1JJVEVfQ09ORklSTTogXCJUaGlzIHdpbGwgb3ZlcndyaXRlIGFueSBleGlzdGluZyBsaXN0LiAgQXJlIHlvdSBzdXJlIHlvdSB3aXNoIHRvIHByb2NlZWQ/XCIsXHJcblx0REVMRVRFX0NPTkZJUk06IFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0YXNrP1wiLFxyXG4gICAgSU1QT1JUOiBcIkltcG9ydFwiLFxyXG4gICAgQUREX1RBU0s6IFwiQWRkIFRhc2tcIixcclxuICAgIEVYUE9SVDogXCJFeHBvcnRcIixcclxuICAgIFNIT1dfQ0xPU0VEOiBcIlNob3cgQ2xvc2VkXCIsXHJcbiAgICBGSUxURVJfUExBQ0VIT0xERVJfVEVYVDogXCJUeXBlIGZpbHRlcihzKVwiLFxyXG4gICAgQ0xFQVJfRklMVEVSOiBcIkNsZWFyIEZpbHRlclwiLFxyXG4gICAgUFJJT1JJVElFUzogXCJQcmlvcml0aWVzXCIsXHJcbiAgICBQUk9KRUNUUzogXCJQcm9qZWN0c1wiLFxyXG4gICAgQ09OVEVYVFM6IFwiQ29udGV4dHNcIixcclxuICAgIENMT1NFOiBcIkNsb3NlXCIsXHJcbiAgICBFRElUX1RBU0tfSEVBREVSOiBcIkVkaXQgVGFza1wiLFxyXG4gICAgQUREOiBcIkFkZFwiLFxyXG4gICAgVVBEQVRFOiBcIlVwZGF0ZVwiLFxyXG4gICAgUFJFVklFVzogXCJQcmV2aWV3XCIsXHJcbiAgICBERUxFVEU6IFwiRGVsZXRlXCIsXHJcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=